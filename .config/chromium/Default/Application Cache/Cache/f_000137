Type.registerNamespace("_c");_c.$1L8=function(){};_c.$1L8.registerInterface("_c.$1L8");_c.$1LJ=function(){};_c.$1LJ.registerInterface("_c.$1LJ");_c.$kr=function(){};_c.$kr.registerInterface("_c.$kr");_c.$HL=function(n,t){this.$2o5=7;_c.$HL.initializeBase(this,[n,t])};function $6v5(n,t){_a.$3.$K(t,"folderId");for(var i=!0,u=n.get_$vF(),f=n.get_$vF(),e=f.length,r=0;r<e;++r){var o=f[r];if(o.FolderId===t){_js.Trace.logWarning(_c.$9Y.$ML,"Trying to add an already existing folder to the SyncFolderSetting, folderId = {0}",t);return i}}if(n.get_$6kr()<_h.$26.$k7+_h.$26.get_$1uk().length){Array.add(u,new SyncFolderListItem(t,_a.$7.$Ex(_a.$7.get_$2F())));n.set_$vF(u)}else{i=!1;$2kQ(n,new _g.$3R(t));_js.Trace.logWarning(_c.$9Y.$ML,"Not adding folder to the sync list because syncing max ({0}) number of non-default email folders for this client.",_h.$26.$k7);n.$4Aa("",_a.$g.$8n,!1,!0)}return i}function $4nZ(n,t,i,r){var u=t.$Q8(i);u&&u.set_$6jR(r)}function $4nY(n,t,i,r,u,f){f.val=0;var h=0;var e=n.$5XF(r,i);if(t){for(var o=0;o<t.length;o++){var s=t[o];if(($6v4(n,s)||!u)&&(r===-1||$3Zw(n,s.FolderId,r))){$4nd(n,i,s.FolderId,e);h++}}f.val=t.length-h}_a.$3.$9t(!!e,"activelySyncingFolderListForModule can never be null. At the least it should have default list of folders.");return e}function $6v4(n,t){var i=_a.$7.$3x(t.LastAccessTime);var r=_a.$7.get_$2F();var u=new _a.$Ms(i,r);return Math.floor(u.get_$vQ())<=n.$2o5}function $6v3(n,t,i,r,u){var f=new _a.$Ms(t.$4D(),i.$4D());if(f.get_$vQ()>n.$2o5){u(!0);var e=new _c.$16V;e.set_$9KE(f.get_$vQ());r.$AP(e);return}u(!1)}_c.$HL.prototype={$1np:null,get_$vF:function(){this.$1np||(this.$1np=_a.$74.$AHL(Array,this.$4q,"SyncFolders.Mail.AutoSelected"));this.$1np||(this.$1np=new Array(0));return this.$1np},set_$vF:function(n){this.$4q.$DQ("SyncFolders.Mail.AutoSelected",JsonParser.serialize(n));this.$1np=n;return n},get_$6kr:function(){var n;var t,i;return(i=this.$818(null,-1,t={val:n}),n=t.val,i).length},$3Oa:function(){_js.Trace.logInfo(_c.$9Y.$ML,"Remove AutoSelectedMailSyncFolders settings");for(var t=this.get_$vF(),i=t.length,n=0;n<i;++n){var r=t[n];$2kQ(this,new _g.$3R(r.FolderId))}this.$4q.$D9("SyncFolders.Mail.AutoSelected")},$818:function(n,t,i){return $4nY(this,this.get_$vF(),n,t,!0,i)},$7YB:function(n,t,i){_a.$3.$K(n,"folderId");_a.$3.$K(t,"successCallback");$6v5(this,n)?t():i(Error.create("Failed to add folder into the sync list"))},$88P:function(n){var t;var i,r;return r=$4nY(this,this.get_$vF(),null,n,!1,i={val:t}),t=i.val,r},$ACW:function(n,t){_a.$3.$K(n,"folder");for(var i=this.get_$vF(),u=0;u<i.length;u++){var e=i[u];if(e.FolderId===n.get_$o().Id){var f=_a.$7.$3x(e.LastAccessTime);var r=_a.$7.get_$2F();var o=new _a.$Ms(f.$4D(),r.$4D());if(o.get_$vQ()>this.$2o5&&this.get_$6kr()>=_h.$26.$k7+_h.$26.get_$1uk().length){_js.Trace.logInfo(_c.$9Y.$ML,"Already syncing {0} non-default email folders for this client. This is the max allowed limit.",_h.$26.$k7);Array.removeAt(i,u);this.set_$vF(i);$2kQ(this,n.get_$o());t(!1)}else if(r.get_$4S()!==f.get_$4S()||r.get_$3T()!==f.get_$3T()||r.get_$5n()!==f.get_$5n()){i[u]=new SyncFolderListItem(n.get_$o().Id,_a.$7.$Ex(r));this.set_$vF(i);$6v3(this,f,r,_a.$g.$8n,t)}else t(!1);break}}},$2Oj:function(n,t,i){_a.$3.$K(i,"completeCallback");var r;var u,f;var e=(f=this.$818(t,n,u={val:r}),r=u.val,f);i(e)},$5pz:function(n,t,i){this.$4Aa(n,t,i)},$6or:function(n,t,i){_a.$3.$K(n,"allFolderIds");_a.$3.$K(t,"successCallback");_a.$3.$K(i,"errorCallback");for(var f=!1,u=this.get_$vF(),e=[],r=0;r<u.length;r++)u[r].FolderId in n?Array.add(e,u[r]):f=!0;if(f){_js.Trace.logWarning(_c.$9Y.$ML,"SyncFolderSetting needs to be updated based on folder hierarchy sync results.");this.set_$vF(e)}t()},$6cu:function(n){_a.$3.$K(n,"folderTable");for(var u=_h.$26.get_$1uk(),r=u,f=r.length,t=0;t<f;++t){var e=r[t];$4nZ(this,n,new _g.$3R(e),2)}for(var i=0;i<this.get_$vF().length;i++){var o=this.$1np[i];$4nZ(this,n,new _g.$3R(o.FolderId),1)}},$4Aa:function(n,t,i,r){var u=new _c.$11w;var f;var e,o;var s=(o=this.$818(null,-1,e={val:f}),f=e.val,o);u.set_$6I9(f);u.set_$59a(s.length);u.set_$k8(n);u.set_$5rp(_h.$26.$k7);u.set_$5hZ($5(i)?!1:i);u.set_$5rq($5(r)?!1:r);u.set_$6od(!1);t.$AP(u)}};_c.$13Y=function(n,t,i,r){_c.$13Y.initializeBase(this,[8,13,n,!1,t]);this.$5fB=i;this.$1x8=r;this.$3D=String.format("{0}:{1}","BackgroundSyncContextId",this.$2k)};_c.$13Y.prototype={$5fB:null,$1x8:!1,$3D:null,get_$1y:function(){return this.$3D},get_$7qT:function(){return!1},get_$5W4:function(){return this.$1x8},get_$9uT:function(){return this.$1x8},get_$8Gv:function(){return this.$5fB},$4bC:function(n){return n.$9zM(this.$2k)}};_c.$9Y=function(n,t){_a.$3.$K(n,"localStorageAdapter");_a.$3.$K(t,"eventAggregator");this.$4q=n;this.$J=t};function $3Zw(n,t,i){var r=_g.$V.get_$I().get_$5U().$aW(new _g.$3R(t));if(r.$Bm===1&&(i===11||i===4))return!0;else if((r.$Bm===2||r.$Bm===3)&&(i===12||i===5))return!0;return!1}function $4nd(n,t,i,r){t&&i===t.Id?Array.insert(r,0,i):Array.add(r,i)}function $2kQ(n,t){var i=_g.$V.get_$I().get_$5U().$aW(t);var r=-1;i.$Bm===1?r=4:(i.$Bm===2||i.$Bm===3)&&(r=5);n.$J.$9lH(_h.$mR,new _h.$mR(r,new _bc.$IH(t)))}_c.$9Y.prototype={$4q:null,$J:null,$5XF:function(n,t){for(var r=new Array(0),f=_h.$26.get_$1uk(),e=f.length,u=0;u<e;++u){var i=f[u];(n===-1||$3Zw(this,i,n))&&(t&&i===t.Id?Array.insert(r,0,i):Array.add(r,i))}return r}};_c.$1FN=function(n,t){_c.$1FN.initializeBase(this,[n,t,"BackgroundSyncNotification"])};_c.$1FN.prototype={$8Bo:function(n,t,i){var r=n;var u=new _c.$13Y(r.FolderId,this.$3I,r.$uq,r.$4Ma);if(this.$4Y.$2fq(u,!0))$2FC(this,r,u);else{_js.Trace.logInfo(_a.$0.$5o,String.format("Rejecting BackgroundSyncNotification with FolderId : {0}.",r.FolderId));i(n)}}};_c.$12S=function(n,t){_c.$12S.initializeBase(this,[n,t])};_c.$12S.prototype={$fq:null,get_$1OT:function(){this.$fq||(this.$fq=_a.$74.$AHL(Array,this.$4q,"SyncFolders.Mail.UserSelected"));this.$fq||(this.$fq=new Array(0));return this.$fq},set_$1OT:function(n){if(n){this.$4q.$DQ("SyncFolders.Mail.UserSelected",JsonParser.serialize(n));this.$fq=n}return n},$3Oa:function(){_js.Trace.logInfo(_c.$9Y.$ML,"Remove UserSelectedSyncFolders settings");for(var t=this.get_$1OT(),i=t.length,n=0;n<i;++n){var r=t[n];$2kQ(this,new _g.$3R(r))}this.$4q.$D9("SyncFolders.Mail.UserSelected")},$818:function(n,t,i){for(var u=this.$5XF(t,n),f=this.get_$1OT(),o=f.length,r=0;r<o;++r){var e=f[r];(t===-1||$3Zw(this,e,t))&&$4nd(this,n,e,u)}i.val=0;return u},$88P:function(n){var t;var i,r;return r=this.$818(null,n,i={val:t}),t=i.val,r},$5pz:function(n,t,i){var r=new _c.$11w;r.set_$6I9(this.get_$1OT().length);r.set_$59a(this.get_$1OT().length);r.set_$k8(n);r.set_$5rp(_h.$26.$k7);r.set_$5hZ($5(i)?!1:i);r.set_$5rq(!1);r.set_$6od(!0);t.$AP(r)},$2Oj:function(n,t,i){_a.$3.$K(i,"completeCallback");var r;var u,f;var e=(f=this.$818(t,n,u={val:r}),r=u.val,f);i(e)},$6or:function(n,t,i){_a.$3.$K(n,"allFolderIds");_a.$3.$K(t,"successCallback");_a.$3.$K(i,"errorCallback");for(var u=!1,f=[],e=this.get_$1OT(),s=e.length,r=0;r<s;++r){var o=e[r];o in n?Array.add(f,o):u=!0}if(u){_js.Trace.logWarning(_c.$9Y.$ML,"SyncFolderSetting needs to be updated based on folder hierarchy sync results.");this.set_$1OT(f)}t()}};_c.$10o=function(n){_c.$10o.initializeBase(this,[5,0,!0,n])};_c.$10o.prototype={get_$1y:function(){return"Refresh"},get_$7qT:function(){return!1},$4bC:function(n){return n.$9zT()}};_c.$1MG=function(n,t,i,r,u){_c.$1MG.initializeBase(this,[n,t,r,u]);this.$2k=i};_c.$1MG.prototype={$2k:null,get_$1y:function(){return this.$2k}};_c.$mJ=function(n){_c.$mJ.initializeBase(this,[6,0,!0,n])};_c.$mJ.prototype={get_$7qT:function(){return!1},get_$45P:function(){return!0},$4bC:function(n){return n.$9zR()}};_c.$11l=function(n){this.$$d_$403=Function.createDelegate(this,this.$403);var t=this;n.$Hd(_a.$Yw,function(){t.$403(new _a.$fY(!0))});n.$Hd(_a.$fY,this.$$d_$403);var i=this;n.$Hd(_a.$se,function(){i.$403(new _a.$fY(!0))})};_c.$11l.prototype={$4Y:null,$46i:!1,$4eh:!1,$41:function(n){this.$4Y=n},$3zr:function(n){if(this.$4Y){this.$4Y.$AG();if(this.$46i){_c.$23.$5T("Pending get request is alive, starting full sync");this.$4Y.$1WD(n)}else{if(this.$4Y.get_$1Pe())_c.$23.$5T("Pending get request is not alive and in ALT1, will start full sync when it comes alive");else{_c.$23.$5T("Pending get request is not alive, starting quick sync now and full sync when it comes alive");_a.$T.set_$3Uz(_a.$Sf.toString(n));this.$4Y.$A4B()}this.$4eh=!0}}},$403:function(n){_c.$23.$5T("Pending get request alive changed to {0}",n.$47I);this.$46i=n.$47I;if(this.$4eh&&this.$46i){_c.$23.$5T("Pending get just came alive -> starting sync");this.$4eh=!1;this.$4Y.$1WD(4)}}};_c.$n9=function(n,t){_c.$n9.initializeBase(this,[n,t])};function $4no(n,t,i){var u=t;if(i.ModuleSpecificContext)for(var f=i.ModuleSpecificContext,o=f.length,r=0;r<o;++r){var e=f[r];if(e.FolderId.Id===u.FolderId.Id)return e}_js.Trace.logInfo(_c.$1p.$A,"We can't find the folderEntry inside Conversation SyncState for folder:{0}",u.FolderId.Id);return null}_c.$n9.prototype={$84w:function(n,t){var i=null;var r=$4no(this,n,t);r&&(i=r.LastSuccessfulSyncTime);return i},$3mH:function(n,t){_a.$3.$9t(_bc.$IH.isInstanceOfType(n),"The context type should match the module.");var i=n;_a.$3.$K(i.FolderId,"Invalid call to IsSynced with no folder ID specified.");if(t){var r=$4no(this,n,t);return!!r}return!1},$3yw:function(){return"ConversationSyncStateId"},$9nS:function(n,t){if(t.ModuleSpecificContext){for(var r=t.ModuleSpecificContext,i=0;i<r.length;i++){var u=r[i];if(u.FolderId.Id===n)break}if(i!==r.length){_js.Trace.logInfo(_c.$1p.$A,"Removing Folder {0} Conversation SyncState",n);Array.removeAt(r,i)}}}};_c.$1MF=function(n,t){_c.$1MF.initializeBase(this,[n,t])};_c.$1MF.prototype={get_$6jN:function(){return 0},$6W3:function(n){_a.$3.$9t(_bc.$IH.isInstanceOfType(n),"The context type should match the module.");var t=n;_a.$3.$K(t.FolderId,"Invalid call to IsSynced with no folder ID specified.");var i=this,r=this;this.$Qt.get_$c8().$3Wi(function(n){i.$9nS(t.FolderId.Id,n)},function(){})},$84u:function(n,t){_a.$3.$9t(_bc.$IH.isInstanceOfType(n),"The context type should match the module.");var u=n;_a.$3.$K(u.FolderId,"Invalid call to IsSynced with no folder ID specified.");var i=null;var r=this,f=this;this.$Qt.$30p(function(u){u?i=r.$84w(n,u):_js.Trace.logInfo(_c.$1p.$A,"Getting null SyncState for {0}",r.$3yw());t(i)},function(){t(i)})}};_c.$KK=function(n){this.$10U={};this.$1kr={};_a.$3.$85(n,1,50,"maxNotifications");this.$5rj=n;this.$2Ds=0};function $6vd(n,t,i){if(t===1){var f=n.$10U[i];if(f){n.$2Ds-=f.length;n.$1kr[i]=f;delete n.$10U[i]}}else if(t===3){var e=n.$1kr[i];if(e){for(var o;o=Array.dequeue(e);)n.$2cI&&n.$2cI(o,0);delete n.$1kr[i];e=null}}else if(t===6){var u=n.$1kr[i];if(u){_js.Trace.logWarning(_a.$0.$gw,"Discarding notifications due to abort event Notification id : {0}, Total Count: {1}",i,u.length);$3Zx(n,u,4);u=null;delete n.$1kr[i]}}else if(t===4){var r=n.$10U[i];if(r){_js.Trace.logWarning(_a.$0.$gw,"Discarding notifications due to canceled event Notification id : {0}, Total Count: {1}",i,r.length);n.$2Ds-=r.length;$3Zx(n,r,5);r=null;delete n.$10U[i]}}}function $3Zx(n,t,i){if(n.get_$6SO())for(var r;r=Array.dequeue(t);)n.get_$6SO()(r,i);else Array.clear(t)}function $4nh(n,t){var r=new(_0365f.$n.$$(_a.$fI));var u=t;for(var f in u){var e={key:f,value:u[f]};var i=e.value;if(i)while(i.length>0){var o=Array.dequeue(i);var s=new _a.$fI(e.key,o.EventType,!1);r.$D(s)}}return r}_c.$KK.prototype={$5rj:0,$2cI:null,$2Ds:0,get_$6SO:function(){return this.$2cI},$2xb:function(n,t){_a.$3.$1G(n,"id");_a.$3.$K(t,"notification");if(this.$2Ds<this.$5rj){this.$2Ds++;var i=this.$10U[n];if(!i){i=[];this.$10U[n]=i}Array.enqueue(i,t);return!0}_js.Trace.logWarning(_a.$0.$gw,"Max Notification Queue limit reached.");return!1},$7h1:function(){_js.Trace.logWarning(_a.$0.$gw,"Clear Sync Notification Queue");var t=this.$10U;for(var i in t){var r={key:i,value:t[i]};var n=this.$10U[r.key];if(n){$3Zx(this,n,2);delete this.$10U[r.key];n=null}}this.$2Ds=0},$9mY:function(n){_a.$3.$K(n,"postSyncCallback");this.$2cI=n},$AAs:function(){this.$2cI=null},$86g:function(){var n=_0365f.$5F.$3g(this.$10U);return $4nh(this,n)},$86f:function(){var n=_0365f.$5F.$3g(this.$1kr);return $4nh(this,n)},$9kK:function(n){_a.$3.$K(n,"e");if(!_js.$8.$a(n.$1jF)){_js.Trace.logInfo(_a.$0.$gw,"Processing sync event type: {0} for notification sync context id: {1}",n.$NV,n.$1jF);$6vd(this,n.$NV,n.$1jF)}}};_c.$1FU=function(n,t){_c.$1FU.initializeBase(this,[n,t,"CalendarItemNotification"])};_c.$1FU.prototype={$8Bo:function(n,t,i){var r=n;if($5(r.FolderId)){_js.Trace.logInfo(_a.$0.$5o,String.format("Rejecting CalendarItem notification with null FolderId : {0}",r.id));i(n);return}var u=new _c.$U9(r.FolderId,this.$4Y.get_$1Pe(),this.$3I);if(this.$4Y.$2fq(u,r.EventType==="Reload")){if($3a4(this,n,t.get_$38c())){_js.Trace.logInfo(_a.$0.$5o,String.format("CalendarItemNotification throttled id : {0}",r.FolderId));return}$2FC(this,r,u);return}i(r);this.$4Y.$11T(u)}};_c.$1Fe=function(n,t,i,r,u){this.$$d_$40A=Function.createDelegate(this,this.$40A);this.$$d_$9cf=Function.createDelegate(this,this.$9cf);this.$$d_$8CB=Function.createDelegate(this,this.$8CB);this.$$d_$8CR=Function.createDelegate(this,this.$8CR);this.$$d_$9XJ=Function.createDelegate(this,this.$9XJ);this.$$d_$409=Function.createDelegate(this,this.$409);this.$$d_$8Ai=Function.createDelegate(this,this.$8Ai);_c.$1Fe.resolveInheritance();this.dispose=this.$1R;_c.$1Fe.initializeBase(this);_a.$3.$K(n,"syncManager");_a.$3.$K(r,"dataPointTracker");this.$4Y=n;this.$J=t;this.$Bv=i;this.$2uz=r;this.$1fv=new _e.$l6(_a.$74.$E());this.$ER=u};_c.$1Fe.prototype={$4Y:null,$J:null,$Bv:null,$2uz:null,$ER:null,$1fv:null,$31n:!1,$A50:function(){if(!this.$31n){this.$J.$Hd(_h.$NX,this.$$d_$8Ai);this.$J.$Hd(_h.$Kg,this.$$d_$409);this.$J.$Hd(_a.$lt,this.$$d_$9XJ);this.$J.$Hd(_h.$Sb,this.$$d_$8CR);this.$J.$Hd(_h.$mR,this.$$d_$8CB);_c.$AF.add_$6Nm(this.$$d_$9cf);this.$ER.get_$1A2()||this.$J.$Hd(_h.$NG,this.$$d_$40A);this.$31n=!0}},$49:function(){if(this.$31n){this.$J.$11q(_h.$NX,this.$$d_$8Ai);this.$J.$11q(_h.$Kg,this.$$d_$409);this.$J.$11q(_a.$lt,this.$$d_$9XJ);this.$J.$11q(_h.$Sb,this.$$d_$8CR);this.$J.$11q(_h.$mR,this.$$d_$8CB);_c.$AF.remove_$6Nm(this.$$d_$9cf);this.$ER.get_$1A2()||this.$J.$11q(_h.$NG,this.$$d_$40A);this.$31n=!1}},$9cf:function(){this.$ER.get_$1A2()?this.$J.$11q(_h.$NG,this.$$d_$40A):this.$J.$Hd(_h.$NG,this.$$d_$40A)},$40A:function(n){_c.$23.$165("Receiving ViewFolderEvent");var t=n.$2Q;if(t&&t.get_$o()){var i=this;this.$ER.$9jx(t,function(n){n&&i.$4Y.$6i2(t.get_$o().Id)})}},$8Ai:function(n){n.$5HH?this.$1fv.$3hB(n.$4ee,this.$4Y.get_$19J()):this.$1fv.$3hB(n.$4ee,"")},$409:function(n){var t=new _h.$1HA;t.set_$1aK(this.$Bv.$QD);this.$2uz.$AP(t);this.$4Y.$A4C()},$9XJ:function(n){_c.$23.$5T("OnPauseResumeSyncEvent, PauseEvent: {0}",n.$2Sf);if(n.$2Sf){if(_h.$5J.$2a){_c.$23.$ns("Stopping sync manager on version mismatch error");var t=this;this.$4Y.$1Ji(function(){_c.$23.$5T("Successfully stopped sync manager on version mismatch error")})}}else{_c.$23.$5T("Enable sync and start full sync");this.$4Y.$7vM()}},$8CR:function(n){_c.$23.$5T("Receiving StartFullSyncEvent");this.$4Y.$1WD(n.$19R)},$8CB:function(n){_c.$23.$165("Receiving StartFullSyncEvent");this.$4Y.$6W3(n.$A5,n.$d)}};_c.$13s=function(n,t){_c.$13s.initializeBase(this,[3,0,n,t])};_c.$13s.prototype={get_$1y:function(){return"CalendarFoldersModule"},$4bC:function(n){return n.$9zN()}};_c.$NY=function(n,t,i){_c.$NY.initializeBase(this,[4,0,!1,t]);_a.$3.$K(i,"postCleanup");this.$1Mf=n;this.$6SH=i};_c.$NY.prototype={$1Mf:0,$6SH:null,get_$1y:function(){return"CleanupSyncContextId"},$4bC:function(n){return n.$9yi(this.$1Mf)},$9YT:function(n){this.$6SH(n)}};_c.$1C2=function(n){_c.$1C2.initializeBase(this,[3,0,!0,n])};_c.$1C2.prototype={$4bC:function(n){return n.$9zQ()}};_c.$16V=function(){_c.$16V.initializeBase(this,[1,"Core.Models.Sync.FolderActiveSyncingAgain"])};_c.$16V.prototype={get_$9KE:function(){return this.$W("NDBLACA")},set_$9KE:function(n){$1I(this,"NDBLACA",n);return n}};_c.$16g=function(n,t){_a.$3.$85(n,0,Number.MAX_VALUE,"Interval");_a.$3.$85(t,2,Number.MAX_VALUE,"maxTimes");this.$BL=n;this.$4Bh=t;this.$29a=[]};_c.$16g.prototype={$BL:0,$4Bh:0,$29a:null,$3UC:0,$ADJ:function(n){_a.$3.$85(n,1,Number.MAX_VALUE,"actionTimeInUtcMinutes");if(this.$3UC)if(this.$29a.length<this.$4Bh-1)Array.enqueue(this.$29a,n);else{this.$3UC=Array.dequeue(this.$29a);Array.enqueue(this.$29a,n)}else this.$3UC=n},$8IU:function(n){return this.$29a.length<this.$4Bh-1?!0:n-this.$3UC>=this.$BL}};_c.$ps=function(n,t){_c.$ps.initializeBase(this,[1,t,!0,n])};_c.$ps.prototype={get_$7qT:function(){return!1},get_$45P:function(){return!0},$4bC:function(n){return n.$9zO(this.$19R)}};_c.$U9=function(n,t,i){_c.$U9.initializeBase(this,[3,14,n,t,i])};_c.$U9.prototype={$4bC:function(n){return n.$9zP(this.$2k)}};_c.$1DM=function(n,t){_c.$1DM.initializeBase(this,[3,0,n,t])};_c.$1DM.prototype={get_$1y:function(){return"RemindersModule"},$4bC:function(n){return n.$9zU()}};_c.$hM=function(n,t,i){this.$$d_$5J7=Function.createDelegate(this,this.$5J7);_c.$hM.initializeBase(this,[n,t,i]);$11y(this,this.$$d_$5J7,"ConfirmSyncCompleted")};function $6vn(n){return new _e.$o9(n.$Ce.get_$AU().get_$1Lx(),n.$Ce.get_$AU().get_$42j())}function $6vm(n,t,i){if(n.get_$3Hl().$5i(n.get_$3Hl().get_$1r())&&n.get_$3Hl().get_$4Rf().$46Z(n.get_$5c())&&!n.get_$5HP().get_$8KO()){var r=this;n.get_$5HP().$7gh(n.get_$3Hl(),t,function(n){i&&i(n)})}else t()}_c.$hM.prototype={get_$Ru:function(){return 14},get_$3Hl:function(){return this.$BD.$3I.$c},get_$5HP:function(){return this.$BD.$3I.$5DG},get_$5c:function(){return this.$BD.$3I.get_$5c()},$6hx:function(n,t){$1AJ(this,"Starting cleanup");var i=this,r=this;this.$Ce.$cV(this.$BD.$1Mf,$6vn(this),function(){$6vm(i,n,t)},function(n){$SV(r,"Module cleanup failed with error: "+n.get_$4y());var i=Error.create(n.get_$4y());t(i)})},$5J7:function(){this.$1no()}};_c.$11k=function(n,t){_c.$11k.initializeBase(this,[n,t])};_c.$11k.prototype={get_$6jN:function(){return 0},$7oK:function(n,t,i){_a.$3.$K(i,"completeCallback");if(!_c.$NY.isInstanceOfType(n))throw Error.argumentType("only CleanupSyncContext is supported by the SyncAttachmentModule");var r=new _c.$hM(n,t,this.$Qt);i([r])},$9zP:function(n){return!1},$9zO:function(n){return!1},$9zT:function(){return!1},$9zV:function(n){return!1},$3mH:function(n,t){return!0},$3yw:function(){return"AttachmentsStateId"}};_c.$1FQ=function(){this.$$d_$9Rc=Function.createDelegate(this,this.$9Rc);_c.$1FQ.initializeBase(this,[null])};_c.$1FQ.prototype={$5gb:function(n){n.$1xF(null,this.$$d_$9Rc,this.$$d_$9e1)},$9Rc:function(n,t){t.WasSuccessful?this.$AJb(n,t):this.$9e1(Error.create(_h.$NS.$3xC(t.ErrorCode)))}};_c.$1FR=function(n,t,i){this.$$d_$4ak=Function.createDelegate(this,this.$4ak);this.$$d_$3Rh=Function.createDelegate(this,this.$3Rh);_c.$1FR.initializeBase(this,[n,t,i])};_c.$1FR.prototype={get_$Ru:function(){return 9},$7gU:function(n){return!0},$7n3:function(){return new SyncState("CalendarFoldersSyncStateId","")},$7oF:function(n){n(new _c.$1FQ)},$8Hg:function(){return new(_e.$NB.$$(_g.$K1))(this.get_$AIO(),this.$$d_$3Rh)},$7ke:function(){return new _e.$p1(this.$$d_$4ak)},$3Rh:function(n,t){var i=new _e.$AE(this.$Ce.get_$AU());var r=this;i.$9v3(t,n,function(){})},$4ak:function(n){_e.$AE.$7qb(n);this.$Ce.get_$AU().get_$pd().$II(n,_e.$1l.$5h("CalendarFoldersSyncStateId"))}};_c.$1FS=function(n,t){_c.$1FS.initializeBase(this,[n,t])};_c.$1FS.prototype={get_$6jN:function(){return 2},$7oK:function(n,t,i){i([new _c.$1FR(n,t,this.$Qt)])},$9zP:function(n){return!1},$9yj:function(){return!0},$9zN:function(){return!0},$3yw:function(){return"CalendarFoldersSyncStateId"}};_c.$1FT=function(n,t){this.$$d_$9Wg=Function.createDelegate(this,this.$9Wg);_c.$1FT.initializeBase(this,[n,t,"CalendarFoldersNotification"]);t.$J.$Hd(_h.$fJ,this.$$d_$9Wg)};_c.$1FT.prototype={$8Bo:function(n,t,i){_js.Trace.logError(_a.$0.$5o,String.format("Receiving unexpected CalendarFolders offline notification. Id: {0}",n.id||""));i(n)},$9Wg:function(n){var i=new _e.$UR(this.$3I.get_$5c(),_e.$1n.$7s);var r=new _e.$nJ(i.get_$pd(),"CalendarFoldersSyncStateId");_js.Trace.logInfo(_a.$0.$5o,"Processing (client-only) CalendarFolders notification.");var t=this;r.$AAH(!1,function(){_js.Trace.logInfo(_a.$0.$5o,"Successfully set isSynced to false for CalendarFolders table. Starting notification based sync.");var n=new _c.$13s(t.$4Y.get_$1Pe(),t.$3I);t.$4Y.$11T(n)})}};_c.$1FV=function(n){_c.$1FV.initializeBase(this,[n])};_c.$1FV.prototype={get_$A8p:function(){return this.$W("rmi")},set_$A8p:function(n){$1I(this,"rmi",n);return n},get_$A8q:function(){return this.$W("rmwi")},set_$A8q:function(n){$1I(this,"rmwi",n);return n},get_$A60:function(){return this.$W("sws")},set_$A60:function(n){$1I(this,"sws",n);return n},get_$A5z:function(){return this.$W("swe")},set_$A5z:function(n){$1I(this,"swe",n);return n},get_$A5i:function(){return this.$W("sf")},set_$A5i:function(n){$1I(this,"sf",n);return n},get_$7b2:function(){return this.$W("aws")},set_$7b2:function(n){$1I(this,"aws",n);return n},get_$AAE:function(){return this.$W("ttiw")},set_$AAE:function(n){$1I(this,"ttiw",n);return n}};_c.$1FZ=function(n,t,i,r){_c.$1FZ.initializeBase(this,[n,t,i,r])};_c.$1FZ.prototype={get_$Ru:function(){return 16},$9zL:function(){return this.get_$1tu().length>0}};_c.$1Fa=function(n,t,i,r){_c.$1Fa.initializeBase(this,[n,t,i,r])};_c.$1Fa.prototype={get_$Ru:function(){return 15},$9z3:function(n){return this.$BD.$MA!==3&&!n},$9zL:function(){var n=this.get_$1tu().length>0&&this.get_$4gm()<_h.$26.$1WT;$1AJ(this,"Should Sync changes from sever = "+n);return n}};_c.$1Fb=function(n){_c.$1Fb.initializeBase(this,[n])};_c.$1Fb.prototype={get_$7jF:function(){return this.$W("cis")},set_$7jF:function(n){$1I(this,"cis",n);return n},get_$8PT:function(){return this.$W("ciips")},set_$8PT:function(n){$1I(this,"ciips",n);return n}};_c.$11n=function(n,t,i){this.$$d_$4iS=Function.createDelegate(this,this.$4iS);_c.$11n.initializeBase(this,[n,t,i]);$11y(this,this.$$d_$4iS,"UpdateReadFlagDirtyConversations");$11y(this,this.$$d_$1no,"SyncCompleted")};_c.$11n.prototype={get_$Ru:function(){return 19},get_$9z6:function(){return!1},get_$1jF:function(){return""},$5ld:function(){return!0},$6hx:function(n,t){n()},$4iS:function(){$B3(this,"Updating conversation items read flags");var n=this.$Ce.get_$AU().get_$Jl();var i=this.$Ce.get_$AU().get_$4y();var r=this.$Ce.get_$AU().get_$Hi();var f=this,u=this,t=this;n.$Bl(new _a.$6i("SyncConversationItemsReadFlagModule.UpdateReadFlagDirtyConversations"),function(t){n.$4iS(t,r,i)},function(){u.$hb()},function(n){$1Kt(t,"Failed to update read flags",n.$3j);t.$1jR(Error.create(n.$3j))})}};function ExternalSyncDependencies(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){_a.$3.$K(n,"offlineMailboxDataContext");_a.$3.$K(t,"localStorageAdapter");_a.$3.$K(i,"offlineUserSettings");_a.$3.$K(r,"syncFolderSettingProcessor");_a.$3.$K(u,"nativeBridge");_a.$3.$K(f,"attachmentsCleanupManager");_a.$3.$K(e,"datapointTracker");_a.$3.$K(o,"offlineNotificationHandler");_a.$3.$K(s,"userAgent");_a.$3.$1G(h,"userCulture");_a.$3.$K(l,"taskRunner");_a.$3.$K(a,"eventAggregator");_a.$3.$K(v,"syncController");_a.$3.$K(y,"uiModuleService");_a.$3.$K(p,"featureManager");_a.$3.$K(w,"pageDataPayloadManager");this.$7R=n;this.$4q=t;this.$F6=i;this.$ER=r;this.$c=u;this.$5DG=f;this.$13O=e;this.$17W=o;this.$1A=s;this.$FB=h;this.$8x=c;this.$44=l;this.$J=a;this.$2D5=v;this.$vW=y;this.$4U=p;this.$kp=w;var b=this;this.$J.$Hd(_h.$NG,function(n){var t=n.$2Q;t&&(b.$ao=t.get_$o())})}ExternalSyncDependencies.prototype={$2D5:null,$4q:null,$F6:null,$ER:null,$c:null,$5DG:null,$13O:null,$17W:null,$1A:null,$FB:null,$ao:null,$44:null,$J:null,$7R:null,$vW:null,$8x:0,$4U:null,$kp:null,get_$1Bn:function(){return this.$7R.get_$1Bn()},get_$Zt:function(){return this.$7R.get_$Zt()},get_$5c:function(){return this.$7R.get_$5c()},get_$3Xp:function(){return this.$7R.get_$E6()},get_$15G:function(){if(!this.$ao)if(_g.$h.$1i)this.$ao=_g.$h.$1i.nameToId("inbox");else throw Error.invalidOperation("Trying access ExternalSyncDependencies.InViewFolderId before FolderMappings is initialized. That should not happen.");return this.$ao},set_$15G:function(n){this.$ao=n;return n},$6d4:function(n,t,i){this.$7R.$6d4(n,t,i)}};_c.$1Ff=function(){_c.$1Ff.initializeBase(this,[null])};_c.$1Ff.prototype={$5gb:function(n){var t=new _g.$xJ(this.$2C);n.$2OJ(t,this.$$d_$AJb,this.$$d_$9e1)}};_c.$1Fg=function(n,t,i){this.$$d_$4ak=Function.createDelegate(this,this.$4ak);this.$$d_$3Rh=Function.createDelegate(this,this.$3Rh);_c.$1Fg.initializeBase(this,[n,t,i])};_c.$1Fg.prototype={get_$Ru:function(){return 6},$7gU:function(n){return!0},$7n3:function(){return new SyncState("FavoriteFoldersSyncStateId","")},$7oF:function(n){n(new _c.$1Ff)},$8Hg:function(){return new(_e.$NB.$$(_g.$Pg))(this.get_$AIO(),this.$$d_$3Rh)},$7ke:function(){return new _e.$p1(this.$$d_$4ak)},$3Rh:function(n,t){var i=new _e.$AE(this.$Ce.get_$AU());var r=this;i.$9vX(t,n,function(){})},$4ak:function(n){_e.$AE.$7qq(n)}};_c.$1Fh=function(n,t){_c.$1Fh.initializeBase(this,[n,t])};_c.$1Fh.prototype={get_$6jN:function(){return 2},$7oK:function(n,t,i){i([new _c.$1Fg(n,t,this.$Qt)])},$9zP:function(n){return!1},$3yw:function(){return"FavoriteFoldersSyncStateId"}};_c.$AF=function(n,t){_a.$3.$K(n,"localStorageAdapter");_a.$3.$K(t,"eventAggregator");this.$4q=n;this.$J=t;$4np(this)};_c.$AF.add_$6Nm=function(n){_c.$AF.$7ZM(n)};_c.$AF.remove_$6Nm=function(n){_c.$AF.$6WH(n)};_c.$AF.$8IO=function(){var n=_c.$AF.$3Xj.getHandler("UserSelected");$5(n)||n()};_c.$AF.$7ZM=function(n){_c.$AF.$3Xj.addHandler("UserSelected",n)};_c.$AF.$6WH=function(n){_c.$AF.$3Xj.removeHandler("UserSelected",n)};function $6vw(n){n.$nt.$3Oa();$4np(n)}function $4np(n){n.$nt=n.get_$1A2()?new _c.$12S(n.$4q,n.$J):new _c.$HL(n.$4q,n.$J)}_c.$AF.prototype={$4q:null,$J:null,$nt:null,get_$1A2:function(){return this.$4q.$3f("SyncFolders.UserSelected")==="true".toLowerCase()},set_$1A2:function(n){var t=this.$4q.$3f("SyncFolders.UserSelected")==="true".toLowerCase();this.$4q.$DQ("SyncFolders.UserSelected",n.toString().toLowerCase());if(n!==t){$6vw(this);_c.$AF.$8IO()}return n},get_$5qV:function(){return this.$nt},$5kC:function(n){_a.$3.$K(n,"folder");if(n.$9Y||!_g.$8b.isInstanceOfType(n)||_h.$8s.$av(n.get_$o())||n.get_$Ea()||n.get_$47S()){_js.Trace.logInfo(_c.$AF.$ML,"{0} is not syncable because it is not mail folder or is an archive/public/shared/search folder",n.get_$o().Id);return!1}else return _h.$26.$A5N(n)},$9jx:function(n,t){_a.$3.$K(n,"folder");_a.$3.$K(t,"onCompletedCallback");if(_c.$12S.isInstanceOfType(this.$nt)){t(!1);return}if(n.$1nr===2){t(!1);return}var i=this.$nt;if(n.$1nr)i.$ACW(n,t);else{if(!this.$5kC(n)){t(!1);return}var r=this,u=this;i.$7YB(n.get_$o().Id,function(){n.set_$6jR(1);t(!0);i.$4Aa("",_a.$g.$8n)},function(i){_js.Trace.logWarning(_c.$AF.$ML,"We failed to add {0} into sync list",n.get_$o().Id);t(!1)})}},$1eN:function(n,t){_a.$3.$1G(t,"folderId");var i=!1;switch(n){case 11:case 4:case 12:case 5:var r;var u,f;var e=(f=this.$nt.$818(null,n,u={val:r}),r=u.val,f);i=Array.contains(e,t);break;default:break}return i},$8Kk:function(n,t){_a.$3.$1G(t,"folderId");var i=this.$nt.$88P(n);return Array.contains(i,t)},$453:function(n){_a.$3.$K(n,"folderId");return this.$1eN(12,n)},$5pz:function(n,t,i){this.$nt.$5pz(n,t,i)},$6cu:function(n){if(_c.$HL.isInstanceOfType(this.$nt)){var t=this.$nt;t.$6cu(n)}},$2Oj:function(n,t,i){this.$nt.$2Oj(n,t,i)},$6or:function(n,t,i){this.$nt.$6or(n,t,i)}};_c.$Qd=function(n,t,i){this.$1C9=[];this.$9g=[];_c.$Qd.$$(this.$$gta["_c.$Qd"].TSyncAction,this.$$gta["_c.$Qd"].TSyncResponse,this.$$gta["_c.$Qd"].TSyncResponseType).initializeBase(this,[n,t,i]);this.$z9=-1};_c.$Qd.$$=function(n,t,i){var r="$Qd"+"$3"+"$"+n.getName().replace(/\./g,"_")+"$"+t.getName().replace(/\./g,"_")+"$"+i.getName().replace(/\./g,"_");if(!_c[r]){var u=_c[r]=function(){(this.$$gta=this.$$gta||{})["_c.$Qd"]={TSyncAction:n,TSyncResponse:t,TSyncResponseType:i};for(var u=[],r=0;r<arguments.length;++r)u[r]=arguments[r];_c.$Qd.apply(this,u)};u.registerClass("_c."+r,_c.$JX.$$(n,t));var e=_c.$Qd.prototype;for(var o in e){var f={key:o,value:e[o]};"constructor"!==f.key&&(u.prototype[f.key]=f.value)}u.$4gg=1048576;u.$A8d=10}return _c[r]};_c.$Qd.prototype={$6ky:0,$5n8:null,$z9:0,get_$AIy:function(){return this.$1C9},get_$1P:function(){return this.$9g},get_$AIz:function(){return this.$6ky},set_$AIz:function(n){this.$6ky=n;return n},get_$AJ0:function(){return this.get_$J4().$6L},get_$AJ1:function(){return this.$5n8},set_$AJ1:function(n){this.$5n8=n;return n},get_$8Hq:function(){return this.$BD.get_$45P()},get_$k8:function(){if(this.$z9===-1){var n=this.$3I.$4q.$3f("MaxSyncModuleType");this.$z9=_js.$8.$a(n)?_c.$1p.$1wc:parseInt(n)}return this.$z9},$5ld:function(){return!0},$7gU:function(n){return!1},$9pe:function(){this.$1C9=[];this.$9g=[];_c.$JX.prototype.$9pe.call(this)},$AJ2:function(n,t){for(var r=[],i=0;i<n.length;i++)$5(t[n[i].Id])&&Array.add(r,n[i].Id);r.length>0&&_js.Trace.logWarning(_c.$1p.$A,"Following items were not synced due to servers errors. This warning message is there to help troubleshoot such errors. ItemIds = '{0}'",r.join(", "))},$AJ3:function(n){if(n&&n.length>0&&14<=this.get_$k8()){$1AJ(this,"Processing attachments to sync");for(var o=n,h=o.length,f=0;f<h;++f){var t=o[f];if(t.Attachments){for(var r=0,u=0,s=t.Attachments,c=s.length,e=0;e<c;++e){var i=s[e];if(this.$7gI(i)){if(r+i.Size>_c.$Qd.$$(this.$$gta["_c.$Qd"].TSyncAction,this.$$gta["_c.$Qd"].TSyncResponse,this.$$gta["_c.$Qd"].TSyncResponseType).$4gg||u+1>10){$B3(this,String.format("Threshold to sync attachments for item : {0} has reached. Size: {1}, Total attachments: {2}",t.ItemId.Id,r,u));break}r+=i.Size;++u;var l=_e.$50.$7kK(i,t.ItemId.Id,t.DateTimeReceived,!1,!0);$1AJ(this,String.format("Adding Attachmend id: {0} to sync list",i.AttachmentId.Id));Array.add(this.$9g,l)}}$1AJ(this,String.format("MessageItem: {0} has {1} inline attachments, total size: {2} to sync",t.ItemId.Id,u,r))}}}}};_c.$u0=function(n,t,i,r){this.$2ou=new Array(0);_c.$u0.$$(this.$$gta["_c.$u0"].TSyncAction,this.$$gta["_c.$u0"].TSyncResponseMessage,this.$$gta["_c.$u0"].TSyncResponseType).initializeBase(this,[n,i,r]);_a.$3.$K(t,"foldersToSync");this.$1DC=t};_c.$u0.$$=function(n,t,i){var r="$u0"+"$3"+"$"+n.getName().replace(/\./g,"_")+"$"+t.getName().replace(/\./g,"_")+"$"+i.getName().replace(/\./g,"_");if(!_c[r]){var f=_c[r]=function(){(this.$$gta=this.$$gta||{})["_c.$u0"]={TSyncAction:n,TSyncResponseMessage:t,TSyncResponseType:i};for(var u=[],r=0;r<arguments.length;++r)u[r]=arguments[r];_c.$u0.apply(this,u)};f.registerClass("_c."+r,_c.$JX.$$(n,t));var e=_c.$u0.prototype;for(var o in e){var u={key:o,value:e[o]};"constructor"!==u.key&&(f.prototype[u.key]=u.value)}}return _c[r]};_c.$u0.prototype={$1DC:null,$2iP:0,$4gn:0,$2Kn:null,$5U4:!1,get_$xe:function(){return this.$1DC},set_$xe:function(n){this.$1DC=n;return n},get_$AJ4:function(){return this.$2ou},get_$AJ5:function(){return this.$2Kn},set_$AJ5:function(n){this.$2Kn=n;return n},get_$AJ6:function(){return this.$2iP},set_$AJ6:function(n){this.$2iP=n;return n},get_$AJ7:function(){return this.$4gn},set_$AJ7:function(n){this.$4gn=n;return n},get_$8KX:function(){return this.get_$8OV()},get_$8Hq:function(){return this.$BD.get_$45P()},get_$9z7:function(){return!1},$82L:function(){return 11},$80w:function(n){if(!n&&this.$2Kn.get_$AGf().length>0&&(!this.$5U4||this.get_$8KX())&&(this.$BD.$1x9||!this.$2Ek)){$B3(this,"Raising Hierarchy notification for mail synced folders");this.$3I.$kp.set_$8RF(!0);if(_a.$T.get_$15j()){_a.$T.set_$6jS(_a.$T.get_$MO());_a.$T.$3YE=this.$6l1;_a.$T.$1K9=this.$1K9;_a.$T.$1KA=this.$1KA;_a.$T.$1lf=this.$1lf;this.$1lf=0;if(this.$3I.$vW.get_$2Gk()){_a.$T.$3WG();_a.$T.$3Uw=!0;_a.$T.$2D8=2}else _a.$T.$2D8=1}var t=_a.$6.acss(_a.$0.$QX,"GenerateSyncNotificationForChanges_"+this.get_$HS());this.get_$AIQ().$2zR(this.$2Kn.get_$AGf());_a.$6.aces(t);this.$5U4=!0;_a.$T.$2hp++}else{$B3(this,"No changes received hence not raising Hierarchy notification for mail synced folders");var i=_a.$6.acss(_a.$0.$QX,"NoSyncNotificationForChanges_"+this.get_$HS()+"_"+_a.$ze.toString(n));_a.$6.$19(null,"ALT3.1");_a.$6.endPT("ALT3.1s");if(!_a.$T.$2hp&&n!==1&&_a.$T.get_$15j()){_a.$T.set_$6jS(_a.$T.get_$MO());_a.$T.$3WG();_a.$T.$3IP=!0;_a.$T.$2D8=3}_a.$6.aces(i)}_c.$JX.prototype.$80w.call(this,n)},$80v:function(n){if(n===2||n===1){$B3(this,"Raising Hierarchy notification for mail all folders");this.get_$AIQ().$2zR(this.$1DC)}_c.$JX.prototype.$80v.call(this,n)},$7oM:function(n,t){return _a.$Se.$E(n,this.get_$Ru(),this.$3WL,this.get_$1y(),this.get_$1jF(),this.$35G,this.$1DC,this.$2ou,t)},$ABp:function(){var n=this.get_$TN();n.$5Ur(this.$2ou);n.set_$5nM(this.$2iP);_c.$23.$5T(this.get_$HS()+" module data point: Synced "+this.$2iP+" messages, ")},$7mt:function(){return new _c.$1Fd(this.get_$Ru())},$9pe:function(){this.$2Kn=null;_c.$JX.prototype.$9pe.call(this)},$5bk:function(n){_c.$JX.prototype.$5bk.call(this,n)},$5bj:function(n){_c.$JX.prototype.$5bj.call(this,n)},$9MN:function(){if(this.get_$J4().IsSynced&&this.$9lT()){$SV(this,"Reaching max sync limit PostALT1, will revert to ALT1 sync");var n=new _h.$1B0;n.set_$HS(this.get_$HS());this.$3I.$13O.$AP(n);this.$3I.$J.$9lH(_h.$NX,new _h.$NX(11,!1));this.$3I.$J.$9lH(_h.$Sb,new _h.$Sb(11));this.$1jR(Error.create("Sync aborts since reaching the max sync limit PostALT1"))}else _c.$JX.prototype.$9MN.call(this)},$9lT:function(){return this.$4gn+this.$2iP>=_h.$26.$k7*_h.$26.$1Jq*2}};_c.$u1=function(){this.$2Nf=[];this.$48j=[];this.$1fU=[]};_c.$u1.$$=function(n){var t="$u1"+"$1"+"$"+n.getName().replace(/\./g,"_");if(!_c[t]){var r=_c[t]=function(){(this.$$gta=this.$$gta||{})["_c.$u1"]={TServiceObjectType:n};for(var i=[],t=0;t<arguments.length;++t)i[t]=arguments[t];_c.$u1.apply(this,i)};r.registerClass("_c."+t);var u=_c.$u1.prototype;for(var f in u){var i={key:f,value:u[f]};"constructor"!==i.key&&(r.prototype[i.key]=i.value)}}return _c[t]};_c.$u1.prototype={get_$AGc:function(){return null},get_$AGd:function(){return this.$48j},set_$AGd:function(n){this.$48j=n;return n},get_$AGe:function(){return this.$1fU},set_$AGe:function(n){this.$1fU=n;return n},get_$AGf:function(){return this.$2Nf},set_$AGf:function(n){this.$2Nf=n;return n},$AGg:function(n){Array.contains(this.$2Nf,n)||Array.add(this.$2Nf,n)}};_c.$u2=function(n,t,i){_c.$u2.initializeBase(this,[t,i,"HierarchyNotification"]);_a.$3.$K(n,"clientStore");this.$7b=n};function $6vx(n,t){var i=new _e.$ck(n.$7b,n.$3I.get_$3Xp());var r=this,u=this,f=this;i.$Bl(new _a.$6i("SyncHierarchyNotificationStrategy.UpdateClientStoreFolderCounts",!1),function(n){i.$ACA(n,new _g.$3R(t.folderId),t.itemCount,t.unreadCount)},function(){},function(n){_js.Trace.logWarning(_a.$0.$5o,"Failed to update counts for folder id={0}, Error={1}",t.folderId,n.$3j)})}_c.$u2.prototype={$7b:null,$8Bo:function(n,t,i){var r=n;if($5(r.folderId)){if(r.EventType==="Reload"){_js.Trace.logInfo(_a.$0.$5o,"Received reload hierarchy notificaiton, start full sync");t.set_$38c(this.get_$6on());this.$4Y.$1WD(5)}r.pendingGetGenerated||i(r)}else if(r.folderId!==_g.$h.$1i.nameToId("outbox").Id){$6vx(this,r);if(t.get_$5ah()[r.folderId]&&r.EventType!=="Reload"){i(r);return}var u=new _c.$U9(r.folderId,this.$4Y.get_$1Pe(),this.$3I);if(this.$4Y.$2fq(u,r.EventType==="Reload"||this.$3I.$17W.get_$5iE())){$2FC(this,r,u);return}i(r);this.$4Y.$11T(u)}}};_c.$1Fq=function(n,t,i,r){_c.$1Fq.initializeBase(this,[t]);_a.$3.$1G(n,"folderToSync");_a.$3.$K(t,"syncState");_a.$3.$85(i,1,100,"maxChangesReturned");this.$5Us=new _g.$CI(new _g.$3R(n));this.$3AB=i;this.$2wo=r};_c.$1Fq.prototype={$5Us:null,$3AB:0,$2wo:!1,$5gb:function(n){var t=new _g.$ha(null,this.$5Us,this.$3AB);t.ShapeName="MailListItem";t.SyncState=this.get_$pd().State;t.NumberOfDays=_h.$26.$2DB;t.MinimumCount=_h.$26.$19Q;t.MaximumCount=_h.$26.$1Jq;t.DoQuickSync=this.$2wo;t.ItemShape=new _g.$DV("IdOnly");t.ItemShape.InferenceEnabled=_g.$V.get_$I().get_$5z().get_$Ta();var i=new _g.$hY(this.get_$70(),t);var r=new _g.$1Fm(this.$2C);n.$6jM(i,r,this.$$d_$AJb,this.$$d_$9e1)}};_c.$11t=function(n,t,i){_c.$11t.initializeBase(this,[n,t]);this.$1H=i};_c.$11t.prototype={$1H:null,$9zP:function(n){return this.$3I.$ER.$1eN(12,n)},$9zM:function(n){return this.$3I.$ER.$1eN(12,n)},$7oK:function(n,t,i){var r=this;this.$3I.$ER.$2Oj(12,this.$3I.get_$15G(),function(u){var f=null;if(_c.$NY.isInstanceOfType(n)||u.length){_c.$U9.isInstanceOfType(n)&&(u=[n.$2k]);f=[new _c.$1Fr(n,u,t,r.$Qt),new _c.$1Fs(n,t,new _e.$zK(r.get_$5c(),_h.$26.$1Qo),r.$1H)]}i(f)})}};_c.$1Fs=function(n,t,i,r){_c.$1Fs.initializeBase(this,[n,t,i,r])};_c.$1Fs.prototype={get_$Ru:function(){return 18},$9zL:function(){return this.get_$AJ0().length>0}};_c.$1Ft=function(n,t,i,r){_c.$1Ft.initializeBase(this,[n,t,i,r])};_c.$1Ft.prototype={get_$Ru:function(){return 17},$9z3:function(n){return this.$BD.$MA!==3&&!n},$9zL:function(){var n=this.get_$AJ0().length>0&&this.get_$AIz()<_h.$26.$1WT;$1AJ(this,"Should Sync changes from sever = "+n);return n}};_c.$JW=function(n,t,i,r){_c.$JW.initializeBase(this,[n,t,i]);var u=this;_c.$JW.$3tH=new(_0365f.$4C.$$(_g.$DV))(function(){return _h.$v.$5XM(r.get_$Bk())});var f=this;_c.$JW.$4N3=new(_0365f.$4C.$$(_g.$DV))(function(){return _h.$v.get_$48f()})};function $6wC(n){for(var i=Math.min(_h.$26.$1Qo,n.get_$AJ0().length),r=new Array(i),t=0;t<i;t++){var u=new _g.$1t(n.get_$AJ0()[t].Id);r[t]=u}return r}_c.$JW.prototype={$7oF:function(n){var t=$6wC(this);_c.$23.$5T("Creating SyncItems action for {0} items",t.length);n(new _c.$hd(this.get_$Ru(),t,this.get_$J4().$49u?_c.$JW.$3tH.get_$1n():_c.$JW.$4N3.get_$1n(),this.get_$J4().$49u?"EditableItems":"ItemNormalizedBody"))},$7ke:function(){return null},$8Hg:function(){return new _e.$1BH(this.$Ce.get_$AU().get_$4y(),this.$Ce.get_$AU().get_$1Lx(),this.get_$AIy(),this.get_$1P(),[])},$9js:function(n){$B3(this,"Process current SyncItems response");var f={};this.set_$AJ1([]);for(var u=!1,t=0;t<this.get_$AIO().length;t++){var i=this.get_$AIO()[t];if(i.ResponseClass!=="Success"){var e=this.get_$AJ0()[t];_js.Trace.logWarning(_c.$1p.$A,"Error [{0}:{1}:{2}] while syncing item id {3}, SyncContext = {4}",i.ResponseClass,i.ResponseCode,i.MessageText||"",e.Id,this.$BD.get_$1y());i.ResponseCode!=="ErrorItemNotFound"&&(u=!0);Array.add(this.get_$AJ1(),e);continue}var r=this.get_$AIO()[t].Items;if(r&&r.length>0){_js.Trace.logInfo(_c.$1p.$A,"Setting item IsDataSynced flag to true");_e.$By.$2fN(r[0],CustomSyncData.$1uW,2);Array.add(this.get_$AIy(),r[0]);f[r[0].ItemId.Id]=!0;this.set_$AIz(this.get_$AIz()+1)}else u=!0}u&&this.$AJ2(this.get_$AJ0(),f);this.$AJ3(this.get_$AIy());_c.$JX.prototype.$9js.call(this,n)},$7n3:function(){return new MessageItemSyncState(this.get_$AJ1(),null,!1)},$7mt:function(){return new _c.$1Fu(this.get_$Ru())},$ABp:function(){var n=this.get_$TN();n.set_$5nM(this.get_$AIz());_c.$23.$5T(this.get_$HS()+" module data point: Synced "+this.get_$AIz()+" items")},$7gI:function(n){return n?n.IsInlineToNormalBody:!1}};_c.$1Fr=function(n,t,i,r){_c.$1Fr.initializeBase(this,[n,t,i,r])};_c.$1Fr.prototype={get_$Ru:function(){return 12}};_c.$1Fu=function(n){_c.$1Fu.initializeBase(this,[n])};_c.$1Fu.prototype={get_$5nM:function(){return this.$W("miis")},set_$5nM:function(n){$1I(this,"miis",n);return n}};_c.$1Fv=function(n,t,i,r){_c.$1Fv.initializeBase(this,[n,[t],i,r])};_c.$1Fv.prototype={get_$Ru:function(){return 5},$9z3:function(n){return this.$BD.$MA!==3&&!n},$7gU:function(n){return!0}};_c.$11u=function(n,t,i){_c.$11u.initializeBase(this,[n||new _e.$zS(t.get_$5c(),"MessageSyncStateId"),t]);this.$1H=i};_c.$11u.prototype={$1H:null,$7oK:function(n,t,i){var r=this;this.$3I.$ER.$2Oj(5,this.$3I.get_$15G(),function(u){_a.$3.$9t(!_c.$U9.isInstanceOfType(n),"sync message minimum module factory should not be invoked on notification based sync");var f=null;(_c.$NY.isInstanceOfType(n)||u.length)&&(f=[new _c.$1Fv(n,u[0],t,r.$Qt),new _c.$1Ft(n,t,new _e.$zK(r.get_$5c(),_h.$26.$1Qo),r.$1H)]);i(f)})},$9zP:function(n){return!1},$9zR:function(){var n=this.$3I.get_$15G().Id;return this.$3I.$ER.$453(n)}};_c.$Zb=function(n,t,i,r){_c.$Zb.initializeBase(this,[n,t,i,r])};function $6wD(n,t,i,r){var u=i.PerFolderSyncStateContainer[t];u||(u=n.get_$c8().$5XO(t));u.State=r.get_$pd();u.IsSynced=i.IsSynced;u.LastSuccessfulSyncTime=_a.$7.$Ex(_a.$7.get_$2F());u.LastAttemptedSyncTime=u.LastSuccessfulSyncTime;u.ModuleSpecificContext=new MessageSyncStateContext(r.get_$9I5(),r.get_$9Ks(),_h.$26.$19Q,_h.$26.$1Jq,r.get_$Ix());i.PerFolderSyncStateContainer[t]=u}function $4nw(n,t,i){return i in t.PerFolderSyncStateContainer?t.PerFolderSyncStateContainer[i]:null}_c.$Zb.prototype={$3qG:0,get_$8KX:function(){return this.$3qG>=this.get_$xe().length-1&&this.get_$AIO().IncludesLastItemInRange},get_$1uI:function(){return this.get_$xe()[this.$3qG]},$5Xr:function(n){var t=$4nw(this,n,this.get_$1uI());return!t||t.State===""},$7gU:function(n){if(this.get_$8KX())return!0;else{n.IncludesLastItemInRange&&this.$3qG++;return!1}},$7oF:function(n){var t=this.get_$J4();var i=new _c.$1Fq(this.get_$1uI(),$4nw(this,t,this.get_$1uI())||this.get_$c8().$5XO(this.get_$1uI()),_h.$26.$1WT,_c.$mJ.isInstanceOfType(this.$BD));n(i)},$8Hg:function(){var n=this.get_$AJ5();return new _e.$Uh(this.$Ce.get_$AU().get_$4y(),n.get_$AGd(),n.get_$AGe(),n.$29U,new _e.$o9(this.$Ce.get_$AU().get_$1Lx(),this.$Ce.get_$AU().get_$42j()))},$9js:function(n){this.set_$AJ5(new _c.$1Fw(this.get_$AIO(),this.get_$1uI()));this.get_$AJ5().$29F();var r=this.get_$AJ5().get_$AGd().length;this.set_$AJ7(this.get_$AJ7()+this.get_$AJ5().get_$AGe().length);if(r>0){this.set_$AJ6(this.get_$AJ6()+r);for(var i=this.get_$AJ5().get_$AGf(),t=0;t<i.length;t++)Array.contains(this.get_$AJ4(),i[t])||Array.add(this.get_$AJ4(),i[t])}_c.$JX.prototype.$9js.call(this,n)},$7n3:function(){var n=this.get_$J4()||this.get_$c8().$2OD();$6wD(this,this.get_$1uI(),n,this.get_$AJ5());return n},$7ke:function(){return null}};_c.$Zc=function(n,t){_c.$Zc.initializeBase(this,[n||new _e.$zS(t.get_$5c(),"MessageSyncStateId"),t])};function $3a0(n,t,i){var r=i;_a.$3.$K(r.FolderId,"FolderId should be present");var u=t.PerFolderSyncStateContainer[r.FolderId.Id];u||_js.Trace.logInfo(_c.$1p.$A,"We didn't find the syncState for folder:{0}",r.FolderId.Id);return u}_c.$Zc.prototype={$84w:function(n,t){var i=$3a0(this,t,n);return i?i.LastSuccessfulSyncTime:null},$3mH:function(n,t){_a.$3.$9t(_bc.$IH.isInstanceOfType(n),"The context type should match the module.");if(t){var i=$3a0(this,t,n);if(i)return i.IsSynced}return!1},$85T:function(n,t){_a.$3.$9t(_bc.$IH.isInstanceOfType(n),"The context type should match the module.");if(t){var i=$3a0(this,t,n);if(i)return i.ModuleSpecificContext}return null},$3yw:function(){return"MessageSyncStateId"},$9nS:function(n,t){var i=t.PerFolderSyncStateContainer;if(n in i){_js.Trace.logInfo(_c.$1p.$A,"Removing Folder {0} Message SyncState",n);delete i[n]}}};_c.$1Fw=function(n,t){this.$29U=[];_c.$1Fw.initializeBase(this);this.$33=n;this.$6jH=t};_c.$1Fw.prototype={$6jH:null,$33:null,get_$pd:function(){return this.$33.SyncState},get_includesLastItemInRange:function(){return this.$33.IncludesLastItemInRange},get_$Ix:function(){return this.$33.TotalCount},get_$9I5:function(){return this.$33.MoreItemsOnServer},get_$9Ks:function(){return this.$33.OldestReceivedTime},$29F:function(){for(var i=this.$33.Changes.Changes,u=i.length,t=0;t<u;++t){var n=i[t];switch(n.ChangeType){case"Create":case"Update":var r=n;Array.add(this.get_$AGd(),r.Item);var f=r.Item.ParentFolderId.Id;this.$AGg(f);break;case"Delete":Array.add(this.get_$AGe(),_e.$1l.$5h(n.ItemId.Id));this.$AGg(this.$6jH);break;case"ReadFlagChange":var e=n;Array.add(this.$29U,e);break;default:throw Error.invalidOperation("Invalid value of change type "+n.ChangeType+" change JSON = '"+JsonParser.serialize(n)+"'");}}}};_c.$N9=function(n,t){_a.$3.$K(n,"offlineSettings");this.$72=n;this.$J=t};_c.$N9.$E=function(n,t){return new _c.$N9(n,t)};function $6wQ(n,t,i){var r=i<11?4:11;var u=i<12?5:12;n.$291||(n.$291=[t?5:4,10,3,r,u,0,2,6,9,7,8,1,13,14]);n.$291[0]=t?5:4;n.$291[3]=r;n.$291[4]=u;return n.$291}function $6wR(n,t,i){var r=null;if(i===1){r=[10,3];r=$4nz(n,r,t)}else if(i===2){r=[7,8];r=$4nz(n,r,t)}else r=t;return r}function $4nz(n,t,i){var u=_a.$3r.$$(Boolean).$8V();var f=new(_0365f.$n.$$(_a.$Ad));t=t.concat.apply(t,i);for(var r=0;r<t.length;++r)if(!u.get_$3o(_a.$Ad.toString(t[r]))){f.$D(t[r]);u.set_$3o(_a.$Ad.toString(t[r]),!0)}return f.$6W()}_c.$N9.prototype={$72:null,$J:null,$2ov:null,$291:null,get_$1A0:function(){return this.$72.get_$1A0()},get_$7a6:function(){if(!this.$2ov){var t=15;this.$2ov=new Array(t);for(var n=0;n<t;n++)this.$2ov[n]=n}return this.$2ov},$85S:function(n,t,i,r){var u;_c.$23.$5T("GetModuleList - isInViewFolderSyncingInDateView: {0}, currentUIModule: {1}",i,r);if((_c.$ps.isInstanceOfType(n)||_c.$10o.isInstanceOfType(n))&&this.$72.get_$1A0()){_c.$23.$5T("Getting post-ALT1 module list, syncType: {0}",n.$MA);u=$6wQ(this,i,t);u=$6wR(this,u,r)}else{_c.$23.$5T("Getting ALT1 module list, syncType: {0}",n.$MA);u=this.get_$7a6()}return u},$9x7:function(){if(!this.$72.get_$1A0()){this.$72.set_$1A0(!0);_c.$23.$5T("UsePostALT1SyncOrder changed to true");this.$J.$9lH(_h.$iN,new _h.$iN)}},$9qi:function(){if(this.$72.get_$1A0()){this.$72.set_$1A0(!1);_c.$23.$5T("UsePostALT1SyncOrder changed to false");this.$J.$9lH(_h.$iN,new _h.$iN)}}};_c.$I2=function(n,t,i){_a.$3.$K(n,"syncManager");_a.$3.$K(t,"externalSyncDependencies");_a.$3.$K(i,"notificationType");this.$4Y=n;this.$3I=t;this.$6Gb=i};function $2FC(n,t,i){_a.$3.$m(t,"notification");_a.$3.$m(i,"syncContext");if(n.get_$gw().$2xb(i.get_$1y(),t))n.$4Y.$11T(i);else{_js.Trace.logWarning(_a.$0.$5o,"NQM rejected enqueue notification, clear notification queue and start full sync");n.get_$gw().$7h1();n.$4Y.$AG();n.$4Y.$1WD(7)}}function $3a4(n,t,i){return t.EventType==="Reload"&&t.pendingGetGenerated&&n.get_$6on()-i<=5e3}_c.$I2.prototype={$4Y:null,$6Gb:"HierarchyNotification",$3I:null,get_$1HM:function(){return this.$6Gb},get_$gw:function(){return this.$3I.$17W.get_$gw()},get_$6on:function(){return _a.$7.get_utcNow().$5X()},$3zz:function(n,t,i){_a.$3.$m(n,"notification");_a.$3.$m(t,"offlineNotificationHandler");_a.$3.$m(i,"callback");_a.$3.$pj(n.clientGenerated,!0,"notification.ClientGenerated");this.$8Bo(n,t,i)}};_c.$1Fy=function(){_c.$1Fy.initializeBase(this,[null])};_c.$1Fy.prototype={$5gb:function(n){n.$14g(null,this.$$d_$AJb,this.$$d_$9e1)}};_c.$1Fz=function(n,t,i){this.$$d_$4ak=Function.createDelegate(this,this.$4ak);this.$$d_$3Rh=Function.createDelegate(this,this.$3Rh);_c.$1Fz.initializeBase(this,[n,t,i])};_c.$1Fz.prototype={get_$Ru:function(){return 13},$7gU:function(n){return!0},$7n3:function(){return new SyncState("OtherMailboxConfigurationSyncStateId","")},$7oF:function(n){n(new _c.$1Fy)},$8Hg:function(){return new(_e.$NB.$$(_g.$S8))(this.get_$AIO(),this.$$d_$3Rh)},$7ke:function(){return new _e.$p1(this.$$d_$4ak)},$3Rh:function(n,t){var i=new _e.$AE(this.$Ce.get_$AU());var r=this;i.$9wq(t,n,function(){})},$4ak:function(n){_e.$AE.$7rF(n)}};_c.$1G0=function(n,t){_c.$1G0.initializeBase(this,[n,t])};_c.$1G0.prototype={get_$6jN:function(){return 2},$7oK:function(n,t,i){i([new _c.$1Fz(n,t,this.$Qt)])},$9zP:function(n){return!1},$3yw:function(){return"OtherMailboxConfigurationSyncStateId"}};_c.$1G8=function(n){_c.$1G8.initializeBase(this,[n])};_c.$1G8.prototype={get_$AG2:function(){return this.$W("wr")},set_$AG2:function(n){$1I(this,"wr",n);return n}};_c.$u3=function(n,t){this.$d7=new(_0365f.$n.$$(_c.$kr));this.$29Q=_a.$3r.$$(Boolean).$8V();this.$4Y=n;this.$1uM=t;this.$3Op=!1};function $6wX(n){if((n.$1uM!==n.$4Y.get_$1uN()||n.$3Op)&&!n.$4Y.get_$1Pe()){_c.$23.$5T("CurrentUIModue: {0}, NewUIModule: {1}, readjusting sync queue",n.$1uM,n.$4Y.get_$1uN());n.$1uM=n.$4Y.get_$1uN();n.$3Op=!1;for(var t=new(_0365f.$n.$$(_c.$kr)),r=new(_0365f.$n.$$(_c.$kr));n.$d7.get_$C()>0;){var i=n.$d7.get_$3o(0);n.$d7.$6C(0);i.$9z2(n.$1uM)?t.$D(i):r.$D(i)}t.$6S(r.$6W());n.$d7=t}}_c.$u3.prototype={$A5q:0,$4Y:null,$1uM:0,$3Op:!1,$3u6:function(n,t){_a.$3.$K(n,"module");var r=!1;if(n.get_$Ru()>this.$4Y.get_$k8()&&!n.$5ld()){_c.$23.$ns("Currently sync module type {0} is not supported",n.get_$HS());return}if(t){_c.$23.$165("Enquing module '{0} at the front of the sync internalQueue",n);if(this.$29Q.get_$3o(n.get_$1y()))for(var i=0;i<this.$d7.get_$C();i++)if(this.$d7.get_$3o(i).get_$1y()===n.get_$1y()){r=!0;n=this.$d7.get_$3o(i);this.$d7.$6C(i);break}this.$d7.$AGU(0,n)}else{if(this.$29Q.get_$3o(n.get_$1y())){r=!0;_c.$23.$165("Module '{0}' is already present in the sync internalQueue.",n);return}else{_c.$23.$165("Module '{0}' is not already present in the sync internalQueue. Enquing at the back of the internalQueue",n);this.$d7.$D(n)}this.$1uM!==this.$4Y.get_$1uN()&&(this.$3Op=!0)}if(!r){this.$29Q.set_$3o(n.get_$1y(),!0);n.set_$3WM(++this.$A5q);_c.$23.$165("Completed enqueuing module : {0}",n);n.$9QT()}},$7rg:function(){var n=null;if(this.$d7.get_$C()>0){$6wX(this);n=this.$d7.get_$3o(0);if(n){this.$d7.$6C(0);this.$29Q.$34(n.get_$1y());n.$9PV()}}return n},$1t:function(){for(var i=this.$d7.$6W(),r=i.length,n=0;n<r;++n){var t=i[n];_c.$23.$165("Module {0} sync cancelled, TrackingId {1} during sync internalQueue cleanup before FullSync",t.get_$HS(),t.get_$3WM());t.$4OP()}this.$d7=new(_0365f.$n.$$(_c.$kr));this.$29Q=_a.$3r.$$(Boolean).$8V()}};_c.$1G9=function(n,t){_c.$1G9.initializeBase(this,[n,t,"ReminderNotification"])};_c.$1G9.prototype={$8Bo:function(n,t,i){_a.$3.$KI(n.id,"ReminderNotification","reminderNotification.id");var r=new _c.$1DM(this.$4Y.get_$1Pe(),this.$3I);if(this.$4Y.$2fq(r,!1)){if($3a4(this,n,t.get_$38c())){_js.Trace.logInfo(_a.$0.$5o,"ReminderNotification throttled.");return}$2FC(this,n,r);return}i(n);this.$4Y.$11T(r)}};_c.$hh=function(n,t){_c.$hh.initializeBase(this,[n,t,"RowNotification"]);_js.Trace.logInfo(_a.$0.$5o,"[SyncRowNotificationStrategy::Ctor]");var i=this;this.$1tt=new(_0365f.$4C.$$(_e.$RA))(function(){return new _e.$RA(i.$3I.get_$5c(),i.$3I.get_$3Xp())});var r=this;this.$2VX=new(_0365f.$4C.$$(_e.$lP))(function(){return new _e.$lP(r.$3I.get_$5c(),r.$3I.get_$3Xp())})};function $6wZ(n,t){var i=_0365f.$5F.$3g(t);if(i.Item)if(i.Conversation)_js.Trace.logError(_a.$0.$5o,"NOT saving the row notification to the client store. Both the Item and the Converation properties are non null. That should never happen. Folder Id={0}",i.FolderId);else if(n.$3I.$ER.$1eN(12,i.FolderId)){var r=i.Item;r.ParentFolderId=new _g.$3R(i.FolderId);var u=new _e.$Uh(n.$2VX.get_$1n(),[r],[],[],null);u.set_$AIY(10);u.$AIb(null)}else return;else if(i.Conversation){if(n.$3I.$ER.$1eN(11,i.FolderId)){var f=i.Conversation;f.FolderId=new _g.$3R(i.FolderId);var e=new _e.$TX(n.$1tt.get_$1n(),[f],[]);e.set_$AIY(10);e.$AIb(null)}}else _js.Trace.logError(_a.$0.$5o,"NOT saving the row notification to the client store. Both the Item and the Converation properties are null. That should never happen. Folder Id={0}",i.FolderId)}function $6wa(n,t){if(t.Conversation){var r=t.Conversation;_js.Trace.logInfo(_a.$0.$5o,"Handling RowNotification id: {0}, EventType: {1}, ConversationType: true, convId: {2}, topic: {3}, lastDeliveryTime: {4}",t.FolderId||"",t.EventType,r.ConversationId?r.ConversationId.Id:"",r.ConversationTopic||"",r.LastDeliveryTime||"")}else{var i=t.Item;i&&_js.Trace.logInfo(_a.$0.$5o,"Handling RowNotification id: {0}, EventType: {1}, ConversationType: false, itemId: {2}, subject: {3}, lastReceivedTime: {4}",t.FolderId||"",t.EventType,i.ItemId?i.ItemId.Id:"",i.Subject||"",i.DateTimeReceived||"")}}_c.$hh.prototype={$1tt:null,$2VX:null,$8Bo:function(n,t,i){var r=n;if($5(r.FolderId)){i(n);return}$6wa(this,r);if(r.FolderId!==_g.$h.$1i.nameToId("outbox").Id)if(t.get_$5ah()[r.FolderId]){var f=r.FolderId===_g.$h.$1i.nameToId("drafts").Id;var u=new _c.$U9(r.FolderId,this.$4Y.get_$1Pe()||f,this.$3I);if(this.$4Y.$2fq(u,r.EventType==="Reload"||this.$3I.$17W.get_$5iE())){if($3a4(this,n,t.get_$38c())){_js.Trace.logInfo(_a.$0.$5o,"Reload RowNotification throttled folderid: {0}.",n.FolderId);return}$2FC(this,r,u);return}if(!f){(r.EventType==="RowAdded"||r.EventType==="RowModified")&&$6wZ(this,r);i(r)}this.$4Y.$11T(u)}else{i(r);return}}};_c.$11w=function(){_c.$11w.initializeBase(this,[1,"Core.Models.Sync.Setting"])};_c.$11w.prototype={get_$6od:function(){return this.$W("USSF")},set_$6od:function(n){$1I(this,"USSF",n);return n},get_$59a:function(){return this.$W("ASMFC")},set_$59a:function(n){$1I(this,"ASMFC",n);return n},get_$6I9:function(){return this.$W("OSMFC")},set_$6I9:function(n){$1I(this,"OSMFC",n);return n},get_$k8:function(){return this.$W("MSMT")},set_$k8:function(n){$1I(this,"MSMT",n);return n},get_$5rp:function(){return this.$W("MSFC")},set_$5rp:function(n){$1I(this,"MSFC",n);return n},get_$5hZ:function(){return this.$W("ICU")},set_$5hZ:function(n){$1I(this,"ICU",n);return n},get_$5rq:function(){return this.$W("MCEE")},set_$5rq:function(n){$1I(this,"MCEE",n);return n}};_c.$1GC=function(){_c.$1GC.initializeBase(this,[null])};_c.$1GC.prototype={$5gb:function(n){var t=new _g.$dd(_a.$7.get_$2F().$i6(-2).$9L(),_a.$7.get_$2F().$i6(3).$9L());var i=new _g.$db(this.get_$70(),t);var r=new _g.$181(this.$2C);n.$2Ou(i,r,this.$$d_$AJb,this.$$d_$9e1)}};_c.$1GD=function(n,t,i){_c.$1GD.initializeBase(this,[n,t,i])};_c.$1GD.prototype={get_$Ru:function(){return 1},$9zL:function(){$1AJ(this,"Last sync time of time zone table = "+this.get_$J4().LastSuccessfulSyncTime);var n=_a.$7.$Yu;_js.$8.$a(this.get_$J4().LastSuccessfulSyncTime)||(n=_a.$7.$3x(this.get_$J4().LastSuccessfulSyncTime));return n.$2U(_a.$7.get_$2F().$2w(-7))<0},$7gU:function(n){return!0},$7n3:function(){return new SyncState("TimeZoneOffsetsSyncStateId","")},$7oF:function(n){n(new _c.$1GC)},$8Hg:function(){$B3(this,String.format("Number of time zones = {0}",this.get_$AIO().Body.TimeZones.length));return new(_e.$NW.$$(_bc.$kx,_g.$Zk))(this.$Ce.get_$AU().get_$1oP(),this.get_$AIO().Body.TimeZones)},$7ke:function(){return null},$9MN:function(){var t=this.$Ce.get_$AU().get_$1oP();var r=this,n=this,i=this;t.$Bl(new _a.$6i("SyncTimeZoneOffsetsModule.OnBatchCompleted"),function(n){r.$3I.get_$5c().$5pW(t,n,null,null)},function(){$B3(n,"The time zone offsets table has been loaded");n.$3I.$6d4(!0,function(){_c.$JX.prototype.$9MN.call(n)},function(t){$1Kt(n,"Failed to set the offline component as ready to use after synchronizing the time zone data.",t.get_$4y());n.$1jR(Error.create(t.get_$4y()))})},function(n){$1Kt(i,"Failed to load the time zone offsets table",n.$3j);i.$1jR(Error.create(n.$3j))})}};_c.$1GE=function(n,t){_c.$1GE.initializeBase(this,[n,t])};_c.$1GE.prototype={get_$6jN:function(){return 2},$7oK:function(n,t,i){i([new _c.$1GD(n,t,this.$Qt)])},$9zP:function(n){return!1},$3yw:function(){return"TimeZoneOffsetsSyncStateId"}};_c.$1FY=function(n,t,i,r,u){_c.$1FY.initializeBase(this,[1102,n,t,i,r,u])};_c.$1FY.prototype={get_syncResponse:function(){return this.$9d},get_$E6:function(){return"UTC"},$9zY:function(n){return n!=="ErrorItemNotFound"}};_c.$uj=function(n){this.$2hq=this.$$gta["_c.$uj"].TSyncResponse===Number||Type.isEnum(this.$$gta["_c.$uj"].TSyncResponse)?0:this.$$gta["_c.$uj"].TSyncResponse===Boolean?!1:null;_c.$uj.$$(this.$$gta["_c.$uj"].TSyncResponse).initializeBase(this);this.$11a=n};_c.$uj.$$=function(n){var t="$uj"+"$1"+"$"+n.getName().replace(/\./g,"_");if(!_c[t]){var r=_c[t]=function(){(this.$$gta=this.$$gta||{})["_c.$uj"]={TSyncResponse:n};for(var i=[],t=0;t<arguments.length;++t)i[t]=arguments[t];_c.$uj.apply(this,i)};r.registerClass("_c."+t,_h.$FG.$$(n),_a.$eF.$$(n),_a.$rL,_a.$kW);var u=_c.$uj.prototype;for(var f in u){var i={key:f,value:u[f]};"constructor"!==i.key&&(r.prototype[i.key]=i.value)}}return _c[t]};_c.$uj.prototype={$11a:null,get_syncResponse:function(){return this.$2hq},$6Ti:function(n,t,i){this.$2hq=n;t()}};_c.$tz=function(n){_c.$tz.$$(this.$$gta["_c.$tz"].TResult,this.$$gta["_c.$tz"].TResponseMessage).initializeBase(this);this.$11a=n};_c.$tz.$$=function(n,t){var i="$tz"+"$2"+"$"+n.getName().replace(/\./g,"_")+"$"+t.getName().replace(/\./g,"_");if(!_c[i]){var u=_c[i]=function(){(this.$$gta=this.$$gta||{})["_c.$tz"]={TResult:n,TResponseMessage:t};for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];_c.$tz.apply(this,r)};u.registerClass("_c."+i,_h.$Jk.$$(n,t),_a.$eF.$$(t),_a.$rL,_a.$kW);var f=_c.$tz.prototype;for(var e in f){var r={key:e,value:f[e]};"constructor"!==r.key&&(u.prototype[r.key]=r.value)}}return _c[i]};_c.$tz.prototype={$11a:null,$2hq:null,get_syncResponse:function(){return this.$2hq},get_$pd:function(){return this.$11a},get_$E6:function(){return"UTC"},$4UT:function(n){_a.$3.$m(n,"responseMessage");this.$2hq=n}};_c.$1Lb=function(n,t,i,r){_a.$3.$m(r,"ExternalSyncDependencies");this.$MA=n;this.$19R=t;this.$3I=r;this.$1x9=i;this.$6jW=_a.$7.get_$2F().$5X().toString()};_c.$1Lb.prototype={$MA:0,$19R:0,$3I:null,$6jW:null,$1x9:!1,get_$1y:function(){return""},get_$19S:function(){return this.$MA},get_$2zX:function(){return this.$1x9},get_$5W4:function(){return!1},get_$9uT:function(){return!1},get_$8Gv:function(){return""},get_$7qT:function(){return!0},get_$45P:function(){return!1}};_c.$11m=function(n,t,i){_c.$11m.initializeBase(this,[n,t]);this.$1H=i};_c.$11m.prototype={$1H:null,$9zP:function(n){return this.$3I.$ER.$1eN(11,n)},$9zM:function(n){return this.$3I.$ER.$1eN(11,n)},$9yl:function(){return this.$3I.$F6.get_$3Lw()-this.$1Oz()<=0},$9yj:function(){return!0},$7oK:function(n,t,i){if(_c.$NY.isInstanceOfType(n))i([new _c.$n8(n,[],t,this.$Qt)]);else{var r=this;this.$3I.$ER.$2Oj(11,this.$3I.get_$15G(),function(u){var f=null;u.length&&(f=[new _c.$n8(n,u,t,r.$Qt),new _c.$11n(n,t,r.$Qt),new _c.$1FZ(n,t,new _e.$wA(r.get_$5c(),_h.$26.$1Qo),r.$1H)]);i(f)})}}};_c.$11o=function(n,t,i){_c.$11o.initializeBase(this,[n,t]);this.$1H=i};_c.$11o.prototype={$1H:null,$9zP:function(n){return!1},$9zR:function(){var n=this.$3I.get_$15G().Id;return!this.$3I.$ER.$453(n)},$7oK:function(n,t,i){var r=this;this.$3I.$ER.$2Oj(4,this.$3I.get_$15G(),function(u){_a.$3.$9t(!_c.$U9.isInstanceOfType(n),"sync conversation minimum module factory should not be invoked on notification based sync");var f=null;(_c.$NY.isInstanceOfType(n)||u.length)&&(f=[new _c.$1Fc(n,u[0],t,r.$Qt),new _c.$11n(n,t,r.$Qt),new _c.$1Fa(n,t,new _e.$wA(r.get_$5c(),_h.$26.$1Qo),r.$1H)]);i(f)})}};_c.$1Fl=function(n,t,i){_c.$1Fl.initializeBase(this,[n,t]);this.$Gk=i};_c.$1Fl.prototype={$Gk:!1,get_$6jN:function(){return 0},$7oK:function(n,t,i){i([new _c.$1Fk(n,t,this.$Qt,this.$Gk)])},$9zP:function(n){return!1},$3yw:function(){return"FolderHierarchySyncStateId"}};_c.$1G1=function(){_c.$1G1.initializeBase(this,[null])};_c.$1G1.prototype={$5gb:function(n){var t=new _g.$xO(this.$2C);n.$rU(t,this.$$d_$AJb,this.$$d_$9e1)}};_c.$NA=function(n,t,i){this.$$d_$3Rh=Function.createDelegate(this,this.$3Rh);_c.$NA.initializeBase(this,[n,t,i]);this.$2Cn=null;this.$6PF=new _h.$sN};function $6wS(n,t,i){if(t.UserOptions.HideDeletedItems!==i.UserOptions.HideDeletedItems||t.UserOptions.ConversationSortOrder!==i.UserOptions.ConversationSortOrder||t.SegmentationSettings.PredictedActions!==i.SegmentationSettings.PredictedActions){$B3(n,String.format("UserOption changed. Marking Email data for cleanup."));n.$3I.$J.$9lH(_h.$NX,new _h.$NX(11,!0))}return $6wT(n,t,i)}function $4o0(n,t){if(t===1&&n.get_$AIO()&&n.$2Cn){var i=$6wS(n,n.$2Cn,n.get_$AIO());i=i||!n.$6PF.$4i(n.$2Cn,n.get_$AIO());$B3(n,String.format("SyncType={0}, ShouldReload={1}",_a.$Or.toString(n.$BD.$MA),i));n.get_$AIQ().$5W7(i);_a.$3T.$Oc(n.get_$AIO().SessionSettings.UserCulture)!==_a.$3T.$Oc(n.$2Cn.SessionSettings.UserCulture)&&n.$3I.$J.$9lH(_a.$uR,new _a.$uR)}}function $6wT(n,t,i){var e=!1;if(!t.SessionSettings||!i.SessionSettings||!t.SessionSettings.DefaultFolderIds||!t.SessionSettings.DefaultFolderNames||!i.SessionSettings.DefaultFolderIds||!i.SessionSettings.DefaultFolderNames)return e;var h=new _g.$V(t);var c=new _g.$V(i);var p=h;var w=c;h.$33P();c.$33P();for(var b=["inbox","drafts","outbox","sentitems","calendar","contacts","recipientcache","quickcontacts"],r=new Array(0),f,l=b,k=l.length,o=0;o<k;++o){var u=l[o];f=!1;var a=p.nameToId(u);var v=w.nameToId(u);if(a)if(v){if(a.Id!==v.Id){$SV(n,String.format("FolderId for distinguishedFolderIdName:{0} has changed",u));f=!0}}else{$1Kt(n,String.format("Couldn't find FolderId for {0} in newUserConfiguraiton",u),"");f=!0}else{$1Kt(n,String.format("Couldn't find FolderId for {0} in oldUserConfiguraiton",u),"");f=!0}if(f){var d=$6wU(n,u);r=r.concat.apply(r,d)}}if(r.length>0){$B3(n,String.format("We need to clean up modules {0} due to FolderId changes",r.join()));e=!0;n.$3I.$F6.$4XX();for(var y=r,g=y.length,s=0;s<g;++s){var nt=y[s];n.$3I.$J.$9lH(_h.$NX,new _h.$NX(nt,!0))}}return e}function $6wU(n,t){var i;switch(t){case"inbox":case"drafts":case"outbox":case"sentitems":i=[11];break;case"calendar":i=[9,10];break;case"contacts":case"recipientcache":case"quickcontacts":i=[7,8];break;default:$SV(n,String.format("We dont' cleanup module for distinguishedFolderIdName:{0}",t));i=new Array(0);break}return i}_c.$NA.prototype={$2Cn:null,$6PF:null,get_$Ru:function(){return 0},$7gU:function(n){return!0},$7n3:function(){return new SyncState("OwaUserConfigurationSyncStateId","")},$7oF:function(n){n(new _c.$1G1)},$9gV:function(){this.$88H(this.$$d_$hb,this.$$d_$6iT)},$8Hg:function(){return new(_e.$NB.$$(_g.$LT))(this.get_$AIO(),this.$$d_$3Rh)},$7ke:function(){return null},$80w:function(n){$4o0(this,n);_c.$JX.prototype.$80w.call(this,n)},$80v:function(n){$4o0(this,n);_c.$JX.prototype.$80v.call(this,n)},$3Rh:function(n,t){var i=new _e.$AE(this.$Ce.get_$AU());var r=this;i.$3Rc(t,n,function(){})},$88H:function(n,t){var i=new _e.$AE(this.$Ce.get_$AU());var r=this;i.$rU(function(t){r.$2Cn=t;n()},t)}};_c.$1G2=function(n,t){_c.$1G2.initializeBase(this,[n,t])};_c.$1G2.prototype={get_$6jN:function(){return 1},$7oK:function(n,t,i){i([new _c.$NA(n,t,this.$Qt)])},$9zP:function(n){return!1},$9zV:function(n){return!1},$9zQ:function(){return!0},$3yw:function(){return"OwaUserConfigurationSyncStateId"}};_c.$1FO=function(n,t,i,r){_c.$1FO.initializeBase(this,[n]);this.$1nt=new _g.$hN;this.$1nt.FolderId=t;this.$1nt.WindowStart=i.$9L();this.$1nt.WindowEnd=r.$9L();this.$1nt.SyncState=n.State;this.$1nt.MaxChangesReturned=50};_c.$1FO.prototype={$1nt:null,$5gb:function(n){var t=new _g.$1FP(this.$2C);n.$6jE(this.$1nt,t,this.$$d_$AJb,this.$$d_$9e1)}};_c.$hd=function(n,t,i,r){_c.$hd.initializeBase(this,[_c.$hd.$817(n),t,i,r,0,!1])};_c.$hd.$817=function(n){switch(n){case 15:case 16:return 1102;case 17:case 18:return 1103;case 10:return 1101;default:return 1100}};_c.$hd.prototype={$Ck:null,get_syncResponse:function(){return this.$Ck},get_$E6:function(){return"UTC"},$9zY:function(n){return this.$2C===1101?!1:n!=="ErrorItemNotFound"},$6Th:function(n){this.$Ck=n},$4UT:function(n){}};_c.$1E=function(n,t,i){this.$$d_$3uB=Function.createDelegate(this,this.$3uB);this.$$d_$30p=Function.createDelegate(this,this.$30p);this.$$d_$88Q=Function.createDelegate(this,this.$88Q);this.$$d_$2xy=Function.createDelegate(this,this.$2xy);this.$$d_$6iT=Function.createDelegate(this,this.$6iT);this.$$d_$hb=Function.createDelegate(this,this.$hb);this.$$d_$1no=Function.createDelegate(this,this.$1no);this.$3UM=[];this.$1CH=-1;_a.$3.$K(n,"syncContext");_a.$3.$K(n.$3I,"syncContext.ExternalSyncDependencies");_a.$3.$K(n.$3I.get_$Zt(),"syncContext.ExternalSyncDependencies.ActionQueue");_a.$3.$K(n.$3I.get_$1Bn(),"syncContext.ExternalSyncDependencies.ConnectionManager");_a.$3.$K(n.$3I.$13O,"syncContext.ExternalSyncDependencies.DatapointTracker");_a.$3.$K(i,"itemSynchronizer");_a.$3.$K(i.get_$c8(),"itemSynchronizer.SyncStateProvider");this.$6jV=t;this.$BD=n;this.$3I=n.$3I;this.$Ce=i;this.$4gC=0;this.$4db=0;this.$2Ek=!1;$3a3(this)};_c.$1E.$85R=function(n,t){_a.$3.$1G(n,"moduleName");_a.$3.$K(t,"syncContext");return n+":"+t.get_$1y()};function $3a3(n){n.$2Pk=_a.$7.get_$2F()}function $6wI(n){$B3(n,"Restart syncing current module");n.$1CH=-1;n.$hb()}function $11y(n,t,i){Array.add(n.$3UM,new _c.$1Fn(t,i))}function $6wO(n,t){if(n.get_$9zb()){var i=this;$4ny(n,function(t){t.IsSynced=!0;t.Diagnostics.SyncType=n.get_$19S();t.Diagnostics.SyncInProgress=!1;t.Diagnostics.SyncError="";var i=_a.$7.get_$2F();t.LastSuccessfulSyncTime=_a.$7.$Ex(i);t.LastAttemptedSyncTime=t.LastSuccessfulSyncTime;n.$3I.$F6.$9wR(t.Id,i.$5X())},t)}else t()}function $6wJ(n){n.$1Qd=!0;n.get_$Zt().set_$1tB(!1)}function $3a1(n){n.$1Qd=!1;n.get_$1Bn().$2vp();n.get_$Zt().set_$1tB(!0)}function $2kT(n){if(n.$1dz){$SV(n,String.format("{0} has been aborted when invoking ExecuteCurrentStep",n.get_$1y()));return}$3a3(n);if(!_h.$5J.$2a){n.$AS.$1na=Error.create("Abort syncing because Sync is disabled");$3a2(n,n.$AS.$1na);return}if(!$6wE(n)){n.$6pW=_a.$6.acsa(_a.$0.$S2,"WaitForActionQueueToDrain",!0);n.$6iC=(new Date).getTime();$B3(n,"Cannot execute current sync step number "+n.$1CH+" is triggering action queue process and waiting until it finishes.");n.$2uf=!0;$3a1(n);return}n.get_$45P()?$6wF(n):$6wG(n)}function $6wF(n){var t=String.format("SyncModule_{0}.{1}",n.get_$HS(),n.$AS.$3UN);var i=_a.$6.ads(_a.$0.$Df,t);$4nx(n);_a.$6.ade(i)}function $6wG(n){n.$4db=n.$1Oz();var t=n.get_$HS()+":"+n.$AS.$3UN;$B3(n,String.format("Enqueing sync task: {0} on idle queue.",t));var i=this;n.$3I.$44.$Ns(_c.$1p.$A,t,function(){var i=n.$1Oz()-n.$4db;i>=1e3&&$B3(n,String.format("Sync task {0} was delayed for {1} milliseconds",t,i));$4nx(n)})}function $4nx(n){$B3(n,String.format("Executing step #{0}: {1}",n.$1CH,n.$AS.$3UN));$6wJ(n);n.$AS.$6X8();n.$AS.$3UL++;n.$AS.get_$A4S()()}function $6wE(n){return!n.get_$Zt().get_$35Y()}function $6wH(n){$B3(n,String.format("Re-executing step number {0}. Step execution count = {1}",n.$1CH,n.$AS.$3UL));if(_h.$5J.$3UP>0){var t=this;_js.$J.get_$I().$1s(_c.$1p.$A,"SyncExecuteCurrentStep",function(){$2kT(n)},n.$AS.get_$9qe())}else $2kT(n)}function $3a2(n,t){if(n.$1dz){$SV(n,String.format("{0} has been aborted when invoking SyncAborted",n.get_$1y()));return}n.$1dz=!0;$SV(n,"Aborting syncing module Id "+n.get_$1y());t&&$SV(n,"Error: "+t.message);var i=this;$6wN(n,!1,t,function(){n.$5bj(function(){n.$1zN(6,t)})})}function $6wM(n,t){var i=this;$4ny(n,function(t){t.Diagnostics.SyncType=n.get_$19S();t.Diagnostics.SyncInProgress=!0;t.LastAttemptedSyncTime=_a.$7.$Ex(_a.$7.get_$2F())},t)}function $6wN(n,t,i,r){$B3(n,String.format("Updating the sync diagnostics for module '{0}', SyncType: {1}, SyncInProgress: {2}, Error: {3}",n.get_$HS(),n.get_$19S(),t,i));n.get_$c8().$AAJ(n.get_$19S(),t,i,r)}function $B3(n,t){_js.Trace.logInfo(_c.$1p.$A,"{0}: {1}",n.get_$HS(),t)}function $1AJ(n,t){}function $SV(n,t){_js.Trace.logWarning(_c.$1p.$A,"{0}: {1}",n.get_$HS(),t)}function $1Kt(n,t,i){_js.Trace.logError(_c.$1p.$A,n.get_$HS()+": "+t+" [Data] "+i)}function $6wK(n){n.$3V0=_a.$7.get_$2F()}function $6wL(n){n.$4gC=_a.$7.get_$2F().$5X()-n.$3V0.$5X()}function $4ny(n,t,i){$1AJ(n,String.format("Updating the SyncStateProperties"));n.get_$c8().$3Wi(t,i)}_c.$1E.prototype={$6jV:null,$BD:null,$3I:null,$Ce:null,$2ZL:null,$3qH:null,$AS:null,$35G:!1,$3uW:!1,$1Qd:!1,$2uf:!1,$4gC:0,$3WL:0,$3V0:null,$2Ek:!1,$2Pk:null,$4db:0,$1dz:!1,$6pW:null,$6iC:0,$6l1:0,$4Wa:null,$4Wk:0,$1K9:0,$1KA:0,$1lf:0,get_$1Qe:function(){return this.$1Qd},get_$Gg:function(){var n=new _a.$Ms(this.$2Pk,_a.$7.get_$2F());return n.get_$A8o()<5},get_$3WM:function(){return this.$3WL},set_$3WM:function(n){this.$3WL=n;return n},get_$A5w:function(){return this.$3V0},get_$c8:function(){return this.$Ce.get_$c8()},get_$5cl:function(){return this.$2Pk},set_$5cl:function(n){this.$2Pk=n;return n},get_$5SL:function(){return this.$3uW},set_$5SL:function(n){this.$3uW=n;return n},get_$J4:function(){return this.$3qH},get_$HS:function(){return _a.$Ad.toString(this.get_$Ru())},get_$1Bn:function(){return this.$3I.get_$1Bn()},get_$Zt:function(){return this.$3I.get_$Zt()},get_$mn:function(){return this.$3I.$13O},get_$19S:function(){return _a.$Or.toString(this.$BD.$MA)},get_$1y:function(){return _c.$1E.$85R(this.get_$HS(),this.$BD)},get_$8P8:function(){return this.$2uf},get_$TN:function(){this.$2ZL||(this.$2ZL=this.$7mt());return this.$2ZL},get_$9z6:function(){return this.get_$1Bn().$QD||_c.$mJ.isInstanceOfType(this.$BD)},get_$1jF:function(){return this.$BD.$MA===3||this.get_$9z7()?this.$BD.get_$1y():""},get_$9z7:function(){return this.$BD.$MA===8},get_$8Hq:function(){return!1},get_$45P:function(){return this.$3I.$F6.get_$1A0()&&this.get_$8Hq()},get_$9zb:function(){return!_c.$NY.isInstanceOfType(this.$BD)||this.$BD.$1Mf===2},$5ld:function(){return!1},$9z2:function(n){return this.$BD.$MA!==4&&this.$BD.$MA!==7&&this.$9z3(n)},$y:function(){$6wK(this);this.$1dz=!1;if(_c.$NY.isInstanceOfType(this.$BD)){_js.Trace.logInfo(_c.$1p.$A,"{0}: Starting cleanup for module {1}",_a.$7.get_$2F(),this.get_$HS());_a.$3.$9t(this.$BD.$1Mf!==1,"Quota exceeded error is not processed through this code path at present");var n=this,t=this;this.$6hx(function(){var t=n.$BD;t.$9YT(n.get_$Ru());n.$1no()},function(n){_js.Trace.logError(_a.$0.$Df,"Cleanup failed, but continuing with the rest of the sync. Error = "+n.message);n.message&&t.get_$TN().set_$6jK(n.message);t.$1no()})}else{_js.Trace.logInfo(_c.$1p.$A,"{0}: Starting sync for module {1}",_a.$7.get_$2F(),this.get_$HS());this.$11T()}},$11T:function(){$B3(this,String.format("Starting Sync with SyncContext Id '{0}', Time: {1}",this.$BD.get_$1y(),this.$3V0));this.$1zN(1);$6wM(this,this.$$d_$2xy)},$7j2:function(){$B3(this,"Continue sync");if(this.$2uf){_a.$6.acea(this.$6pW);this.$6l1+=(new Date).getTime()-_a.$T.$88C(this.$6iC);this.$2uf=!1;_js.Trace.logInfo(_c.$1p.$A,"{0}: Syncing module {1} step {2} continues its execution",_a.$7.get_$2F(),this.get_$HS(),this.$1CH);$2kT(this)}},$9QT:function(){this.$1zN(0)},$9PV:function(){$3a3(this)},$4OP:function(){this.$1zN(4)},$1jR:function(n){if(this.$AS){this.$AS.$3UO=1;this.$AS.$1na=n;this.$AS.$1n3=!1;this.$hb()}else $3a2(this,n)},$9z3:function(n){return!1},$2xy:function(){this.$AS&&this.$AS.$AG();if(this.$1CH>=this.$3UM.length)throw Error.invalidOperation("All the steps in this module have already been executed");this.$AS=this.$3UM[++this.$1CH];$2kT(this)},$30p:function(){$B3(this,"Getting a currentSyncState");this.get_$c8().$2Oq(this.$$d_$88Q,this.$$d_$6iT)},$88Q:function(n){var t=$5(n)?this.get_$c8().$2OD():n.get_$1r();this.$4UV(t)},$4UV:function(n){if(this.$5Xr(n)){$B3(this,"This module is being synced for the first time i.e. the SyncState is <empty>");this.$35G=!0}else $B3(this,"The module is NOT being synced for the first time. SyncState is "+n.State);$B3(this,"Got a currentSyncState");this.$3qH=n;this.$2Ek=_js.$8.$15(n.Diagnostics.SyncError);this.$hb()},$6iT:function(n){var t=null;t=Error.create(n.get_$4y());this.$AS.$1n3=n.get_$8Ol();this.$3uW=n.get_$8Na();this.$3uB(t)},$5Xr:function(n){return n.State===""},$1no:function(){if(this.$1dz){$SV(this,String.format("{0} has been aborted when invoking SyncCompleted",this.get_$1y()));return}$B3(this,"Completed syncing");$3a1(this);var n=this;$6wO(this,function(){n.$5bk(function(){n.$1zN(3)})})},$5bk:function(n){$B3(this,"Post sync completed");n()},$7mt:function(){return new _c.$4I(this.get_$Ru())},$hb:function(){if(this.$1dz){$B3(this,"Ignoring StepCompleted as the module has been aborted");return}$3a1(this);if(this.$AS.$3UO)this.$AS.get_$6eZ()?$6wH(this):$3a2(this,this.$AS.$1na);else{if(!$5(this.$AS.$1na))throw Error.invalidOperation("previous StepError should be null at this point");this.$2xy()}},$1Oz:function(){return _a.$7.get_utcNow().$5X()},$1zN:function(n,t){if(n===6||n===3){$6wL(this);var r=this.get_$mn();if(r.get_$2a()){this.$ABp();this.get_$TN().set_$5iZ(this.$35G);this.get_$TN().set_$A5x(_a.$Gi.toString(n));this.get_$TN().set_$19S(this.get_$19S());this.get_$TN().set_$3Uz(_a.$Sf.toString(this.$BD.$19R));this.$2ZL.set_$A5v(this.$BD.$6jW);this.get_$TN().set_$A7s(this.$4gC);t&&t.message&&this.get_$TN().set_$6jK(t.message);r.$AP(this.get_$TN());_a.$g.$9H(this.$2ZL.get_$Ru())}}var i=this;_js.$J.get_$I().$40(_c.$1p.$A,"SyncInvokeProgressEventHandler_"+this.get_$HS()+"_"+_a.$Gi.toString(n),function(){i.$6jV(i.$7oM(n,t));n===3&&_a.$6.acea(null,"SyncModule_"+i.get_$HS())})},$7oM:function(n,t){return _a.$Se.$E(n,this.get_$Ru(),this.$3WL,this.get_$1y(),this.get_$1jF(),this.$35G,null,null,t)},$5bj:function(n){$B3(this,"Processing sync aborted");n()},$ABp:function(){return},$7XK:function(n){_a.$6.acea(this.$4Wa);this.$1K9=this.$1K9+(new Date).getTime()-this.$4Wk;var t=n;t.get_$1LO()&&(this.$1KA=this.$1KA+t.get_$1LO().backEndTime);_a.$3.$K(n,"action");_a.$3.$K(n.$1d,"action.Error");if(this.$1dz){$B3(this,"Ignoring ActionErrorCallback as the module has been aborted");return}$SV(this,String.format("Action failed, action name: {0}, error: {1}",n.$1k_2,n.$1d));this.get_$9z6()||(this.$AS.$1n3=!1);this.$3uB(n.$1d)},$3uB:function(n){$SV(this,String.format("Error in current step number {0}. Error = {1}",this.$1CH,n?n.toString():""));this.$AS.$3UO=1;this.$AS.$1na=n;this.$hb()},$9pe:function(){$B3(this,"Resetting currentSyncState to null");this.$3qH=null}};_c.$JX=function(n,t,i){this.$$d_$7XK=Function.createDelegate(this,this.$7XK);this.$$d_$A5f=Function.createDelegate(this,this.$A5f);this.$$d_$9jv=Function.createDelegate(this,this.$9jv);this.$$d_$5J7=Function.createDelegate(this,this.$5J7);this.$$d_$6V1=Function.createDelegate(this,this.$6V1);this.$$d_$9MN=Function.createDelegate(this,this.$9MN);this.$$d_$A5k=Function.createDelegate(this,this.$A5k);this.$$d_$9gV=Function.createDelegate(this,this.$9gV);this.$$d_$A5e=Function.createDelegate(this,this.$A5e);_c.$JX.$$(this.$$gta["_c.$JX"].TSyncAction,this.$$gta["_c.$JX"].TSyncResponse).initializeBase(this,[n,t,i]);$11y(this,this.$$d_$30p,"GetSyncState");$11y(this,this.$$d_$A5e,"SyncChangesFromServer");$11y(this,this.$$d_$9gV,"PerformModuleSpecificAction");$11y(this,this.$$d_$A5k,"SynchronizeChangesToClientStore");$11y(this,this.$$d_$9MN,"OnBatchCompleted");switch(this.$BD.$MA){case 7:$11y(this,this.$$d_$6V1,"ReconcileClientData");break;default:break}$11y(this,this.$$d_$5J7,"ConfirmSyncCompleted")};_c.$JX.$$=function(n,t){var i="$JX"+"$2"+"$"+n.getName().replace(/\./g,"_")+"$"+t.getName().replace(/\./g,"_");if(!_c[i]){var u=_c[i]=function(){(this.$$gta=this.$$gta||{})["_c.$JX"]={TSyncAction:n,TSyncResponse:t};for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];_c.$JX.apply(this,r)};u.registerClass("_c."+i,_c.$1E);var f=_c.$JX.prototype;for(var e in f){var r={key:e,value:f[e]};"constructor"!==r.key&&(u.prototype[r.key]=r.value)}}return _c[i]};_c.$JX.prototype={$1uJ:null,$4eg:null,$2cV:null,get_$AIO:function(){return this.$1uJ},get_$9ln:function(){return 100},get_$AIP:function(){return this.$2cV},get_$8OV:function(){return!$5(this.$1uJ)&&this.$7gU(this.$1uJ)},get_$AIQ:function(){this.$4eg||(this.$4eg=this.$8Hh());return this.$4eg},$82L:function(){return this.get_$Ru()},$6V1:function(){if(_e.$yg.isInstanceOfType(this.$2cV)){this.$9MW();var t=this.$2cV;var n=this,i=this;this.$Ce.$6V1(t,this.get_$9ln(),this.$$d_$9jv,function(){n.get_$TN().set_$3sA(t.get_$5P6());n.get_$TN().set_$3Np(t.get_$3Np());_js.Trace.logInfo(_a.$0.$Df,"Finished sync reconciliation (Reconciled/Detected: {0}/{1}).",n.get_$TN().get_$3Np(),n.get_$TN().get_$3sA());n.get_$Zt().$5WL(function(t){n.get_$TN().set_$7XM(t.length);for(var r=t,u=r.length,i=0;i<u;++i){var f=r[i];_js.Trace.logWarning(_a.$0.$Df,"Existing action in the queue after sync reconciliation was done: {0}",_g.$3z.$UW(f))}n.$hb()},n.$$d_$3uB)},function(n){_js.Trace.logError(_a.$0.$Df,"Failed to reconcile client data. Error: {0}",n.get_$4y());i.$6iT(n)})}else{this.get_$TN().set_$3sA(-1);this.get_$TN().set_$3Np(-1);this.$hb()}},$6hx:function(n,t){_a.$3.$K(n,"onCleanupComplete");_a.$3.$K(t,"errorCallback");_js.Trace.logInfo(_c.$1p.$A,"Starting cleanup for module '{0}'",this.get_$1y());this.$9MP();var i=this.$7ke();if(i){var r=this;this.$Ce.$cV(this.$BD.$1Mf,i,n,function(n){$SV(r,"Module cleanup failed with error: "+n.get_$4y());var i=Error.create(n.get_$4y());t(i)})}else n()},$A5k:function(){$B3(this,"Persisting changes to client store");this.$2cV=this.$7oG();var n=this.$7n3();n.IsSynced=this.get_$J4().IsSynced;n.LastSuccessfulSyncTime=this.get_$J4().LastSuccessfulSyncTime;n.Diagnostics.SyncInProgress=!0;this.$Ce.$A5y(n,this.$BD.get_$5W4(),this.$BD.get_$8Gv(),this.$BD.get_$9uT(),this.$2cV,this.$$d_$hb,this.$$d_$6iT)},$9js:function(n){n()},$9jv:function(n){n()},$8Hh:function(){return new _e.$1Fx},$9pe:function(){_c.$1E.prototype.$9pe.call(this);this.$1uJ=null},$7XK:function(n){var t=n;if(t.get_$1LO()&&t.get_$1LO().responseCode==="ErrorInvalidSyncStateData"){$SV(this,"Receiving ErrorInvalidSyncStateData response");this.$3I.$J.$9lH(_h.$NX,new _h.$NX(this.$82L(),!1));this.$3I.$F6.$4XX();this.$3I.$J.$9lH(_h.$Sb,new _h.$Sb(12));this.$1jR(Error.create("Abort syncing current module because receiving ErrorInvalidSyncStateData response"))}else _c.$1E.prototype.$7XK.call(this,n)},$7oG:function(){if(!this.$1uJ)throw Error.invalidOperation("CurrentSyncResponse should not be null at this point");return this.$8Hg()},$A5e:function(){if($5(this.get_$J4()))throw Error.invalidOperation("CurrentSyncState cannot be null before starting this step");if(this.$9zL()){var n=this;this.$7oF(function(t){if(t){t.add_$29(n.$$d_$A5f);t.add_$21(n.$$d_$7XK);n.$4Wa=_a.$6.acsa(_a.$0.$S2,"SyncModule.SubmitSyncAction",!0);n.$4Wk=(new Date).getTime();n.$1lf++;OwaApplication.$1W.$11(t)}else{$SV(n,"Sync action is null");n.$1jR(Error.invalidOperation("Sync action is null"))}})}else this.$1no()},$9zL:function(){return!0},$9gV:function(){this.$hb()},$9MN:function(){this.$2zX(0);this.$hb()},$5J7:function(){$B3(this,"Confirming sync is complete");if(this.get_$8OV())this.$1no();else{this.$1zN(2,null);this.$9pe();$6wI(this)}},$5bk:function(n){this.$2zX(1);_c.$1E.prototype.$5bk.call(this,n)},$5bj:function(n){this.$2zX(2);_c.$1E.prototype.$5bj.call(this,n)},$2zX:function(n){this.$BD.$MA===5?this.$80v(n):n!==2&&this.$80w(n)},$80v:function(n){},$80w:function(n){},$9MP:function(){},$9MW:function(){},$A5f:function(n){_a.$6.acea(this.$4Wa);this.$1K9=this.$1K9+(new Date).getTime()-this.$4Wk;var t=n;t.get_$1LO()&&(this.$1KA=this.$1KA+t.get_$1LO().backEndTime);var i=n;this.$1uJ=i.get_syncResponse();var r=this;this.$9js(function(){r.$hb()})}};_c.$4I=function(n){_c.$4I.initializeBase(this,[1,"Core.Models.Sync.ModuleStats"]);$1I(this,_c.$4I.$3HH,_a.$Ad.toString(n))};_c.$4I.prototype={get_$Ru:function(){return this.$W(_c.$4I.$3HH)},set_$Ru:function(n){$1I(this,_c.$4I.$3HH,n);return n},get_$5iZ:function(){return this.$W(_c.$4I.$450)},set_$5iZ:function(n){$1I(this,_c.$4I.$450,n);return n},get_$19S:function(){return this.$W(_c.$4I.$4eq)},set_$19S:function(n){$1I(this,_c.$4I.$4eq,n);return n},get_$3Uz:function(){return this.$W(_c.$4I.$4el)},set_$3Uz:function(n){$1I(this,_c.$4I.$4el,n);return n},get_$A5x:function(){return this.$W(_c.$4I.$4en)},set_$A5x:function(n){$1I(this,_c.$4I.$4en,n);return n},get_$6jK:function(){return this.$W(_c.$4I.$4eZ)},set_$6jK:function(n){$1I(this,_c.$4I.$4eZ,n);return n},get_$A7s:function(){return this.$W(_c.$4I.$4gD)},set_$A7s:function(n){$1I(this,_c.$4I.$4gD,n);return n},get_$4i9:function(){return this.$W(_c.$4I.$4iA)},set_$4i9:function(n){$1I(this,_c.$4I.$4iA,n);return n},get_$5Of:function(){return this.$W(_c.$4I.$3rU)},set_$5Of:function(n){$1I(this,_c.$4I.$3rU,n);return n},get_$A5v:function(){return this.$W(_c.$4I.$4ei)},set_$A5v:function(n){$1I(this,_c.$4I.$4ei,n);return n},get_$3sA:function(){return this.$W(_c.$4I.$3sB)},set_$3sA:function(n){$1I(this,_c.$4I.$3sB,n);return n},get_$3Np:function(){return this.$W(_c.$4I.$4VK)},set_$3Np:function(n){$1I(this,_c.$4I.$4VK,n);return n},get_$7XM:function(){return this.$W(_c.$4I.$3gg)},set_$7XM:function(n){$1I(this,_c.$4I.$3gg,n);return n}};_c.$1FX=function(n,t,i,r,u){_c.$1FX.initializeBase(this,[t]);_a.$3.$K(n,"foldersToSync");_a.$3.$K(t,"syncState");_a.$3.$85(i,1,100,"maxChangesReturned");this.$1DC=new Array(n.length);for(var f=0;f<n.length;f++)this.$1DC[f]=new _g.$3R(n[f]);this.$3AB=i;this.$1er=r;this.$2wo=u};_c.$1FX.prototype={$1DC:null,$3AB:0,$1er:!1,$2wo:!1,$7oI:function(n){var t=new _g.$hR(this.$3AB);t.NumberOfDays=_h.$26.$2DB;t.MinimumCount=_h.$26.$19Q;t.MaximumCount=_h.$26.$1Jq;t.FolderIds=this.$1DC;t.SyncState=this.get_$pd().State;t.IsPartialFolderList=this.$1er;t.DoQuickSync=this.$2wo;t.ConversationShape=_h.$v.get_$5du();t.ConversationShape.InferenceEnabled=_g.$V.get_$I().get_$5z().get_$Ta();t.ShapeName=_h.$v.$5WS(this.$1DC[0],null);return new _g.$hP(n,t)},$5gb:function(n){var t=this.$7oI(this.get_$70());var i=new _g.$1FW(this.$2C);n.$6jF(t,i,this.$$d_$AJb,this.$$d_$9e1)}};_c.$hS=function(n){this.$5Ji=[];_c.$hS.initializeBase(this);this.$33=n};function $6vv(n,t){for(var u=[],f=t,e=f.length,r=0;r<e;++r){var i=f[r];Array.add(n.get_$AGe(),_e.$EM.$14T(i.FolderId,i.ConversationId));Array.add(u,i.ConversationId.Id);n.$AGg(i.FolderId.Id)}_c.$23.$5T("SyncConversation received {0} deletes. List of conversations deleted = [{1}]",t.length,u.join(","))}function $6vu(n,t){for(var f={},e=[],o=t,s=o.length,r=0;r<s;++r){var i=o[r];Array.add(n.get_$AGd(),i);var u=i.ConversationId.Id;if($5(f[u])){f[u]=!0;Array.add(n.$5Ji,new _g.$TW(i.ConversationId))}var h=i.FolderId.Id;n.$AGg(h);Array.add(e,u+"::"+i.LastDeliveryTime+"::"+i.ConversationTopic)}_c.$23.$5T("SyncConversation received {0} AddsAndChanges. List of conversations added = [{1}]",t.length,e.join(","))}_c.$hS.prototype={$33:null,get_$pd:function(){return this.$33.SyncState},get_includesLastItemInRange:function(){return this.$33.IncludesLastItemInRange},get_$AGc:function(){return this.$33.ConversationViewDataList},$29F:function(){var n=this.$33.DeletedConversations;var t=this.$33.Conversations;n&&$6vv(this,n);t&&$6vu(this,t)}};_c.$9y=function(n,t,i,r){_c.$9y.initializeBase(this,[n,t,i]);this.$1H=r;this.$2uM=_a.$3r.$$(_g.$6Y).$8V();this.$1KJ=_a.$3r.$$(String).$8V();this.$4bG=!1;this.$1oX=0;this.$1oV=0;this.$3WA=0;this.$3WB=0};_c.$9y.$88S=function(n,t,i,r){var u=n.$4D();var f=u.$2w(1-u.get_$5n());var e=f.$IC(t);i.val=f.$2w(_c.$9y.$6q1);r.val=e.$2w(14)};function $6vo(n){var t=new _g.$CI(new _g.$3R(n.$2k.Id));return new _c.$1FO(n.get_$J4(),t,n.$1Ki,n.$1XT)}function $4nk(n,t,i,r,u,f){var e=[];$B3(n,String.format("Items to sync: {0}",t.length));var o=this;$3Zy(n,t,0,n.get_$8Tv(),i,r,u,e,function(){$B3(n,String.format("Failed items to sync: {0}",e.length));$4nl(n,e,u,f)})}function $4nl(n,t,i,r){var u=this;$3Zy(n,t,0,1,!1,!1,i,[],function(){r()})}function $3Zy(n,t,i,r,u,f,e,o,s){var l=t.length-i;var h=Math.min(l,r);$B3(n,String.format("SyncItems with offset = {0}, remaining = {1}, count = {2}",i,l,h));if(h){for(var a=new Array(h),c=0;c<h;c++)a[c]=t[i+c];i+=h;var v=this;n.$A5n(a,e,u,f,o,function(){$3Zy(n,t,i,r,u,f,e,o,s)})}else{$B3(n,"Done syncing items");s()}}_c.$9y.prototype={$1H:null,$1Ki:null,$1XT:null,$2k:null,$2uM:null,$1KJ:null,$4bG:!1,$1oX:0,$1oV:0,$3WA:0,$3WB:0,$493:!1,get_$Ru:function(){return 10},get_$3qI:function(){return _g.$V.get_$I().get_$13().get_$E6()},get_$8Tv:function(){return 50},$9z3:function(n){return n===1},$84p:function(){if(!_c.$9y.$js){var n=this.$1H.get_$Bk()?_h.$v.get_$5Vi():_h.$v.get_$80R();_c.$9y.$js=_0365f.$2d.$3g(n);_c.$9y.$js.MaximumBodySize=this.$3I.$8x==="Mouse"?51200:25600}return _c.$9y.$js},$7gU:function(n){this.$493=n.IncludesLastItemInRange;return this.$493&&!this.get_$J4().TryToIncrementWindowSizeOnNextSync},$7n3:function(){return new CalendarSyncState(this.get_$AIO().SyncState,this.$2k.Id,this.$1Ki,this.$1XT,this.get_$3qI(),this.get_$J4().ApproximateWindowSize,this.get_$J4().TryToIncrementWindowSizeOnNextSync)},$4UV:function(n){var t=n;if(this.$5Xr(n)){t.ApproximateWindowSize=3;t.TryToIncrementWindowSizeOnNextSync=6>t.ApproximateWindowSize}else if($5(t.ApproximateWindowSize)){t.ApproximateWindowSize=6;t.TryToIncrementWindowSizeOnNextSync=!1}else if(t.TryToIncrementWindowSizeOnNextSync&&this.$493){var i=t.ApproximateWindowSize+3;if(i>=6){t.ApproximateWindowSize=6;t.TryToIncrementWindowSizeOnNextSync=!1}else t.ApproximateWindowSize=i}var r,u;_c.$9y.$88S(_a.$7.get_$2F(),t.ApproximateWindowSize,r={val:this.$1Ki},u={val:this.$1XT});this.$1Ki=r.val;this.$1XT=u.val;_c.$1E.prototype.$4UV.call(this,n)},$8Hg:function(){var i=this.$Ce;var t=this.$BD;var n=this.get_$AIO();return new _e.$82(i.get_$AU(),_c.$126.isInstanceOfType(t)||_c.$ps.isInstanceOfType(t),this.$1Ki.$9L(),n.UpdatedItems,n.RecurrenceMastersWithInstances,n.RecurrenceMastersWithoutInstances,n.DeletedItems,this.$2uM,this.$1KJ)},$7ke:function(){return new _e.$13l(this.$Ce.get_$AU().get_$mQ(),this.$Ce.get_$AU().get_$1c(),this.$Ce.get_$AU().get_$pd())},$9js:function(n){var t=this.get_$AIO();this.$1oX+=t.UpdatedItems.length;this.$1oV+=t.DeletedItems.length;this.$3WA+=t.RecurrenceMastersWithInstances.length;this.$3WB+=t.RecurrenceMastersWithoutInstances.length;(this.$1oX>0||this.$1oV>0||this.$3WA>0||this.$3WB>0)&&(this.$4bG=!0);for(var i=[],u=0;u<t.RecurrenceMastersWithInstances.length;u++){var f=t.RecurrenceMastersWithInstances[u];this.$1KJ.set_$3o(f.UID,f.ItemId.Id);Array.add(i,f.ItemId)}for(var e=0;e<t.UnchangedRecurrenceMastersWithInstances.length;e++){var r=t.UnchangedRecurrenceMastersWithInstances[e];if(!this.$1KJ.$NO(r.UID)){this.$1KJ.set_$3o(r.UID,r.ItemId.Id);Array.add(i,r.ItemId)}}for(var o=0;o<t.UpdatedItems.length;o++){var s=t.UpdatedItems[o];s.CalendarItemType==="Occurrence"&&this.$1KJ.$NO(s.UID)||Array.add(i,s.ItemId)}$4nk(this,i,!0,!0,this.$2uM,n)},$9jv:function(n){var t=this.get_$AIP();var i=new Array(t.get_$5P6());var r=0;var f=this;t.$3wP(function(n){var t=new _g.$1t(n);i[r++]=t});var u=this;$4nk(this,i,!1,!1,t.$1lM,function(){_c.$JX.prototype.$9jv.call(u,n)})},$7oF:function(n){var t=this;_c.$DF.$826(this.$3I.get_$5c(),function(i){if(i){$B3(t,String.format("Syncing calendar folder ('{0}').",i.Id));t.$2k=i;var r=$6vo(t);n(r)}else{$SV(t,"Could not find the primary calendar folder.");n(null)}})},$ABp:function(){var n=this.get_$TN();n.set_$4i9(this.$1oX);n.set_$5Of(this.$1oV);n.set_$A8p(this.$3WA);n.set_$A8q(this.$3WB);n.set_$A60($5(this.$1Ki)?"":this.$1Ki.$9L());n.set_$A5z($5(this.$1XT)?"":this.$1XT.$9L());n.set_$A5i($5(this.$2k)?"":this.$2k.Id);if(this.get_$J4()){var t=this.get_$J4();n.set_$7b2(t.ApproximateWindowSize);n.set_$AAE(t.TryToIncrementWindowSizeOnNextSync)}},$7mt:function(){return new _c.$1FV(this.get_$Ru())},$80w:function(n){if(n===1&&this.$4bG&&(this.$BD.$1x9||!this.$2Ek)){$B3(this,"Raising Hierarchy notification for calendar synced folders");this.get_$AIQ().$2zR([this.$2k.Id])}_c.$JX.prototype.$80w.call(this,n)},$80v:function(n){if(n===2||n===1){$B3(this,"Raising Hierarchy notification for calendar all folders");this.get_$AIQ().$2zR([this.$2k.Id])}_c.$JX.prototype.$80v.call(this,n)},$9pe:function(){this.$2uM=_a.$3r.$$(_g.$6Y).$8V();this.$1KJ=_a.$3r.$$(String).$8V();_c.$JX.prototype.$9pe.call(this)},$9MW:function(){if(this.$BD.$MA===7){var n=this.$1Oz()+288e5;this.$3I.$F6.set_$3Lv(n);$B3(this,String.format("Next calendar reconcile time: {0} utc ms",n))}_c.$JX.prototype.$9MW.call(this)},$A5n:function(n,t,i,r,u,f){var s=new _c.$hd(this.get_$Ru(),n,this.$84p(),"FullCalendarItem");var e=this;s.add_$29(function(r){e.$2Pk=_a.$7.get_$2F();for(var h=r,l=h.$Ck.length,o=0;o<l;o++){var s=h.$Ck[o];if(!e.$AA8(t,s))if(i&&s.ResponseCode!=="ErrorItemNotFound")Array.add(u,n[o]);else{var c=String.format("Failed to sync item: {0}, ResponseCode: {1}",n[o].Id,s.ResponseCode);s.ResponseCode==="ErrorItemNotFound"?$SV(e,c):$1Kt(e,c,"");Array.add(e.get_$AIO().DeletedItems,n[o])}}f()});var o=this;s.add_$21(function(i){if(r){$SV(o,"Retry sync items action");$4nl(o,n,t,f)}else{$SV(o,"Sync items action failed");o.$7XK(i)}});OwaApplication.$1W.$11(s)},$AA8:function(n,t){switch(t.ResponseCode){case"NoError":var r=t.Items;if(r&&r.length>0){_a.$3.$KI(r.length,1,String.format("There are unexpected number of items ({0}) in the response.",r.length));var i=r[0];_a.$3.$pj(i,null,String.format("The item should not be null with the response code '{0}'.",t.ResponseCode));!$5(i.Body)&&i.Body.IsTruncated&&(i.Body.Value="");!$5(i.TextBody)&&i.TextBody.IsTruncated&&(i.TextBody.Value="");n.set_$3o(i.ItemId.Id,i)}return!0;default:$SV(this,String.format("SyncItems encountered error (ResponseCode: {0}; MessageText: '{1}').",t.ResponseCode,t.MessageText));return!1}}};_c.$DF=function(n,t,i){_c.$DF.initializeBase(this,[n||new _e.$13x(t.get_$5c()),t]);this.$1H=i};_c.$DF.$826=function(n,t){_c.$DF.$7dq(n,function(){t(_c.$DF.$1sj)})};_c.$DF.$7dq=function(n,t){_c.$DF.$1sj?t():_e.$8H.$1cZ(new _e.$ck(n,"UTC"),"calendar",function(n){n?_c.$DF.$1sj=n.get_$1r().FolderId:_c.$23.$ns("The primary calendar folder is not present in the folder hierarchy.");t()},function(n){_c.$23.$Ec("Failed to find the calendar folder. Error: {0}",n);t()})};function $4nm(n,t){return!!_c.$DF.$1sj&&t===_c.$DF.$1sj.Id}_c.$DF.prototype={$1H:null,get_$6jN:function(){return 0},$7oK:function(n,t,i){i([new _c.$9y(n,t,this.$Qt,this.$1H)])},$9zP:function(n){return $4nm(this,n)},$9zS:function(){return this.$3I.$F6.get_$3Lv()-this.$1Oz()<=0},$9zM:function(n){return $4nm(this,n)},$9yj:function(){return!0},$3yw:function(){return"CalendarSyncState"},$3mH:function(n,t){if(_e.$jD.isInstanceOfType(n)){var i=t;var r=n;if(_c.$11v.prototype.$3mH.call(this,n,t)&&r.$5FB===i.FolderId){var u=_g.$V.get_$I().get_$13().get_$E6();if(i.TimeZone===u){var f=r.$1Ki.localeCompare(i.WindowStart);if(f>=0){var e=r.$1XT.localeCompare(i.WindowEnd);if(!(e>0))return!0}}else _js.Trace.logWarning(_c.$1p.$A,"Calendar module is synced to a different time zone ('{0}') than expected ('{1}').",i.TimeZone,u)}return!1}else throw Error.argumentType("context",Object.getType(n),_e.$jD,"The context type should match the module.");}};_c.$1Fi=function(n,t){_c.$1Fi.initializeBase(this,[n]);this.$Gk=t};_c.$1Fi.prototype={$Gk:!1,$5gb:function(n){var t=new _g.$hU(this.get_$70(),new _g.$hW(_h.$v.get_$41r()));t.Body.ShapeName="Folder";t.Body.ReturnRootFolder=!0;t.Body.SyncState=this.get_$pd().State||"";t.Body.ReturnPeopleIKnowFolder=!0;this.$Gk&&(t.Body.FolderToMoveToTop=_h.$MG.$3nv(_h.$i.$2Ng));var i=new _g.$1Fj(this.$2C);n.$6jL(t,i,this.$$d_$AJb,this.$$d_$9e1)}};_c.$1Fk=function(n,t,i,r){_c.$1Fk.initializeBase(this,[n,t,i]);this.$1C9=[];this.$3pu=[];this.$Gk=r};_c.$1Fk.prototype={$Gk:!1,$1C9:null,$3pu:null,$3L8:0,$17n:null,get_$Ru:function(){return 2},$7gU:function(n){return n.IncludesLastFolderInRange},$7oF:function(n){n(new _c.$1Fi(this.get_$J4(),this.$Gk))},$8Hg:function(){return new _e.$16Y(this.$Ce.get_$AU().get_$2r(),this.$1C9,this.$17n,this.$3L8)},$7ke:function(){return null},$7n3:function(){return new SyncState("FolderHierarchySyncStateId","")},$9js:function(n){if(!this.get_$AIO().RootFolder)throw Error.invalidOperation("Server returned null value for RootFolder in the SyncFolderHierarchy response. That should never happen");_e.$8H.$6ct(this.get_$AIO().RootFolder,0);Array.add(this.$1C9,this.get_$AIO().RootFolder);for(var r={},u=this.get_$AIO().Changes.Changes,t=0;t<u.length;t++){var f=u[t];switch(f.ChangeType){case"Create":case"Update":var i=f.Folder;if(i.DistinguishedFolderId==="outbox"){this.$17n=i.FolderId.Id;this.$3L8=t+1}_e.$8H.$6ct(i,t+1);Array.add(this.$1C9,i);r[i.FolderId.Id]=!0;break;case"Delete":break}}$B3(this,String.format("Number of created/updated folders = {0} and number of deleted folders = {1}",this.$1C9.length,this.$3pu.length));var o=this,e=this;this.$3I.$ER.$6or(r,function(){_c.$JX.prototype.$9js.call(o,n)},function(t){$1Kt(e,"An error occured during updating the sync folder settings: {0}",t.toString());_c.$JX.prototype.$9js.call(e,n)})},$80w:function(n){!n&&this.get_$AIO()&&this.$BD.$MA===1&&this.get_$AIQ().$3wq(this.get_$AIO());_c.$JX.prototype.$80w.call(this,n)},$80v:function(n){this.get_$AIO()&&!n&&this.get_$AIQ().$3wq(this.get_$AIO());_c.$JX.prototype.$80v.call(this,n)},$9pe:function(){this.$1C9=[];this.$3pu=[];_c.$JX.prototype.$9pe.call(this)}};_c.$1Fn=function(n,t){_a.$3.$K(n,"stepDelegate");this.$6iL=n;this.$3UN=t;this.$AG()};_c.$1Fn.prototype={$6iL:null,$3UN:null,$3UO:0,$1na:null,$3UL:0,$1n3:!1,get_$A4S:function(){return this.$6iL},get_$6eZ:function(){return this.$1n3&&this.$3UL<_h.$5J.$4Bc},set_$6eZ:function(n){this.$1n3=n;return n},get_$9qe:function(){return _h.$5J.$3UP},$6X8:function(){this.$3UO=0;this.$1na=null},$AG:function(){this.$3UL=0;this.$1n3=!0;this.$6X8()}};_c.$11v=function(n,t){_a.$3.$K(t,"ExternalSyncDependencies");this.$3I=t;this.$Qt=n||new _e.$eH(this.get_$5c(),this.$3yw())};function $6wP(n,t){var r=n.$3I.$F6.$84v(n.$3yw());if(t!==100){var i=_h.$5J.$2D6[n.get_$6jN()];i||t!==5||n.$44z||(i=_h.$5J.$4Vo);return n.get_$6jN()===1&&(n.$44z||t===2||t===7||t===8||t===9||t===11)||_a.$7.get_$2F().$5X()-r>i}else return!0}_c.$11v.prototype={$Qt:null,$3I:null,$44z:!0,get_$5c:function(){return this.$3I.get_$5c()},$9zO:function(n){return $6wP(this,n)},$9pX:function(){this.$44z=!1},$9zT:function(){return!0},$9zV:function(n){var t=OwaApplication.$4Y;return t.$4fv===n},$9zU:function(){return!1},$9zS:function(){return!1},$9zN:function(){return!1},$9zQ:function(){return!1},$9zR:function(){return!1},$9zM:function(n){return!1},$9yi:function(n){var t=!1;switch(n){case 1:t=!0;break;case 2:t=this.$9yl();break;case 4:t=this.$9yj();break;case 3:t=this.$9yk();break;default:break}return t},$9yl:function(){return!1},$9yj:function(){return!1},$9yk:function(){return!1},$4hK:function(n,t,i){n.$4bC(this)?this.$7oK(n,t,i):i(null)},$T3:function(n,t){var i=this,r=this;this.$Qt.$30p(function(r){var u=i.$3mH(n,r);t(u)},function(){t(!1)})},$1fE:function(n,t){var i=this,r=this;this.$Qt.$30p(function(r){var u=i.$3mH(n,r);var f=i.$85T(n,r);t(u,f)},function(){t(!1,null)})},$1Oz:function(){return _a.$7.get_utcNow().$5X()},$3mH:function(n,t){return t.IsSynced},$85T:function(n,t){return t.ModuleSpecificContext}};_c.$1G3=function(n,t){_c.$1G3.initializeBase(this,[n]);this.$5nc=t};_c.$1G3.prototype={$5nc:null,$5gb:function(n){var t=new _g.$hg(50);t.SyncState=this.get_$pd().State||"";t.JumpHeaderValues=this.$5nc;t.MaxPersonas=5e3;var i=new _g.$he(this.get_$70(),t);var r=new _g.$1G4(this.$2C);n.$6jT(i,r,this.$$d_$AJb,this.$$d_$9e1)}};_c.$1G5=function(){_c.$1G5.initializeBase(this,[null])};_c.$1G5.prototype={$5gb:function(n){var t=new _g.$xP(this.$2C);n.$1cw(t,this.$$d_$AJb,this.$$d_$9e1)}};_c.$1G6=function(n,t,i){_c.$1G6.initializeBase(this,[n,t,i])};_c.$1G6.prototype={get_$Ru:function(){return 7},$7gU:function(n){return!0},$7n3:function(){return new SyncState("PeopleFiltersSyncStateId","")},$7oF:function(n){n(new _c.$1G5)},$9z3:function(n){return n===2},$8Hg:function(){$B3(this,String.format("Number of created/updated people filters = {0}",this.get_$AIO().length));return new(_e.$NW.$$(_bc.$e9,_g.$fZ))(this.$Ce.get_$AU().get_$4SK(),this.get_$AIO())},$7ke:function(){return new(_e.$TM.$$(_bc.$e9))(this.$Ce.get_$AU().get_$4SK())},$5bk:function(n){var t=this;_c.$Io.$7ds(this.$3I.get_$5c(),function(){_c.$JX.prototype.$5bk.call(t,n)})}};_c.$1G7=function(n,t){_c.$1G7.initializeBase(this,[n,t])};_c.$1G7.prototype={get_$6jN:function(){return 1},$7oK:function(n,t,i){i([new _c.$1G6(n,t,this.$Qt)])},$9zP:function(n){return!1},$9yj:function(){return!0},$3yw:function(){return"PeopleFiltersSyncStateId"}};_c.$Kc=function(n,t,i,r,u){this.$2jh=0;_c.$Kc.initializeBase(this,[n,t,i]);this.$c=u;this.$3Us={};this.$1oV=0;this.$1oX=0;this.$5JP=r};function $4o1(n,t){t.length?n.get_$AIQ().$80p(t):$1Kt(n,"Contacts folder list should not be empty","")}function $6wV(n,t){var r=null;if(t){var u=$4o2(n);r={};for(var i=0;i<t.length;++i)r[u[i]]=t[i]}return r}function $4o2(n){return _a.$11.get_$DX().culture().people.headerSeekToValues}function $6wW(n){return!_js.$8.$a(n.get_$J4().State)}_c.$Kc.prototype={$3Us:null,$1oX:0,$1oV:0,$5JP:null,$c:null,get_$Ru:function(){return 8},$9z3:function(n){return n===2},$7gU:function(n){return n.IncludesLastItemInRange},$4UV:function(n){if(n.UserCultureAtLastSync&&n.UserCultureAtLastSync!==this.$3I.$FB){$SV(this,String.format("User culture has changed from '{0}' to '{1}', existing personas will be wiped",n.UserCultureAtLastSync,this.$3I.$FB));this.$2jh=1;var t=this;this.$Ce.$cV(3,this.$7ke(),function(){n.State="";t.$6Tj(n)},this.$$d_$6iT)}else this.$6Tj(n)},$7oF:function(n){var t=$6wW(this)?null:$4o2(this);n(new _c.$1G3(this.get_$J4(),t))},$ABp:function(){var n=this.get_$TN();n.set_$4i9(this.$1oX);n.set_$5Of(this.$1oV);n.set_$AG2(this.$2jh)},$7mt:function(){return new _c.$1G8(this.get_$Ru())},$8Hg:function(){return new _e.$ff(_e.$6P.$E(this.$Ce.get_$AU()),new _e.$AE(this.$Ce.get_$AU()),this.$Ce.get_$AU().get_$3nE(),this.$Ce.get_$AU().get_$6Ps(),this.get_$AIO().People,this.get_$AIO().DeletedPeople,$6wV(this,this.get_$AIO().JumpHeaderSortKeys))},$9js:function(n){if(this.get_$J4().SortKeyVersionAtLastSync!==SyncState.$4N9&&this.get_$AIO().SortKeyVersion!==this.get_$J4().SortKeyVersionAtLastSync){$SV(this,String.format("Sort key version has changed from '{0}' to '{1}', existing personas will be wiped",this.get_$J4().SortKeyVersionAtLastSync,this.get_$AIO().SortKeyVersion));this.$2jh=4;var i=this;this.$Ce.$cV(3,this.$7ke(),function(){i.get_$AIO().SyncState="";i.get_$AIO().IncludesLastItemInRange=!1;_c.$JX.prototype.$9js.call(i,n)},this.$$d_$6iT);return}this.$1oX+=this.get_$AIO().People.length;this.$1oV+=this.get_$AIO().DeletedPeople.length;for(var t=0;t<this.get_$AIO().People.length;++t)for(var r=0;r<this.get_$AIO().People[t].FolderIds.length;++r)this.$3Us[this.get_$AIO().People[t].FolderIds[r].Id]=!0;$B3(this,String.format("Number of created/updated persona = {0} and number of deleted persona = {1}",this.get_$AIO().People.length,this.get_$AIO().DeletedPeople.length));_c.$JX.prototype.$9js.call(this,n)},$7XK:function(n){var t=n;if(t.get_$2ds()==="ErrorFullSyncRequiredException"||t.get_$2ds()==="ErrorTooManyContactsException"){_c.$23.$5T("Sync action failed with {0}, wiping the persona store",t.get_$2ds());this.$2jh=t.get_$2ds()==="ErrorFullSyncRequiredException"?2:3;var i=this;this.$Ce.$cV(3,this.$7ke(),function(){i.get_$J4().State="";_c.$JX.prototype.$7XK.call(i,n)},this.$$d_$6iT)}else _c.$JX.prototype.$7XK.call(this,n)},$80w:function(n){if(n===1&&_0365f.$5F.$C(this.$3Us)>0&&(this.$BD.$1x9||!this.$2Ek)){var t=[];var i=this.$3Us;for(var r in i){var u={key:r,value:i[r]};Array.add(t,u.key)}$B3(this,"Raising Persona notification for people synced folders");$4o1(this,t)}_c.$JX.prototype.$80w.call(this,n)},$80v:function(n){if(n===2||n===1){$B3(this,"Raising Persona notification for people all folders");$4o1(this,this.$5JP)}_c.$JX.prototype.$80v.call(this,n)},$7n3:function(){var n=new SyncState("PeopleSyncStateId",this.get_$AIO().SyncState);n.UserCultureAtLastSync=this.$3I.$FB;n.SortKeyVersionAtLastSync=this.get_$AIO().SortKeyVersion;return n},$7ke:function(){return new _e.$1CZ(_e.$6P.$E(this.$Ce.get_$AU()))},$1no:function(){this.$c.$5i(this.$c.get_$w4())&&this.$c.get_$w4().get_$2oP().get_$2oO()===1&&this.$c.get_$w4().$A5s();_c.$1E.prototype.$1no.call(this)},$6Tj:function(n){_c.$1E.prototype.$4UV.call(this,n)}};_c.$Io=function(n,t){_c.$Io.initializeBase(this,[n,t]);_a.$3.$K(t.$c,"NativeBridge should not be null.")};_c.$Io.$7ds=function(n,t){_e.$H9.$1cw(new(_e.$7t.$$(_bc.$e9,_e.$H9))(n,_e.$1n.$7s),function(i){for(var u=[],r=0;r<i.length;++r)if(_js.$8.$a(i[r].$3xl()))_c.$23.$ns("PeopleFilterItem entry folderId is empty");else{_c.$23.$5T("Caching contacts folder '{0}' ",i[r].$3xl());Array.add(u,i[r].$3xl())}_e.$8H.$1cZ(new _e.$ck(n,_e.$1n.$7s),"recipientcache",function(n){if(n){var i=n.get_$1y().toString();if(_js.$8.$a(i))_c.$23.$ns("RecipientCacheFolderItem folderId is empty");else{_c.$23.$5T("Cacheing recipient cache folder '{0}'.",i);Array.add(u,i)}}else _c.$23.$ns("RecipientCacheFolderItem is null");_c.$Io.$2r2=u;t()},function(n){_c.$23.$Ec("Failed to fetch the recipient cache folder. Error: {0}",n);t()})},function(n){_c.$23.$Ec("Failed to get all folders. Error: {0}",n);t()})};_c.$Io.prototype={get_$6jN:function(){return 1},$7oK:function(n,t,i){i([new _c.$Kc(n,t,this.$Qt,_c.$Io.$2r2,this.$3I.$c)])},$9zP:function(n){_c.$23.$5T("Checking if sync people should occur for folder '{0}'",n);return Array.contains(_c.$Io.$2r2,n)},$9yj:function(){return!0},$3yw:function(){return"PeopleSyncStateId"}};_c.$1GA=function(n,t,i){_c.$1GA.initializeBase(this,[n,t,i])};_c.$1GA.prototype={get_$Ru:function(){return 3},$7gU:function(n){return!0},$7oF:function(n){n(new _c.$u4(this.get_$J4(),this.$3I.$1A.get_$6n()))},$9z3:function(n){return n===1},$ABp:function(){this.get_$AIO()&&this.get_$TN().set_$4i9(this.get_$AIO().Reminders.length)},$8Hg:function(){$B3(this,String.format("Number of created reminders = {0}",this.get_$AIO().Reminders.length));return new(_e.$NW.$$(_bc.$YF,_g.$Od))(this.$Ce.get_$AU().get_$Iq(),this.get_$AIO().Reminders)},$7ke:function(){return new(_e.$TM.$$(_bc.$YF))(this.$Ce.get_$AU().get_$Iq())},$80w:function(n){n===1&&this.get_$AIO()&&this.get_$AIO().Reminders.length>0&&(this.$BD.$1x9||!this.$2Ek)&&this.get_$AIQ().$2O0();_c.$JX.prototype.$80w.call(this,n)},$80v:function(n){(n===2||n===1)&&this.get_$AIQ().$2O0();_c.$JX.prototype.$80v.call(this,n)},$5bj:function(n){if(this.$BD.$MA===1){$B3(this,"Generating reminder notification on sync aborted");this.get_$AIQ().$2O0()}_c.$JX.prototype.$5bj.call(this,n)},$7n3:function(){return new SyncState("RemindersSyncStateId","")}};_c.$u4=function(n,t){_c.$u4.initializeBase(this,[n]);this.$20o=t};function $6wY(n){var t=new _g.$ML(n.get_$70());var i=_a.$7.get_$2F().$2w(14);t.Body.EndTime=_a.$7.$Ex(i);t.Body.ReminderType=0;t.Body.MaxItems=_e.$Aa.$3AJ;n.$20o&&(t.Body.ReminderGroupType=0);return t}_c.$u4.prototype={$20o:!1,$5gb:function(n){var t=$6wY(this);var i=new _g.$xQ(this.$2C);n.$14j(t,i,this.$$d_$AJb,this.$$d_$9e1)}};_c.$1GB=function(n,t){_c.$1GB.initializeBase(this,[n,t])};_c.$1GB.prototype={get_$6jN:function(){return 0},$7oK:function(n,t,i){i([new _c.$1GA(n,t,this.$Qt)])},$9zP:function(n){return!1},$9zU:function(){return!0},$9zM:function(n){return n==="Reminders"},$3yw:function(){return"RemindersSyncStateId"}};_c.$23=function(){};_c.$23.$165=function(n){for(var i=[],t=1;t<arguments.length;++t)i[t-1]=arguments[t]};_c.$23.$5T=function(n){for(var i=[],t=1;t<arguments.length;++t)i[t-1]=arguments[t];_js.Trace.logInfo(_c.$1p.$A,n,i)};_c.$23.$ns=function(n){for(var i=[],t=1;t<arguments.length;++t)i[t-1]=arguments[t];_js.Trace.logWarning(_c.$1p.$A,n,i)};_c.$23.$Ec=function(n){for(var i=[],t=1;t<arguments.length;++t)i[t-1]=arguments[t];_js.Trace.logError(_c.$1p.$A,n,i)};_c.$126=function(n,t){_c.$126.initializeBase(this,[2,0,!0,t]);this.$6jU=n};_c.$126.prototype={$6jU:0,get_$1y:function(){return"TimeBasedSyncContextId"},$4bC:function(n){return n.$9zV(this.$6jU)}};_c.$1p=function(n,t,i,r,u){this.$$d_$A5o=Function.createDelegate(this,this.$A5o);this.$$d_$9ZU=Function.createDelegate(this,this.$9ZU);this.$$d_$9Ky=Function.createDelegate(this,this.$9Ky);this.$$d_$4Py=Function.createDelegate(this,this.$4Py);this.$4fv=288e5;this.$5HI=144e5;this.$5rr=6048e5;this.$3Ux=new Sys.EventHandlerList;this.$3wb=new _c.$16g(_c.$1p.$6jO,_c.$1p.$5rt);_c.$1p.resolveInheritance();this.dispose=this.$1R;_c.$1p.initializeBase(this);_a.$3.$K(n,"ExternalSyncDependencies");_a.$3.$K(i,"taskRunner");this.$Gk=u;this.$3I=n;this.$z9=-1;this.$44=i;this.$1H=r;_h.$5J.$2a=t;_c.$23.$5T("SyncSettings IsEnabled :"+_h.$5J.$2a);_e.$1g.add_$4Py(this.$$d_$4Py);n.get_$Zt().add_$5iH(this.$$d_$9Ky);n.$F6.add_$AEa(this.$$d_$9ZU);n.$17W.$9md(this);this.$5Dg=new _c.$I9(n.$17W,n.$J,this,this.$3I.$13O);this.$3Uu=new Array(0);this.$4ea=new _c.$1Fe(this,n.$J,n.get_$1Bn(),_a.$g.$8n,n.$ER);this.$2D9=new _c.$u3(this,this.get_$1uN());this.$1fv=new _e.$l6(n.$4q);_h.$26.$4Wv(n.$8x);n.$2D5.$41(this);$6vy(this)};function $6w8(n,t){var i=this;return n.$44.$p3(_c.$1p.$A,"CleanupAndReconcilation",function(){_h.$5J.$2a&&n.$6S4(function(){$2kS(n,0,4)})},t)}function $2FA(n,t,i){_a.$3.$m(t,"context");var r=n.$3I.$ER.$453(n.$3I.get_$15G().Id);$4ns(n,0,n.get_$3Uv().$85S(t,n.get_$k8(),r,n.get_$1uN()),t,i)}function $6w5(n,t){var i=n.$1fv.$82M(n.$74);if(!i||!i.length){t();return}for(var e=0,c=this,o=function(t){_js.Trace.logInfo(_c.$1p.$A,"Removing {0} from ConfigCleanup list",_a.$Ad.toString(t));n.$1fv.$6W6(t)},s=new _c.$NY(4,n.$3I,o),f=i,h=f.length,u=0;u<h;++u){var r=f[u];var l=this;n.get_$iz()[r].$4hK(s,n.$$d_$A5o,function(u){if($5(u)||!u.length||$5(u[0])){_js.Trace.logWarning(_c.$1p.$A,"We can't get the CleanupModule base on SyncModuleType {0}",_a.$Ad.toString(r));n.$1fv.$6W6(r)}else for(var o=u,s=o.length,f=0;f<s;++f){var h=o[f];_js.Trace.logInfo(_c.$1p.$A,"Enqueuing {0} for ConfigChangeCleanup",_a.$Ad.toString(r));n.$2D9.$3u6(h)}++e===i.length&&t()})}}function $4nv(n,t){switch(t){case 5:case 12:case 4:case 11:break;default:throw Error.invalidOperation("We don't support VerifyEmailModuleFactory for "+_a.$Ad.toString(t));}}function $4nq(n){if(n.$4Us){_c.$23.$5T("Quota cleanup already in progress");return}if(n.get_$k8()<=5){_c.$23.$5T("Reached minimum module limit for cleanup");if(n.get_$mn().get_$2a()){var t=new _a.$R(1,"FatalQuotaError",_a.$7.get_$2F());n.get_$mn().$AP(t)}n.$3I.$J.$9lH(_h.$pg,new _h.$pg);$3Zz(n)}else{_c.$23.$5T("Start cleanup");n.$4Us=!0;var i=this;$6w2(n,n.get_$k8(),function(t){t.$6hx(function(){_c.$23.$5T("Quota Cleanup Succeeded, Module: {0}",t.get_$HS());n.set_$k8(n.get_$k8()-1);$3Zz(n);if(n.get_$mn().get_$2a()){var i=new _a.$R(1,"QuotaExceededError",_a.$7.get_$2F());n.get_$mn().$AP(i)}n.$3I.$ER.$5pz(_a.$Ad.toString(n.get_$k8()),_a.$g.$8n,!0)},function(i){_c.$23.$Ec("Quota Cleanup Failed, Module: {0}, Exception:{1}",t.get_$HS(),i.message);$3Zz(n)})})}}function $6w6(n,t){n.$3I.$F6.get_$1p4()&&_c.$23.$ns("Aborted syncing the module Id {0} due to error: {1} ",t.$2ZM,t.$EB?t.$EB.message:"");if(!n.$3I.$F6.get_$1A0()&&!n.$2Ht){var i=t.$EB;if(i)i.responseCode!=="ErrorTooManyContactsException"&&(n.$2Ht=!0);else{_c.$23.$ns("Can't cast error to ActionRecord for module {0}",t.$Ru);n.$2Ht=!0}}if(n.$G0.get_$5SL()){n.$G0.set_$5SL(!1);n.$2D9.$3u6(n.$G0)}$2FB(n)}function $2kS(n,t,i){if(n.get_$3Uy()){if(n.$G0&&!n.$G0.get_$Gg()){_c.$23.$ns("Module {0} is not active, lastHeartBeatTime = {1}. SyncManager continues to sync the next module.",n.$G0.get_$HS(),n.$G0.get_$5cl());n.$G0.$1jR(Error.create(String.format("Aborted by sync manager due to inactive,lastHeartBeatTime={0}, IsWaitingForActionQueue={1},IsHighPriorityActionEnqueued={2}",n.$G0.get_$5cl(),n.$G0.get_$8P8(),n.$3I.get_$Zt().get_$35Y())))}}else{var r=this;n.$3V3=n.$44.$1s(_c.$1p.$A,"SyncNextModule",function(){n.$4ep=!0;_c.$23.$5T("Start a new sync session");n.$pe=i;(1===n.$pe||2===n.$pe||4===n.$pe)&&_a.$6.$1X(_c.$1p.$A,$4nt(n));$2FB(n)},t)}}function $2FB(n){if(n.$4Ut){n.$G0=null;n.$4ef=!0;$4nq(n)}else{_c.$23.$5T("Syncing next module");n.$G0=n.$2D9.$7rg();if(!n.$G0){$4nr(n,5,null);return}Array.add(n.$3Uu,n.$G0.get_$HS());$6wB(n)}}function $6wB(n){var t=n.$G0.get_$HS();if(n.$G0.get_$Ru()<=n.get_$k8()||n.$G0.$5ld()){var i=Math.floor(_a.$7.get_$2F().$5X()/6e4);if(n.$3wb.$8IU(i)){n.$3wb.$ADJ(i);var u=this;n.$44.$40(_c.$1p.$A,"SyncStartCurrentModule_"+t,function(){_js.Trace.logInfo(_c.$1p.$A,"{0}: Starting module {1}",_a.$7.get_$2F(),t);_a.$6.acsa(_a.$0.$QX,"SyncModule_"+t);_a.$T.set_$A5p(_a.$T.get_$MO());n.$G0.$y()})}else{_c.$23.$ns("Aborted module {0}, TrackingId {1} due to sync frequency throttling",t,n.$G0.get_$3WM());if(n.get_$mn().get_$2a()){var r=new _a.$R(1,"FrequencyThrottlingModuleAborted",_a.$7.get_$2F());n.get_$mn().$AP(r)}n.$G0.$4OP();$4nr(n,6,null)}}else{_c.$23.$ns("Aborted module {0}, TrackingId {1} because it is higher than the MaxSyncModuleType {2}",t,n.$G0.get_$3WM(),n.get_$k8());n.$G0.$4OP();$2FB(n)}}function $4nr(n,t,i){_c.$23.$5T("Sync session completed");$6wA(n);$6w4(n);(1===n.$pe||2===n.$pe||4===n.$pe)&&_a.$6.$19(null,$4nt(n));1!==n.$pe||t!==5||n.$2Ht||n.get_$3Uv().$9x7();$6w3(n,t,i)}function $6w4(n){if(n.$28d&&(n.$pe===6||n.$pe===1)){_a.$6.$2o9(n.$28d);_a.$T.$m3=n.get_$1Pe()?"ALT1":_a.$T.$m3;_a.$T.$4BB(2);n.$28d=null}}function $6wA(n){n.$3V3=null;n.$4ep=!1;Array.clear(n.$3Uu)}function $4ns(n,t,i,r,u){var f=this;n.get_$iz()[i[t]].$4hK(r,n.$$d_$A5o,function(f){if(f)for(var o=f,s=o.length,e=0;e<s;++e){var h=o[e];n.$2D9.$3u6(h)}++t<i.length?$4ns(n,t,i,r,u):u()})}function $4nu(n,t){_a.$3.$m(t,"e");_a.$3.$m(t.$Ru,"e");_a.$3.$m(t.$NV,"e.ModuleType");_c.$23.$165("Module {0}, TrackingId {1}, Event {2}",t.$Ru,t.$6Ej,_a.$Gi.toString(t.$NV));var i=n.$3Ux.getHandler(_a.$Ad.toString(t.$Ru).toLowerCase());if(i){_c.$23.$5T("Invoke sync progress event handler for moduleType: {0}, eventType: {1}",_a.$Ad.toString(t.$Ru),t.$NV);i(t)}}function $6w3(n,t,i){_c.$23.$165("Receiving sync completed event");var r=_a.$Se.$7oH(t,i);$4nu(n,r)}function $3Zz(n){n.$4Ut=!1;n.$4Us=!1;if(n.$4ef){_c.$23.$5T("Resuming sync after quota cleanup");n.$4ef=!1;$2FB(n)}}function $6w2(n,t,i){if(t===15||t===16||t===17||t===18||t===19)throw Error.argumentOutOfRange("ItemsMinimum and ItemsFull do not have factories and hence should never be provided to this method");var r=n.get_$iz()[t];var f=this;var u=new _c.$NY(1,n.$3I,function(n){});var e=this;r.$4hK(u,n.$$d_$A5o,function(n){i(n[0])})}function $6w9(n,t){var i=this;return n.$44.$p3(_c.$1p.$A,"SyncTimeBased",function(){_h.$5J.$2a&&$6w1(n,t,function(){$2kS(n,0,2)})},t)}function $6w1(n,t,i){_c.$23.$5T("Populate time based sync with period {0}",t);var r=this;$2FA(n,new _c.$126(t,n.$3I),function(){i()})}function $6vz(n,t){_c.$23.$5T("Populate periodic cleanup modules");var i=this,r=this;$2FA(n,new _c.$NY(2,n.$3I,function(n){}),function(){t()})}function $6w0(n,t){_c.$23.$5T("Populate periodic reconcile modules");var i=this;$2FA(n,new _c.$1DE(n.$3I),function(){t()})}function $6w7(n){if(!_js.$8.$a(n.get_$2NU())&&_a.$7.get_$2F().$5X()>_a.$7.$3x(n.get_$2NU()).$9v(n.$5rr).$5X()){_js.Trace.logInfo(_c.$1p.$A,"Reseting MaxSyncModule to its default value");n.set_$k8(_c.$1p.$1wc);n.set_$2NU(null);if(n.get_$mn().get_$2a()){var t=new _a.$R(1,"MaxSyncModuleReset",_a.$7.get_$2F());n.get_$mn().$AP(t)}}}function $4nt(n){return 1===n.$pe?"Core.Models.Sync.Full":3===n.$pe?"Core.Models.Sync.NotificationBased":2===n.$pe?"Core.Models.Sync.TimeBased":"Core.Models.Sync.Cleanup"}function $6vy(n){n.$3I.$F6.get_$3Lw()||n.$3I.$F6.set_$3Lw(n.get_$2ug()+144e5);n.$3I.$F6.get_$3Lv()||n.$3I.$F6.set_$3Lv(n.get_$2ug()+288e5)}_c.$1p.prototype={$3I:null,$44:null,$1H:null,$Gk:!1,$2yE:null,$G0:null,$2D9:null,$3V3:null,$4Ut:!1,$4Us:!1,$4ef:!1,$z9:0,$2NT:null,$6kC:null,$6kB:null,$2aB:null,$4ed:null,$2Ht:!1,$pe:0,$74:null,$4ea:null,$4ep:!1,$3Uu:null,$1fv:null,$28d:null,$G6:!1,$5Dg:null,get_$1Qe:function(){return!!this.$G0&&this.$G0.get_$1Qe()},get_$7p6:function(){return this.$G0.get_$HS()},get_$3Uy:function(){return!!this.$3V3},set_$3Uy:function(n){this.$3V3=n?new _js.$Zf(null):null;return n},get_$1Pe:function(){return!this.get_$3Uv().get_$1A0()},get_$1uN:function(){return this.$3I.$vW.get_$2Gk()},get_$iz:function(){$5(this.$2yE)&&(this.$2yE=this.$7ld());return this.$2yE},set_$iz:function(n){this.$2yE=n;return n},get_$A5h:function(){return this.$3I.$2D5},get_$5c:function(){return this.$3I.get_$5c()},get_$1dn:function(){return this.$G6},get_$k8:function(){if(this.$z9===-1){var n=this.get_$1fu().$3f("MaxSyncModuleType");this.$z9=_js.$8.$a(n)?_c.$1p.$1wc:parseInt(n)}return this.$z9},set_$k8:function(n){_a.$3.$85(n,0,_c.$1p.$1wc,"MaxSyncModuleType");this.$z9=n;this.get_$1fu().$DQ("MaxSyncModuleType",n.toString());_c.$23.$5T("Set local storage maxSyncModuleType = {0}",n);return n},get_$2NU:function(){_js.$8.$a(this.$2NT)&&(this.$2NT=this.get_$1fu().$3f("FirstQuotaExceededErrorTime"));return this.$2NT},set_$2NU:function(n){if(_js.$8.$a(n)){this.get_$1fu().$D9("FirstQuotaExceededErrorTime");this.$2NT=n}else{_a.$7.$3x(n);this.$2NT=n;this.get_$1fu().$DQ("FirstQuotaExceededErrorTime",n);_c.$23.$5T("Set local storage FirstQuotaExceededErrorTime = {0}",n)}return n},get_$3Uv:function(){this.$4ed||(this.$4ed=this.$7oJ());return this.$4ed},get_$19J:function(){return this.$74},set_$19J:function(n){this.$74=n;return n},get_$9Ko:function(){return this.$3I.$17W},get_$AAV:function(){return this.$3I.$vW},get_$2ug:function(){return _a.$7.get_utcNow().$5X()},get_$6GY:function(){$5(this.$2aB)&&(this.$2aB=this.$7oL());return this.$2aB},get_$Zt:function(){return this.$3I.get_$Zt()},get_$mn:function(){return this.$3I.$13O},get_$1fu:function(){return this.$3I.$4q},$1lQ:function(n,t){_a.$3.$m(n,"type");_a.$3.$m(t,"handler");this.$3Ux.addHandler(_a.$Ad.toString(n).toLowerCase(),t)},$2iv:function(n,t){_a.$3.$m(n,"type");_a.$3.$m(t,"handler");this.$3Ux.removeHandler(_a.$Ad.toString(n).toLowerCase(),t)},$y:function(){_js.Trace.logInfo(_c.$1p.$A,"Starting the sync manager");this.$74=_a.$7.$aV(_a.$7.get_$2F());if(!_h.$5J.$2a){_js.Trace.logInfo(_c.$1p.$A,"Sync is disabled");return}this.$G6=!0;this.$3I.$2D5.$3zr(1);this.$A51();this.$3I.$1A.get_$6n()||this.$9s7();this.$4ea.$A50()},$1Ji:function(n){_a.$3.$K(n,"onSyncStopped");_c.$23.$5T("Stopping");_h.$5J.$2a=!1;this.$AG();if(this.get_$3Uy()){_c.$23.$5T("Wait for sync complete");if(this.$G0)_c.$23.$5T("The current sync module : {0}, StartTime {1}",this.$G0.get_$HS(),this.$G0.get_$A5w());else{var t=new Sys.StringBuilder;t.appendLine("SyncSession is on while currentSyncModule is null.");t.appendLine(String.format("SyncTimerCallbackInvoked:{0}",this.$4ep));t.appendLine(String.format("SyncModuleLogForCurrentSyncSession:{0}",this.$3Uu));_c.$23.$Ec(t.toString())}var i=this;this.$1lQ(20,function(t){t.$NV===5&&n()})}else n()},$T3:function(n,t,i){_a.$3.$K(t,"context");_a.$3.$K(i,"syncStatusCallback");this.get_$iz()[n].$T3(t,i)},$1fE:function(n,t,i){_a.$3.$K(t,"context");_a.$3.$K(i,"syncStatusCallback");this.get_$iz()[n].$1fE(t,i)},$84t:function(n,t,i){$4nv(this,n);var r=null;r=this.get_$iz()[n];r.$84u(t,i)},$6W3:function(n,t){_a.$3.$9t(_bc.$IH.isInstanceOfType(t),"The context type should match the module.");var i=t;_a.$3.$K(i.FolderId,"Invalid call to IsSynced with no folder ID specified.");$4nv(this,n);_js.Trace.logInfo(_c.$1p.$A,"Removing Folder {0} SyncState for module {1}",i.FolderId.Id,_a.$Ad.toString(n));var r=null;r=this.get_$iz()[n];r.$6W3(t)},$4Py:function(){_c.$23.$5T("OnQuotaExceeded");_js.$8.$a(this.get_$2NU())&&this.set_$2NU(_a.$7.get_$2F().$9L());this.$4Ut=!0;this.$G0&&this.$G0.get_$Gg()||$4nq(this)},$2fq:function(n,t){_a.$3.$K(n,"syncContext");if(!_h.$5J.$2a||n.get_$2zX())return!1;for(var i=0;i<this.get_$k8();i++)if(n.$4bC(this.get_$iz()[i])&&!_c.$11k.isInstanceOfType(this.get_$iz()[i])){var r=_c.$11u.isInstanceOfType(this.get_$iz()[i])||_c.$11o.isInstanceOfType(this.get_$iz()[i])||_c.$11t.isInstanceOfType(this.get_$iz()[i])||_c.$11m.isInstanceOfType(this.get_$iz()[i]);return r&&!t?!1:!0}return!1},$11T:function(n){_a.$3.$K(n,"syncContext");_c.$23.$5T("Starting {0} sync",_a.$Or.toString(n.get_$19S()));this.$AA6(n)},$A4C:function(){_c.$23.$5T("Handling user refresh event");this.$11T(new _c.$10o(this.$3I))},$A45:function(){this.$11T(new _c.$1C2(this.$3I))},$1WD:function(n){if(!_h.$5J.$2a){_js.Trace.logInfo(_c.$1p.$A,"Sync is disabled");return}this.$28d=this.$28d||_a.$6.$2oA(_a.$0.$S2,"Sync");_a.$T.set_$3Uz(_a.$Sf.toString(n));_a.$T.set_$19S(_a.$Or.toString(1));_a.$T.set_$6jQ(_a.$T.get_$MO());_c.$23.$5T("Starting full sync {0}",_a.$Sf.toString(n));this.$2Ht=!1;var t=this;$6w5(this,function(){$2FA(t,new _c.$ps(t.$3I,n),function(){t.$6S4(function(){$2kS(t,0,1)})})})},$9s7:function(){_c.$23.$5T("Schedule periodic sync, cleanup and reconcilation...");this.$6kC=$6w9(this,this.$4fv);this.$6kB=$6w8(this,this.$5HI)},$6i2:function(n){this.$11T(new _c.$U9(n,!0,this.$3I))},$A4B:function(){this.$28d=_a.$6.$2oA(_a.$0.$S2,"Sync");_a.$T.set_$19S(_a.$Or.toString(6));_a.$T.set_$6jQ(_a.$T.get_$MO());this.$11T(new _c.$mJ(this.$3I))},$7vM:function(){if(!_h.$5J.$2a){_c.$23.$5T("Enable sync manager");_h.$5J.$2a=!0;this.$AG();this.$1WD(2)}},$AG:function(){_js.Trace.logInfo(_c.$1p.$A,"Resetting sync state");$6w7(this);this.$2D9.$1t()},$49:function(){_c.$23.$165("SyncManager is disposing");this.$5Dg.$1R();this.$4ea.dispose();_e.$1g.remove_$4Py(this.$$d_$4Py);this.get_$Zt().remove_$5iH(this.$$d_$9Ky);this.$44.$5A(this.$6kC);this.$44.$5A(this.$6kB);this.$AB1();this.$3I.$17W.$AAu(this);this.$2aB=null},$7ld:function(){var n=new Array(_c.$1p.$1wc+1);n[0]=new _c.$1G2(null,this.$3I);n[1]=new _c.$1GE(null,this.$3I);n[2]=new _c.$1Fl(null,this.$3I,this.$Gk);n[3]=new _c.$1GB(null,this.$3I);n[4]=new _c.$11o(null,this.$3I,this.$1H);n[5]=new _c.$11u(null,this.$3I,this.$1H);n[6]=new _c.$1Fh(null,this.$3I);n[7]=new _c.$1G7(null,this.$3I);n[8]=new _c.$Io(null,this.$3I);n[9]=new _c.$1FS(null,this.$3I);n[10]=new _c.$DF(null,this.$3I,this.$1H);n[11]=new _c.$11m(null,this.$3I,this.$1H);n[12]=new _c.$11t(null,this.$3I,this.$1H);n[13]=new _c.$1G0(null,this.$3I);n[14]=new _c.$11k(null,this.$3I);return n},$7oL:function(){var n=new Array(6);n[0]=new _c.$u2(this.get_$5c(),this,this.$3I);n[1]=new _c.$1G9(this,this.$3I);n[2]=new _c.$hh(this,this.$3I);n[3]=new _c.$1FU(this,this.$3I);n[4]=new _c.$1FT(this,this.$3I);n[5]=new _c.$1FN(this,this.$3I);return n},$7oJ:function(){return _c.$N9.$E(this.$3I.$F6,this.$3I.$J)},$6S4:function(n){var t=this;$6vz(this,function(){$6w0(t,function(){n()})})},$A5o:function(n){_a.$3.$K(n,"e");$4nu(this,n);if(n.$NV===1||n.$NV===2||n.$NV===6||n.$NV===3)if(this.$G0){if(n.$2ZM!==this.$G0.get_$1y()){_c.$23.$ns("Ignore event {0} from moduleId {1}  since it is different from currentSyncModuleId:{2}",_a.$Gi.toString(n.$NV),n.$2ZM,this.$G0.get_$1y());return}}else{_c.$23.$ns("Ignore event {0} from moduleId {1}  since CurrentSyncModule is null",_a.$Gi.toString(n.$NV),n.$2ZM);return}if(n.$NV===6)$6w6(this,n);else if(n.$NV===3){var t=this.get_$iz()[n.$Ru];t&&t.$9pX();$2FB(this)}},$A51:function(){for(var i=this.get_$6GY(),u=i.length,t=0;t<u;++t){var r=i[t];var n=r;this.$3I.$17W.$9mc(r.get_$1HM(),n.$$d_$3zz||(n.$$d_$3zz=Function.createDelegate(n,n.$3zz)))}},$AB1:function(){if(!$5(this.$2aB))for(var t=this.get_$6GY(),i=t.length,n=0;n<i;++n){var r=t[n];this.$3I.$17W.$AAt(r.get_$1HM())}},$AA6:function(n){if(!_h.$5J.$2a){_js.Trace.logInfo(_c.$1p.$A,"Sync is disabled");return}var t=this;$2FA(this,n,function(){$2kS(t,n.get_$7qT()?500:0,n.$MA)})},$9Ky:function(n,t){_c.$23.$5T(Object.getType(n).getName()+"."+t+" changed");this.get_$Zt().get_$Cb()&&this.$G0&&this.$G0.$7j2()},$9ZU:function(n){n||this.get_$3Uv().$9qi()}};_c.$n8=function(n,t,i,r){_c.$n8.initializeBase(this,[n,t,i,r]);for(var u=null,f=new Array(0),s=t,h=s.length,e=0;e<h;++e){var o=s[e];o===_g.$h.$1i.nameToId("sentitems").Id?u=o:Array.add(f,o)}if(u)if(f.length)if(this.$3I.get_$15G().Id===u){this.set_$xe([u]);this.$1wo=f;this.$1er=!0}else{this.set_$xe(f);this.$1wo=[u];this.$1er=!0}else{this.set_$xe([u]);this.$1er=!1}else{this.set_$xe(f);this.$1er=!1}};function $6vp(n){if(n.$7d){var t=_a.$7.get_$2F();n.$7d.$Cx.set_$3W4(t.$5X()-n.$7d.$1Zv);var i=String.format("{0}, TT:{1}(ms), TTBT={2}, C={3}, CNC={4}, CN={5}, M={6}, TS={7}, I={8}",_a.$7.$Ex(t),n.$7d.$Cx.get_$3W4(),n.$7d.$Cx.get_$6ks(),n.$7d.$Cx.get_$2aE(),n.$7d.$Cx.get_$3Ig(),n.$7d.$Cx.get_$3If(),n.$7d.$Cx.get_$1jG(),n.$7d.$Cx.get_$2aG(),n.$7d.$Cx.get_$6Go());n.$7d.$1fu.$DQ("LastSuccessfullEmailCleanup",i);_js.Trace.logInfo(_a.$0.$5c,"Completed full email cleanup, time taken {0} ms",n.$7d.$Cx.get_$3W4());n.$7d.$A4u()}}_c.$n8.prototype={$1er:!1,$7d:null,$1wo:null,get_$Ru:function(){return 11},get_$8Mz:function(){return this.$1er},get_$8KX:function(){return!this.$1wo&&this.get_$AIO().IncludesLastItemInRange},$7gU:function(n){if(n.IncludesLastItemInRange)if(this.$1wo){this.set_$xe(this.$1wo);this.$1wo=null;return!1}else return!0;else return!1},$7ke:function(){this.$7d=new _e.$15y(this.$BD.$1Mf,this.$Ce.get_$AU(),"ConversationSyncStateId","MessageSyncStateId",_g.$h.$1i,this.get_$mn(),_h.$26.$19Q,_h.$26.$2DB,this.$3I.$4q);return new _e.$CP(this.$7d)},$5bk:function(n){$6vp(this);_c.$u0.prototype.$5bk.call(this,n)},$9MP:function(){if(this.$BD.$MA===4&&this.$BD.$1Mf===2){var n=this.$1Oz()+144e5;this.$3I.$F6.set_$3Lw(n);$B3(this,String.format("Next email cleanup time {0} utc ms",n))}_c.$JX.prototype.$9MP.call(this)}};_c.$Oq=function(n,t,i,r){this.$$d_$83K=Function.createDelegate(this,this.$83K);this.$1uD=[];this.$2uR=_a.$3r.$$(Boolean).$8V();this.$1vf=[];this.$2w3={};_c.$Oq.initializeBase(this,[n,t,i]);this.$1H=r};function $6vs(n){if($5(n.$1vf)||!n.$1vf.length){n.$hb();return}var t=new _c.$hd(n.get_$Ru(),n.$1vf,_h.$v.$5XM(n.$1H.get_$Bk()),"EditableItems");t.add_$29(n.$$d_$83K);t.add_$21(n.$$d_$7XK);OwaApplication.$1W.$11(t)}function $6vr(n){for(var i=Math.min(_h.$26.$1Qo,n.get_$1tu().length),r=new Array(i),t=0;t<i;t++){var u=n.get_$1tu()[t];var f=new _g.$TW(u);f.SyncState=$4nn(n).$5Jr[u.Id]||"";r[t]=f}return r}function $6vq(n,t){var i=t.ConversationId.Id;var r=$4nn(n).$5Gj;if($5(r[i]))throw Error.invalidOperation("Last modified time for conversation not available. This should never happen. Conversation Id = "+i);t.LastModifiedTime=r[i]}function $4nn(n){return n.get_$J4()}_c.$Oq.prototype={$1H:null,$3W9:0,get_$4gm:function(){return this.get_$AIz()},get_$1tu:function(){return this.get_$AJ0()},$7oF:function(n){var t=$6vr(this);_c.$23.$5T("Creating SyncConversationItems action for {0} items",t.length);var r=_h.$v.get_$38C();var u=_h.$26.$3Ut?"ItemPartNormalizedBody":"ItemPartUniqueBody";var f=this.$BD.$3I.$4U.$3N("ModernMail");var i=0;f&&(i=1);var e=new _c.$1FY(t,20,r,u,i);n(e)},$7ke:function(){return null},$8Hg:function(){return new _e.$bH(this.$Ce.get_$AU(),this.get_$AIy(),this.$1uD,this.$2uR,this.get_$1P())},$9js:function(n){$B3(this,"Process current SyncConversationItems response");for(var s={},h=!1,f=0;f<this.get_$AIO().length;f++){var c=this.get_$AIO()[f];if(c.ResponseClass!=="Success"){h=!0;continue}var i=c.Conversation;s[i.ConversationId.Id]=!0;if(i.ConversationNodes){$6vq(this,i);Array.add(this.get_$AIy(),i);for(var l=i.ConversationNodes,a=l.length,e=0;e<a;++e){for(var r=l[e],u=0;u<r.Items.length;u++){var t=r.Items[u];if(_g.$h.$1i.doesIdEqualName(t.ParentFolderId,"drafts")){var o=t.ItemId.Id;if($5(this.$2w3[o])){this.$2w3[o]=!0;var v=new _g.$1t(o);Array.add(this.$1vf,v)}}_js.Trace.logInfo(_c.$1p.$A,"Setting item IsDataSynced flag to true for conversation item parts");_e.$By.$2fN(t,CustomSyncData.$1uW,1);var y=_e.$PN.$5Ld(t);Array.add(this.$1uD,t);this.$2uR.set_$3o(t.ItemId.Id,!0);r.Items[u]=y}this.$3W9+=r.Items.length}}this.set_$AIz(this.get_$AIz()+1)}h&&this.$AJ2(this.get_$1tu(),s);this.$AJ3(this.$1uD);_c.$JX.prototype.$9js.call(this,n)},$7n3:function(){return new ConversationItemSyncState(this.get_$1tu(),null,null)},$7mt:function(){return new _c.$1Fb(this.get_$Ru())},$ABp:function(){var n=this.get_$TN();n.set_$7jF(this.get_$4gm());n.set_$8PT(this.$3W9);_c.$23.$5T(this.get_$HS()+" module data point: Synced "+this.get_$4gm()+" conversations and "+this.$3W9+" item parts")},$9pe:function(){this.$1uD=[];this.$2uR=_a.$3r.$$(Boolean).$8V();this.$1vf=[];this.$2w3={};_c.$Qd.prototype.$9pe.call(this)},$7gI:function(n){return n?_h.$26.$3Ut?n.IsInlineToNormalBody:n.IsInlineToUniqueBody:!1},$9gV:function(){$6vs(this)},$83K:function(n){$1AJ(this,"SyncItems action completed event received for editable items (drafts)");for(var i=n.$Ck,r=0;r<i.length;r++){var t=i[r].Items;if(t&&t.length>0){_js.Trace.logInfo(_c.$1p.$A,"Setting item IsDataSynced flag to true for editable items");_e.$By.$2fN(t[0],CustomSyncData.$1uW,2);Array.add(this.$1uD,t[0])}}this.$3W9+=i.length;this.$hb()}};_c.$1Fc=function(n,t,i,r){_c.$1Fc.initializeBase(this,[n,[t],i,r])};_c.$1Fc.prototype={get_$Ru:function(){return 4},get_$8Mz:function(){return!0},$9z3:function(n){return this.$BD.$MA!==3&&!n},$7gU:function(n){return!0}};_c.$11p=function(n,t,i,r){_c.$11p.initializeBase(this,[n,t,i,r])};function $6vt(n,t,i,r,u){if(i)if(r){for(var h=i,c=i,p=c.length,f=0;f<p;++f){var e=c[f];e.LastSuccessfulSyncTime=_a.$7.$Ex(_a.$7.get_$2F());e.SyncMinimum=_h.$26.$19Q;e.SyncMaximum=_h.$26.$1Jq}for(var l=r,w=l.length,o=0;o<w;++o){for(var a=l[o],v=!1,y=i,b=y.length,s=0;s<b;++s){var k=y[s];if(k.FolderId.Id===a.FolderId.Id){v=!0;break}}v||Array.add(h,a)}t.ModuleSpecificContext=h}else t.ModuleSpecificContext=i;else t.ModuleSpecificContext=r}_c.$11p.prototype={$7oF:function(n){var t=new _c.$1FX(this.get_$xe(),this.get_$J4(),_h.$26.$1WT,this.get_$8Mz(),_c.$mJ.isInstanceOfType(this.$BD));n(t)},$8Hg:function(){return new _e.$TX(this.$Ce.get_$AU().get_$Jl(),this.get_$AJ5().get_$AGd(),this.get_$AJ5().get_$AGe())},$9js:function(n){this.set_$AJ5(new _c.$hS(this.get_$AIO()));this.get_$AJ5().$29F();var r=this.get_$AJ5().get_$AGd().length;this.set_$AJ7(this.get_$AJ7()+this.get_$AJ5().get_$AGe().length);if(r>0){this.set_$AJ6(this.get_$AJ6()+r);for(var i=this.get_$AJ5().get_$AGf(),t=0;t<i.length;t++)Array.contains(this.get_$AJ4(),i[t])||Array.add(this.get_$AJ4(),i[t])}_c.$JX.prototype.$9js.call(this,n)},$7n3:function(){var n=new SyncState("ConversationSyncStateId",this.get_$AJ5().get_$pd());$6vt(this,n,this.get_$AJ5().get_$AGc(),this.get_$J4()?this.get_$J4().ModuleSpecificContext:null,this.get_$xe());return n},$7ke:function(){return null}};_c.$1Fd=function(n){_c.$1Fd.initializeBase(this,[n])};_c.$1Fd.prototype={get_$5nM:function(){return this.$W("is")},set_$5nM:function(n){$1I(this,"is",n);return n},$5Ur:function(n){n&&$1I(this,"fs",n.join())}};_c.$13X=function(n,t,i,r){_c.$13X.initializeBase(this,[1,"Core.Models.Sync."]);this.set_$A8b(n);this.set_$A8e(t);this.set_$9u2(i);this.set_$A7h(r)};_c.$13X.prototype={get_$A8b:function(){return this.$W("TAC")},set_$A8b:function(n){$1I(this,"TAC",n);return n},get_$A8e:function(){return this.$W("TCC")},set_$A8e:function(n){$1I(this,"TCC",n);return n},get_$A7h:function(){return this.$W("TIS")},set_$A7h:function(n){$1I(this,"TIS",n);return n},get_$9u2:function(){return this.$W("SI")},set_$9u2:function(n){$1I(this,"SI",n);return n}};_c.$I9=function(n,t,i,r){this.$$d_$8CY=Function.createDelegate(this,this.$8CY);this.$$d_$8AY=Function.createDelegate(this,this.$8AY);this.$$d_$8Az=Function.createDelegate(this,this.$8Az);_c.$I9.initializeBase(this);_a.$3.$K(n,"notificationHandler");_a.$3.$K(t,"eventAggregator");_a.$3.$K(i,"syncManager");_a.$3.$K(r,"dataPointTracker");this.$J=t;this.$EM=n;this.$4Y=i;this.$2uz=r;this.$15p=_a.$3r.$$(Array).$8V();this.$J.$Hd(_a.$jm,this.$$d_$8Az);this.$EM.$1IW("BackgroundSyncNotification",_c.$I9.$26h,"BackgroundSyncNotification",this.$$d_$8AY,2);this.$4Y.$1lQ(20,this.$$d_$8CY)};function $6v6(n,t){var f=t;var i=f.$uq;var c=new Array(0);var l=new Array(0);var r=0,u=0;if(n.$15p.$NO(i)){var k=n.$15p.get_$3o(i);n.$15p.$34(i);for(var a=_a.$3r.$$(Boolean).$8V(),v=k,d=v.length,e=0;e<d;++e){for(var y=v[e],p=y.$i4,g=p.length,o=0;o<g;++o){var w=p[o];++u<=5&&Array.add(l,w);a.set_$3o(w.$3D.toString(),!0)}for(var b=y.$1Zj,nt=b.length,s=0;s<nt;++s){var h=b[s];a.$NO(h.$3D.toString())?_js.Trace.logInfo(_c.$I9.$26h,"Skip the later change with newly added Id: {0}",h.$3D.toString()):++r<=5&&Array.add(c,h)}}}_js.Trace.logInfo(_c.$I9.$26h,"Raising BackgroundSyncCompleteEvent senderId:{0}, totalAddCount:{1}, totalChangeCount:{2}, Result:{3}",i,u,r,f.$Co);n.$J.$9lH(_a.$oO,new _a.$oO(i,f.$Co,l,c,r+u));var tt=new _c.$13X(u,r,i,_a.$7.get_utcNow().$5X()/1e3);n.$2uz.$AP(tt)}_c.$I9.prototype={$EM:null,$J:null,$4Y:null,$2uz:null,$15p:null,$49:function(){this.$J.$11q(_a.$jm,this.$$d_$8Az);this.$EM.$1oo("BackgroundSyncNotification",this.$$d_$8AY);this.$4Y.$2iv(20,this.$$d_$8CY)},$8AY:function(n){$6v6(this,n)},$8Az:function(n){_js.Trace.logInfo(_c.$I9.$26h,"Receiving DbTransactionItemInfoEvent SyncInitiatorId:{0}, Add Count:{1}, Changes Count:{2}",n.$1WW,n.$i4.length,n.$1Zj.length);var t;if(this.$15p.$NO(n.$1WW)){t=this.$15p.get_$3o(n.$1WW);Array.add(t,n)}else t=[n];this.$15p.set_$3o(n.$1WW,t)},$8CY:function(n){if(n.$NV===5&&this.$15p.$AHc()>0){_js.Trace.logWarning(_c.$I9.$26h,"ItemInfoCount= {0} when sync session completes",this.$15p.$AHc().toString());this.$15p=_a.$3r.$$(Array).$8V()}}};function CoreSyncComponent(){}CoreSyncComponent.prototype={$1aH:function(n,t,i){var r=this;n.$Ax(_c.$AF).$AHm(ISyncFolderSettingProcessor).$AHn().$AHo(function(){return new _c.$AF(n.$2AC(_a.$O0),n.$2AC(_0365f.$L))});var u=this;n.$Ax(_c.$11l).$AHm(ISyncController).$AHo(function(){return new _c.$11l(n.$2AC(_0365f.$L))});var f=this;n.$Ax(_c.$lg).$AHm(INotificationHandlerProxyFactory).$AHo(function(){return new _c.$lg});var e=this;n.$Ax(_c.$11s).$AHm(ISyncManagerFactory).$AHm(ISyncManagerSingleton).$AHn().$AHo(function(){return new _c.$11s(n.$2AC(ISyncFolderSettingProcessor),n.$2AC(ISyncController),n.$2AC(_a.$O0),n.$2AC(_h.$O4),n.$2AC(_a.$4g),n.$2AC(IAttachmentsCleanupManager),_a.$g.$8n,n.$2AC(_a.$k),n.$2AC(_js.$Bt),n.$2AC(_0365f.$L),n.$2AC(_a.$38),n.$2AC(_a.$Dy))})},$82P:function(){return[]}};_c.$DZ=function(n,t,i,r,u,f){this.$$d_$A5u=Function.createDelegate(this,this.$A5u);this.$$d_$8C5=Function.createDelegate(this,this.$8C5);_c.$DZ.resolveInheritance();this.dispose=this.$1R;_c.$DZ.initializeBase(this,[n,t,i,r,u]);this.$2P7={};this.$2D7={};this.$5iF=f;this.$6GR=this.$7n5();this.get_$gw().$9mY(this.$$d_$8C5);$6vc(this)};function $4nf(n,t,i){if(t.id==="BackgroundSyncNotification"){var r=t;r.$Co=i;return!0}return!1}function $6vc(n){var t=n.$NE;for(var i in t){var r={key:i,value:t[i]};var u=n.$NE[r.key];$4ng(n,u)}}function $4ng(n,t){if($4ne(n,t)){var i=t.get_$o();if(!$5(i)){_js.Trace.logInfo(_a.$0.$5o,"Granular notification is subscribed for folder id : {0}",i);n.$2P7[i]=!0}}}function $4ne(n,t){var r=t.get_$1HM().toLowerCase();if(r===_c.$DZ.$6YN){var i=t.$3E;return!$5(i)&&!$5(i.Filter)?i.Filter==="All":!0}else return r===_c.$DZ.$5FJ}_c.$DZ.prototype={$2P7:null,$2D7:null,$5iF:!1,$6GR:null,$5oB:0,get_$5iE:function(){return this.$5iF},get_$38c:function(){return this.$5oB},set_$38c:function(n){this.$5oB=n;return n},get_$gw:function(){return this.$6GR},get_$5ah:function(){return this.$2P7},$nH:function(n){_a.$3.$K(n,"notification");_js.Trace.logInfo(_a.$0.$5o,"Handling notification: {0}, ClientGenerated: {1}",n.id,n.clientGenerated);if(!n.clientGenerated){var i=this.$NE[n.id];var t=null;i?t=this.$2D7[i.get_$1HM().toLowerCase()]:n.id==="BackgroundSyncNotification"&&(t=this.$2D7[n.id.toLowerCase()]);if(!$5(t)){var r=this;t(n,this,function(n){$4nf(r,n,1);_a.$fH.prototype.$nH.call(r,n)});return}_js.Trace.logInfo(_a.$0.$5o,"No Sync callback registered for notification: {0}",n.id)}_a.$fH.prototype.$nH.call(this,n)},$3OA:function(n){_js.Trace.logInfo(_a.$0.$5o,"[NotificationHandlerProxy::RegisterSubscription] Adding subscription id : {0}",n.get_$IA());$4ng(this,n);_a.$fH.prototype.$3OA.call(this,n)},$8C5:function(n,t){_a.$3.$K(n,"notification");_a.$3.$pj(n.clientGenerated,!0,"notification.ClientGenerated");($4nf(this,n,t)||!t)&&_a.$fH.prototype.$nH.call(this,n)},$9mc:function(n,t){_a.$3.$1G(n,"notificationType");_a.$3.$K(t,"callback");_js.Trace.logInfo(_a.$0.$5o,"Registering sync notification handler for notification type {0}",n);this.$2D7[n.toLowerCase()]=t},$AAt:function(n){_a.$3.$1G(n,"notificationType");_js.Trace.logInfo(_a.$0.$5o,"Unregistering sync notification handler for notification type {0}",n);$5(this.$2D7[n.toLowerCase()])||delete this.$2D7[n.toLowerCase()]},$9md:function(n){_a.$3.$m(n,"syncManager");_js.Trace.logInfo(_a.$0.$5o,"Registering sync progress event handlers for all modules");for(var t=0;t<20;t++)n.$1lQ(t,this.$$d_$A5u)},$AAu:function(n){_a.$3.$m(n,"syncManager");_js.Trace.logInfo(_a.$0.$5o,"Unregistering sync progress event handlers for all modules");for(var t=0;t<20;t++)n.$2iv(t,this.$$d_$A5u)},$29x:function(n){var i=this.$NE[n];if(i&&$4ne(this,i)){var t=i.get_$o();if(!$5(t)&&!$5(this.$2P7[t])){_js.Trace.logInfo(_a.$0.$5o,"Removing granular notification entry for folder id : {0}",t);delete this.$2P7[t]}}_a.$fH.prototype.$29x.call(this,n)},$49:function(){this.get_$gw().$AAs();_a.$fH.prototype.$49.call(this)},$7n5:function(){return new _c.$KK(50)},$A5u:function(n){_a.$3.$m(n,"e");this.get_$gw().$9kK(n)}};_c.$lg=function(){};_c.$lg.$8KB=function(n){var t=!1;var i="emailProxy";if(n&&n.$NO(i)){var r=n.get_$3o(i);t="true"===r}return t};_c.$lg.prototype={$3Z:null,$E:function(n,t,i,r){this.$3Z||(this.$3Z=new _c.$DZ(n,t,i.get_$6GN(),i.get_$4e3(),i.get_$3PW(),_c.$lg.$8KB(r)));return this.$3Z}};_c.$1DE=function(n){_c.$1DE.initializeBase(this,[7,0,!0,n])};_c.$1DE.prototype={get_$1y:function(){return"ReconcileSyncContextId"},$4bC:function(n){return n.$9zS()}};_c.$11s=function(n,t,i,r,u,f,e,o,s,h,c,l){this.$ER=n;this.$2D5=t;this.$b4=i;this.$72=r;this.$c=u;this.$5D1=f;this.$MD=e;this.$1A=o;this.$44=s;this.$2H9=h;this.$4U=c;this.$1H=l};_c.$11s.prototype={$ER:null,$2D5:null,$b4:null,$72:null,$c:null,$5D1:null,$MD:null,$1A:null,$44:null,$2H9:null,$4U:null,$1H:null,$4Y:null,$E:function(n,t,i,r,u,f,e){if(this.$4Y){_js.Trace.logWarning(_a.$0.$Df,"Sync manager create called, but a sync manager already exists");this.$4Y.dispose()}var o=new ExternalSyncDependencies(n,this.$b4,this.$72,this.$ER,this.$c,this.$5D1,this.$MD,t,this.$1A,i,r,this.$44,this.$2H9,this.$2D5,f,this.$4U,e);var s=!!this.$4U&&this.$4U.$3N("SuperStart");this.$4Y=new _c.$1p(o,u,this.$44,this.$1H,s);OwaApplication.set_$5Ov(this.$4Y);return this.$4Y},$rX:function(){return this.$4Y}};_c.$9Y.registerClass("_c.$9Y",null,_h.$1Kn);_c.$HL.registerClass("_c.$HL",_c.$9Y);_c.$1Lb.registerClass("_c.$1Lb",null,_a.$1IE);_c.$1MG.registerClass("_c.$1MG",_c.$1Lb);_c.$13Y.registerClass("_c.$13Y",_c.$1MG);_c.$I2.registerClass("_c.$I2",null,_c.$1L8);_c.$1FN.registerClass("_c.$1FN",_c.$I2);_c.$12S.registerClass("_c.$12S",_c.$9Y);_c.$10o.registerClass("_c.$10o",_c.$1Lb);_c.$mJ.registerClass("_c.$mJ",_c.$1Lb);_c.$11l.registerClass("_c.$11l",null,ISyncController);_c.$11v.registerClass("_c.$11v");_c.$1MF.registerClass("_c.$1MF",_c.$11v);_c.$n9.registerClass("_c.$n9",_c.$1MF);_c.$KK.registerClass("_c.$KK",null,_a.$1ID);_c.$1FU.registerClass("_c.$1FU",_c.$I2);_c.$1Fe.registerClass("_c.$1Fe",_js.$15l,_a.$1IC,Sys.IDisposable);_c.$13s.registerClass("_c.$13s",_c.$1Lb);_c.$NY.registerClass("_c.$NY",_c.$1Lb);_c.$1C2.registerClass("_c.$1C2",_c.$1Lb);_c.$16V.registerClass("_c.$16V",_a.$R);_c.$16V.prototype.$9S=_a.$R.prototype.$9S;_c.$16g.registerClass("_c.$16g");_c.$ps.registerClass("_c.$ps",_c.$1Lb);_c.$U9.registerClass("_c.$U9",_c.$1MG);_c.$1DM.registerClass("_c.$1DM",_c.$1Lb);_c.$1E.registerClass("_c.$1E",null,_c.$kr);_c.$hM.registerClass("_c.$hM",_c.$1E);_c.$11k.registerClass("_c.$11k",_c.$11v);_c.$1FQ.registerClass("_c.$1FQ",_c.$uj.$$(_g.$K1));_c.$1FR.registerClass("_c.$1FR",_c.$JX.$$(_c.$1FQ,_g.$K1));_c.$1FS.registerClass("_c.$1FS",_c.$11v);_c.$1FT.registerClass("_c.$1FT",_c.$I2);_c.$4I.registerClass("_c.$4I",_a.$R);_c.$4I.prototype.$9S=_a.$R.prototype.$9S;_c.$1FV.registerClass("_c.$1FV",_c.$4I);_c.$1FV.prototype.$9S=_a.$R.prototype.$9S;_c.$1FY.registerClass("_c.$1FY",_h.$FY,_a.$rL,_a.$kW);_c.$Oq.registerClass("_c.$Oq",_c.$Qd.$$(_c.$1FY,Array,_g.$bJ));_c.$1FZ.registerClass("_c.$1FZ",_c.$Oq);_c.$1Fa.registerClass("_c.$1Fa",_c.$Oq);_c.$1Fb.registerClass("_c.$1Fb",_c.$4I);_c.$1Fb.prototype.$9S=_a.$R.prototype.$9S;_c.$11n.registerClass("_c.$11n",_c.$1E);ExternalSyncDependencies.registerClass("ExternalSyncDependencies");_c.$1Ff.registerClass("_c.$1Ff",_c.$uj.$$(_g.$Pg));_c.$1Fg.registerClass("_c.$1Fg",_c.$JX.$$(_c.$1Ff,_g.$Pg));_c.$1Fh.registerClass("_c.$1Fh",_c.$11v);_c.$AF.registerClass("_c.$AF",null,ISyncFolderSettingProcessor);_c.$u2.registerClass("_c.$u2",_c.$I2);_c.$1Fq.registerClass("_c.$1Fq",_c.$tz.$$(_g.$hZ,_g.$nH));_c.$Zc.registerClass("_c.$Zc",_c.$1MF);_c.$11t.registerClass("_c.$11t",_c.$Zc);_c.$hd.registerClass("_c.$hd",_h.$py,_a.$rL,_a.$kW);_c.$JW.registerClass("_c.$JW",_c.$Qd.$$(_c.$hd,Array,_g.$7j));_c.$1Fs.registerClass("_c.$1Fs",_c.$JW);_c.$1Ft.registerClass("_c.$1Ft",_c.$JW);_c.$Zb.registerClass("_c.$Zb",_c.$u0.$$(_c.$1Fq,_g.$nH,_g.$7j));_c.$1Fr.registerClass("_c.$1Fr",_c.$Zb);_c.$1Fu.registerClass("_c.$1Fu",_c.$4I);_c.$1Fu.prototype.$9S=_a.$R.prototype.$9S;_c.$1Fv.registerClass("_c.$1Fv",_c.$Zb);_c.$11u.registerClass("_c.$11u",_c.$Zc);_c.$1Fw.registerClass("_c.$1Fw",_c.$u1.$$(_g.$7j));_c.$N9.registerClass("_c.$N9",null,_c.$1LJ);_c.$1Fy.registerClass("_c.$1Fy",_c.$uj.$$(_g.$S8));_c.$1Fz.registerClass("_c.$1Fz",_c.$JX.$$(_c.$1Fy,_g.$S8));_c.$1G0.registerClass("_c.$1G0",_c.$11v);_c.$1G8.registerClass("_c.$1G8",_c.$4I);_c.$1G8.prototype.$9S=_a.$R.prototype.$9S;_c.$u3.registerClass("_c.$u3");_c.$1G9.registerClass("_c.$1G9",_c.$I2);_c.$hh.registerClass("_c.$hh",_c.$I2);_c.$11w.registerClass("_c.$11w",_a.$R);_c.$11w.prototype.$9S=_a.$R.prototype.$9S;_c.$1GC.registerClass("_c.$1GC",_c.$uj.$$(_g.$dc));_c.$1GD.registerClass("_c.$1GD",_c.$JX.$$(_c.$1GC,_g.$dc));_c.$1GE.registerClass("_c.$1GE",_c.$11v);_c.$11m.registerClass("_c.$11m",_c.$n9);_c.$11o.registerClass("_c.$11o",_c.$n9);_c.$1Fl.registerClass("_c.$1Fl",_c.$11v);_c.$1G1.registerClass("_c.$1G1",_c.$uj.$$(_g.$LT));_c.$NA.registerClass("_c.$NA",_c.$JX.$$(_c.$1G1,_g.$LT));_c.$1G2.registerClass("_c.$1G2",_c.$11v);_c.$1FO.registerClass("_c.$1FO",_c.$uj.$$(_g.$hO));_c.$1FX.registerClass("_c.$1FX",_c.$tz.$$(_g.$hQ,_g.$nA));_c.$hS.registerClass("_c.$hS",_c.$u1.$$(_g.$Wj));_c.$9y.registerClass("_c.$9y",_c.$JX.$$(_c.$1FO,_g.$hO));_c.$DF.registerClass("_c.$DF",_c.$11v);_c.$1Fi.registerClass("_c.$1Fi",_c.$tz.$$(_g.$hV,_g.$nC));_c.$1Fk.registerClass("_c.$1Fk",_c.$JX.$$(_c.$1Fi,_g.$nC));_c.$1Fn.registerClass("_c.$1Fn");_c.$1G3.registerClass("_c.$1G3",_c.$tz.$$(_g.$hf,_g.$nI));_c.$1G5.registerClass("_c.$1G5",_c.$uj.$$(Array));_c.$1G6.registerClass("_c.$1G6",_c.$JX.$$(_c.$1G5,Array));_c.$1G7.registerClass("_c.$1G7",_c.$11v);_c.$Kc.registerClass("_c.$Kc",_c.$JX.$$(_c.$1G3,_g.$nI));_c.$Io.registerClass("_c.$Io",_c.$11v);_c.$u4.registerClass("_c.$u4",_c.$tz.$$(_g.$Nn,_g.$Np));_c.$1GA.registerClass("_c.$1GA",_c.$JX.$$(_c.$u4,_g.$Np));_c.$1GB.registerClass("_c.$1GB",_c.$11v);_c.$23.registerClass("_c.$23");_c.$126.registerClass("_c.$126",_c.$1Lb);_c.$1p.registerClass("_c.$1p",_js.$15l,_a.$1IB,Sys.IDisposable);_c.$11p.registerClass("_c.$11p",_c.$u0.$$(_c.$1FX,_g.$nA,_g.$Wj));_c.$n8.registerClass("_c.$n8",_c.$11p);_c.$1Fc.registerClass("_c.$1Fc",_c.$11p);_c.$1Fd.registerClass("_c.$1Fd",_c.$4I);_c.$1Fd.prototype.$9S=_a.$R.prototype.$9S;_c.$13X.registerClass("_c.$13X",_a.$R);_c.$13X.prototype.$9S=_a.$R.prototype.$9S;_c.$I9.registerClass("_c.$I9",_js.$15l);CoreSyncComponent.registerClass("CoreSyncComponent",null,_a.$1L9);_c.$DZ.registerClass("_c.$DZ",_a.$fH,_a.$UJ,Sys.IDisposable,_a.$1IP);_c.$lg.registerClass("_c.$lg",null,INotificationHandlerProxyFactory);_c.$1DE.registerClass("_c.$1DE",_c.$1Lb);_c.$11s.registerClass("_c.$11s",null,ISyncManagerFactory,ISyncManagerSingleton);_c.$9Y.$ML=_a.$0.$1nq;_c.$AF.$3Xj=new Sys.EventHandlerList;_c.$AF.$ML=_a.$0.$1nq;_c.$JW.$3tH=null;_c.$JW.$4N3=null;_c.$4I.$3HH="m";_c.$4I.$450="fts";_c.$4I.$4eq="st";_c.$4I.$4el="ss";_c.$4I.$4en="sse";_c.$4I.$4eZ="se";_c.$4I.$4iA="u";_c.$4I.$3rU="d";_c.$4I.$4gD="syt";_c.$4I.$4ei="sid";_c.$4I.$3sB="dic";_c.$4I.$4VK="ric";_c.$4I.$3gg="aqcar";_c.$9y.$6q1=-7;_c.$9y.$js=null;_c.$DF.$1sj=null;_c.$Io.$2r2=[];_c.$1p.$1wc=14;_c.$1p.$A=_a.$0.$Df;_c.$1p.$6jO=10;_c.$1p.$5rt=500;_c.$I9.$26h=_a.$0.$3jo;_c.$DZ.$6YN="RowNotification".toLowerCase();_c.$DZ.$5FJ="CalendarItemNotification".toLowerCase()