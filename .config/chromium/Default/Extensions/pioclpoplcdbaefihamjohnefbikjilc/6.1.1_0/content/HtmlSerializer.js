"undefined"==typeof SAFARI&&(SAFARI=!1);if("undefined"==typeof Browser){Browser={sendToExtension:function(y){window.parent.postMessage(y,"*")}};var msgMap={},msgHandler=function(y){var v=y.data;if(v&&v.name&&msgMap[v.name])msgMap[v.name](y.data)};window.addEventListener("message",msgHandler,!1);Browser.addMessageHandlers=function(y){for(var v in y)msgMap[v]=y[v]}}
function HtmlSerializer(){function y(a,b){b=b.toLowerCase();if(b.match(/^on/i)||b.match(/^data-/i)||-1<ga.indexOf(b))return!1;switch(a){case "a":return-1<c.indexOf(b)||-1<X.indexOf(b)||-1<"charset coords href hreflang name rel rev shape target type".split(" ").indexOf(b)?!0:!1;case "abbr":return-1<c.indexOf(b)?!0:!1;case "acronym":return-1<c.indexOf(b)?!0:!1;case "address":return-1<c.indexOf(b)?!0:!1;case "area":return-1<c.indexOf(b)||-1<X.indexOf(b)||-1<"alt coords href nohref shape target".split(" ").indexOf(b)?
!0:!1;case "b":return-1<c.indexOf(b)?!0:!1;case "bdo":return-1<R.indexOf(b)||-1<["dir","lang"].indexOf(b)?!0:!1;case "big":return-1<c.indexOf(b)?!0:!1;case "blockquote":return-1<c.indexOf(b)||-1<["cite"].indexOf(b)?!0:!1;case "br":return-1<R.indexOf(b)||-1<["clear"].indexOf(b)?!0:!1;case "caption":return-1<c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "center":return-1<c.indexOf(b)?!0:!1;case "cite":return-1<c.indexOf(b)?!0:!1;case "code":return-1<c.indexOf(b)?!0:!1;case "col":return-1<c.indexOf(b)||
-1<C.indexOf(b)||-1<["span","valign","width"].indexOf(b)?!0:!1;case "colgroup":return-1<c.indexOf(b)||-1<C.indexOf(b)||-1<["valign"].indexOf(b)?!0:!1;case "dd":return-1<c.indexOf(b)?!0:!1;case "del":return-1<c.indexOf(b)||-1<["cite","datetime"].indexOf(b)?!0:!1;case "dfn":return-1<c.indexOf(b)?!0:!1;case "div":return-1<["evernote_attachment_url","evernote_attachment_name","evernote_attachment_mime"].indexOf(b)||-1<c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "dl":return-1<c.indexOf(b)||-1<["compact"].indexOf(b)?
!0:!1;case "dt":return-1<c.indexOf(b)?!0:!1;case "em":return-1<c.indexOf(b)?!0:!1;case "font":return-1<R.indexOf(b)||-1<Y.indexOf(b)||-1<["color","face","size"].indexOf(b)?!0:!1;case "h1":return-1<c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h2":return-1<c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h3":return-1<c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h4":return-1<c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h5":return-1<c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "h6":return-1<
c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "hr":return-1<c.indexOf(b)||-1<["align","noshade","size","width"].indexOf(b)?!0:!1;case "i":return-1<c.indexOf(b)?!0:!1;case "img":return-1<c.indexOf(b)||-1<"align alt border height hspace ismap longdesc name src usemap vspace width".split(" ").indexOf(b)?!0:!1;case "ins":return-1<c.indexOf(b)||-1<["cite","datetime"].indexOf(b)?!0:!1;case "kbd":return-1<c.indexOf(b)?!0:!1;case "li":return-1<c.indexOf(b)||-1<["type","value"].indexOf(b)?!0:!1;case "map":return-1<
Y.indexOf(b)||-1<["name","title"].indexOf(b)?!0:!1;case "ol":return-1<c.indexOf(b)||-1<["compact","start","type"].indexOf(b)?!0:!1;case "p":return-1<c.indexOf(b)||-1<["align"].indexOf(b)?!0:!1;case "pre":return-1<c.indexOf(b)||-1<["width"].indexOf(b)?!0:!1;case "q":return-1<c.indexOf(b)||-1<["cite"].indexOf(b)?!0:!1;case "s":return-1<c.indexOf(b)?!0:!1;case "samp":return-1<c.indexOf(b)?!0:!1;case "small":return-1<c.indexOf(b)?!0:!1;case "span":return-1<c.indexOf(b)?!0:!1;case "strike":return-1<c.indexOf(b)?
!0:!1;case "strong":return-1<c.indexOf(b)?!0:!1;case "sub":return-1<c.indexOf(b)?!0:!1;case "sup":return-1<c.indexOf(b)?!0:!1;case "table":return-1<c.indexOf(b)||-1<"align bgcolor border cellpadding cellspacing summary width".split(" ").indexOf(b)?!0:!1;case "tbody":return-1<c.indexOf(b)||-1<C.indexOf(b)||-1<["valign"].indexOf(b)?!0:!1;case "td":return-1<c.indexOf(b)||-1<C.indexOf(b)||-1<"abbr bgcolor colspan height nowrap rowspan valign width".split(" ").indexOf(b)?!0:!1;case "tfoot":return-1<c.indexOf(b)||
-1<C.indexOf(b)||-1<["valign"].indexOf(b)?!0:!1;case "th":return-1<c.indexOf(b)||-1<C.indexOf(b)||-1<"abbr bgcolor colspan height nowrap rowspan valign width".split(" ").indexOf(b)?!0:!1;case "thead":return-1<c.indexOf(b)||-1<C.indexOf(b)||-1<["valign"].indexOf(b)?!0:!1;case "tr":return-1<c.indexOf(b)||-1<C.indexOf(b)||-1<["bgcolor","valign"].indexOf(b)?!0:!1;case "tt":return-1<c.indexOf(b)?!0:!1;case "u":return-1<c.indexOf(b)?!0:!1;case "ul":return-1<c.indexOf(b)||-1<["compact","type"].indexOf(b)?
!0:!1;case "var":return-1<c.indexOf(b)?!0:!1}}function v(a){a=a.toUpperCase();return-1==ha.indexOf(a)}function J(a){var b=a.nodeName,b=b.toUpperCase();return"INPUT"==b&&a.type&&"image"==a.type.toLowerCase()?"img":"BODY"==b||"HTML"==b||"FORM"==b?"div":"LABEL"==b?"span":"FIELDSET"==b?"div":"LEGEND"==b?"span":"IFRAME"==b||"EMBED"==b?"div":"CANVAS"==b?"img":-1<ia.indexOf(b)?"div":v(b)?-1==ja.indexOf(b)?"span":b.toLowerCase():b.toLowerCase()}function Z(a){if($(a))if(F.length>=S)log.warn("Hit style cap of "+
S+" styles. Stopping.");else if(!a.cssRules&&a.href)z.push({href:a.href,owner:a.ownerNode}),G++,F.push(a.href),K.push(a.href),Browser.sendToExtension({name:"main_getTextResource",href:a.href});else{var b=a.cssRules,d=null;if(a.ownerNode&&a.ownerNode.dataset&&a.ownerNode.dataset.evernoteOriginatingUrl){var e=/(.+)\//.exec(a.ownerNode.dataset.evernoteOriginatingUrl);e&&(d=e[1])}for(e=0;e<b.length;e++)if(b[e].type==CSSRule.IMPORT_RULE){var c=b[e].styleSheet.href;/^https?:\/\//.test(b[e].href)||/^\/\//.test(b[e].href)||
d&&(c="/"===b[e].href[0]?d+b[e].href:d+"/"+b[e].href);-1==F.indexOf(c)&&(z.push({href:c,owner:a.ownerNode}),G++,F.push(c),K.push(c),Browser.sendToExtension({name:"main_getTextResource",href:c}))}else b[e].type==CSSRule.MEDIA_RULE&&$(b[e])&&z.push(b[e]);z.push(a)}}function aa(a,b,d){d=d.trim();a=d.match(/^http/i)?d:d.match(/^\//)?a.replace(/^(.*?:\/\/[^\/]+).*$/,"$1")+d:a.replace(/^(.*\/)/,"$1")+d;return"url('"+a+"')"}function ka(a,b){function d(){for(var a=[c],b=0;b<arguments.length;b++)a.push(arguments[b]);
return aa.apply(this,a)}var e=p.document.location.href.replace(/[^\/]+$/,""),c=b.replace(/[^\/]+$/,"");if(e==c)return a;a&&(a=a.replace(/url\(["']?(.*?)["']?\)/g,d));return a}function la(){D||(D=setInterval(function(){try{if(F.length>=S)D&&(clearInterval(D),D=0),T(E);else{var a=0;a:for(;a<L.length;a++)for(var b=L[a][0],d=L[a][1],e=0;e<p.document.styleSheets.length;e++){var c=p.document.styleSheets[e];if(c.ownerNode===b){z[d]=c;Z(p.document.styleSheets[e]);L.splice(a,1);G--;break a}}0==G&&(D&&(clearInterval(D),
D=0),T(E))}}catch(H){B(null,H)}},100))}function $(a){if(a.media&&a.media.length){for(var b=0;b<a.media.length;b++){var d=a.media[b].toLowerCase();if(d.match(/\bscreen\b/i)||d.match(/\ball\b/i))return!0}return!1}return!0}function T(a){setTimeout(function(){try{O=[];for(var b=0;b<z.length;b++){var d=z[b];if(d.cssRules)for(var e=0;e<d.cssRules.length;e++){var c=d.cssRules[e];c.selectorText&&c.selectorText.match(/(:?:before)|(:?:after)/)&&O.push(c)}}g=[];g.push({element:a,string:"",i:0,after:null});x()}catch(H){B(null,
H)}},300)}function U(a){var b=document.createElement("div");b.textContent=a;return b.innerHTML}function ma(a){return"string"==typeof a.id&&"movie_player"==a.id&&p.document.location.href.match(/v=(.*?)(&|$)/)?(a=p.document.location.href.match(/v=(.*?)(&|$)/)[1],'<a href="'+GlobalUtils.escapeXML(p.document.location.href)+'" target="_blank"><img src="http://img.youtube.com/vi/'+a+'/0.jpg"></img></a>'):""}function na(a){try{if("application/x-shockwave-flash"===a.getAttribute("type")&&a.getAttribute("flashvars")){var b=
/iurlsd=(.+?)(&|$)/.exec(a.getAttribute("flashvars"));b||(b=/iurl=(.+?)(&|$)/.exec(a.getAttribute("flashvars")));b&&(a.style.backgroundImage="url("+decodeURIComponent(b[1])+")",a.style.backgroundPosition="50%",a.style.backgroundRepeat="no-repeat");if(b=/video_id=(.+?)(&|$)/.exec(a.getAttribute("flashvars"))){var d=document.createElement("a");d.href="https://www.youtube.com/watch?v="+b[1];d.target="_blank";d.style.display="block";d.style.width="100%";d.style.height="100%";a.appendChild(d)}}}catch(e){log.warn("problem with adding pic to embedded youtube video")}}
function oa(a){if("iframe"!=a.nodeName.toLowerCase())return null;var b="";if(a.dataset&&a.dataset.en_id&&P&&P[a.dataset.en_id]){var b=P[a.dataset.en_id],d=V(a);a.width&&(d.map.width={value:a.width+"px"});a.height&&(d.map.height={value:a.height+"px"});d.map.position&&"static"!==d.map.position.value||(d.map.position={value:"relative"});a="";for(var e in d.map)a+=e+":"+d.map[e].value+";";a=a?' style="'+M(a)+'"':"";return"<div"+a+">"+b+"</div>"}return null}function pa(a){if(a.parentNode&&a!=E){var b=
a.parentNode.nodeName,b=b.toLowerCase();if("dl"==b&&(a=J(a),"dd"!=a&&"dt"!=a))return!1}return!0}function x(){ba++;if(0==ba%500)setTimeout(function(){try{x()}catch(a){B(null,a)}},25);else{var a=g[g.length-1];a||B("");if(0==a.i){if(!v(J(a.element))){g.pop();x();return}if(!pa(a.element)){log.warn('discarding invalid DL child "'+a.element.nodeName+'"');g.pop();x();return}if(m&&a.element!=m.commonAncestorContainer&&!m.intersectsNode(a.element)){g.pop();x();return}if(m&&a.element===m.endContainer&&0===
m.endOffset){g.pop();x();return}if(-1<"evernoteClipperResult evernoteAuthTools evernoteFilingTools evernoteGlobalTools evernoteUserTools evernoteShareTools evernoteEmailSharing evernoteOptionsPage evernoteClearlyArticle".split(" ").indexOf(a.element.id)){g.pop();x();return}var b=ma(a.element);if(b){a.string+=b;g.pop();g.length?(g[g.length-1].string=a.string,x()):B(a.string);return}if(b=oa(a.element)){a.string+=b;g.pop();g.length?(g[g.length-1].string=a.string,x()):B(a.string);return}b={};I&&(na(a.element),
b=V(a.element),b.after&&(a.after=b.after));if(b.map&&b.map.display&&"none"==b.map.display.value){g.pop();x();return}var d=J(a.element);a.string+="<"+d;qa(a.element);if("CANVAS"==a.element.nodeName)try{a.string+=' src="'+a.element.toDataURL()+'"'}catch(e){}if(a.element.attributes&&a.element.attributes.length)for(a.i=0;a.i<a.element.attributes.length;a.i++)y(d,a.element.attributes[a.i].name)&&(a.string+=" "+ra(a.element,a.element.attributes[a.i]));I&&"map"!=d&&(a.string+=b.style);a.string+=">";I&&b.before&&
(a.string+=b.before);a.i=0}for(;a.i<a.element.childNodes.length;){if(a.element.childNodes[a.i].nodeType==Node.TEXT_NODE)b=m&&a.element.childNodes[a.i]===m.startContainer?U(a.element.childNodes[a.i].textContent.substr(m.startOffset)):m&&a.element.childNodes[a.i]===m.endContainer?U(a.element.childNodes[a.i].textContent.substr(0,m.endOffset)):m&&!m.intersectsNode(a.element.childNodes[a.i])?"":U(a.element.childNodes[a.i].textContent),a.string+=b;else if(a.element.childNodes[a.i].nodeType==Node.ELEMENT_NODE){g.push({element:a.element.childNodes[a.i],
string:a.string,i:0,after:null});a.i++;x();return}a.i++}I&&a.after&&(a.string+=a.after);a.string+="</"+J(a.element)+">";g.pop();g.length?(g[g.length-1].string=a.string,x()):B(a.string)}}function ca(a){var b={};a=a.split(/;(?!.[^\(]+?\))\s*/);for(var d=0;d<a.length;d++)if(a[d]=a[d].trim(),a[d]){var e=a[d].indexOf(":"),c=a[d].substr(0,e).trim(),e=a[d].substr(e+1).trim();if(c&&e){for(var H=/(url\(.+?\))/g,k=H.exec(e),n=e;k;){var l=k=k[1];/url\(.+?(data:.+?;.+?,.+?)\)/.test(l)&&(l="url("+/url\(.+?(data:.+?;.+?,.+?)\)/.exec(l)[1]+
")");/url\(.*\/\/.*?\/\/(.+?)\)/.test(l)&&(l="url(http://"+/url\(.*\/\/.*?\/\/(.+?)\)/.exec(l)[1]+")");/url\(\/\/(.+?)\)/.test(l)&&(l="url(http://"+/url\(\/\/(.+?)\)/.exec(l)[1]+")");/url\((.+?)\)/.test(l)&&(l="url("+GlobalUtils.escapeXML(GlobalUtils.unescapeXML(/url\((.+?)\)/.exec(l)[1]))+")");n=n.replace(k,l);k=H.exec(e)}e=n;b[c.toLowerCase()]=e}}if(b["background-position"]&&b["background-repeat"]&&"0px 50%"==b["background-position"].trim()&&"initial initial"==b["background-repeat"].trim()){for(var p in b)p.match(/background/)&&
delete b[p];b.background="0"}return b}function da(a){var b={};if(a.style.cssText){a.style.savedCssObj||(a.style.savedCssObj=ca(a.style.cssText));a=a.style.savedCssObj;for(var d in a)b[d]=a[d]}return b}function qa(a){"img"==a.nodeName.toLowerCase()&&(a.attributes.width||a.setAttribute("width",a.width),a.attributes.height||a.setAttribute("height",a.height))}function sa(a){a.hasAttribute("background")&&(a.style.backgroundImage="url("+a.getAttribute("background")+")");a.hasAttribute("bgcolor")&&(a.style.backgroundColor=
a.getAttribute("bgcolor"));if(a.hasAttribute("height")){var b=a.getAttribute("height");-1<b.indexOf("%")||-1<b.indexOf("px")?a.style.height=b:a.style.height=parseInt(b)+"px"}a.hasAttribute("text")&&(a.style.color=a.getAttribute("text"));a.hasAttribute("width")&&(b=a.getAttribute("width"),-1<b.indexOf("%")||-1<b.indexOf("px")?a.style.width=b:a.style.width=parseInt(b)+"px")}function ta(a){for(var b=[],d=0;d<z.length;d++){var e=z[d];if(e.cssRules)for(var c=a,p=b,k=0;k<e.cssRules.length;k++){var n=e.cssRules[k],
l=c,g=p;try{var f=!1;l.matchesSelector?f=l.matchesSelector(n.selectorText):l.mozMatchesSelector?f=l.mozMatchesSelector(n.selectorText):l.webkitMatchesSelector&&(f=l.webkitMatchesSelector(n.selectorText));f&&g.push(n)}catch(h){}}}return b}function ua(a){var b={ids:{regex:/#[A-Z]+/ig,count:0},classes:{regex:/\.[A-Z]+/ig,count:0},attrs:{regex:/\[.*?\]/g,count:0},pseudos:{regex:/:+[A-Z]+/ig,count:0},pseudoEls:{regex:/:+(first-line|first-letter|before|after)/ig,count:0},types:{regex:/(^|\s)[A-Z]+/ig,count:0}},
d;for(d in b)for(var e=b[d].regex;e.exec(a);)b[d].count++;b.pseudoClasses={};b.pseudoClasses.count=b.pseudos.count-b.pseudoEls.count;return 65536*b.ids.count+256*(b.classes.count+b.attrs.count+b.pseudoClasses.count)+(b.types.count+b.pseudoEls.count)}function va(a){for(var b=[],d=0,e=0,c="",e=0;e<a.length;e++)c?a[e]==c&&(c=""):"'"==a[e]||'"'==a[e]?c=a[e]:","==a[e]&&(b.push(a.substring(d,e).trim()),d=e+1);b.push(a.substr(d).trim());return b}function wa(a,b){var d=a.nodeName.toLowerCase();"table"!=d&&
"caption"!=d||"CSS1Compat"!=p.document.compatMode||(b["font-size"]={value:"inherit",score:0},b["font-weight"]={value:"inherit",score:0},b["font-style"]={value:"inherit",score:0},b["font-variant"]={value:"inherit",score:0})}function xa(a,b){"padding"==a?(delete b["padding-top"],delete b["padding-bottom"],delete b["padding-left"],delete b["padding-right"]):"margin"==a&&(delete b.margintop,delete b["margin-bottom"],delete b["margin-left"],delete b["margin-right"])}function V(a,b){sa(a);A=p.document.getElementsByTagName("base")[0];
!SAFARI&&A&&A.parentNode.removeChild(A);var d="",e=null,c={},g={};a.attributes&&a.attributes.style&&(e=ca(a.attributes.style.value));var k={};wa(a,k);var n;if((n=!p.getMatchedCSSRules||SAFARI&&A?ta(a):p.getMatchedCSSRules(a))&&n.length)for(var l=0;l<n.length;l++){var t=0,f=!1;n[l].selectorText.match(/:visited/i)&&(f=!0);for(var h=va(n[l].selectorText),m=0;m<h.length;m++){var u;try{u=a.webkitMatchesSelector(h[m])}catch(x){log.warn("Couldn't match against selector "+h[m]+" in: "+n[l].selectorText),
log.exception(x)}if(u){var f=!1,s=ua(h[m]);s>=t&&(t=s)}}if(!f){s=da(n[l]);if(s["counter-reset"]&&(f=s["counter-reset"].split(/\s+/),0<f.length))for(h=0;h<f.length;)/^\d+$/.test(f[h+1])?(w[f[h]]=parseInt(f[h+1]),h+=2):w[f[h++]]=0;if(s["counter-increment"]&&(f=s["counter-increment"].split(/\s+/),0<f.length))for(h=0;h<f.length;)w[f[h]]||(w[f[h]]=0),/^\d+$/.test(f[h+1])?(w[f[h]]+=parseInt(f[h+1]),h+=2):w[f[h++]]++;for(var q in s)f=q.replace(/^-/,"").replace(/-[a-z]/g,function(a){return a[1].toUpperCase()}),
n[l].style[f]&&"counterIncrement"!==f&&"counterReset"!==f&&(f=0,k[q]&&(f=k[q].score),h=t,s[q].match(/!important\s*$/i)&&(h+=16777216,s[q]=s[q].replace(/\s*!important\s*$/i,"")),h>=f&&(xa(q,k),k[q]={value:s[q],score:h}))}}for(l=0;l<O.length;l++){u=O[l];var v;if(a.webkitMatchesSelector)try{v=a.webkitMatchesSelector(u.selectorText.replace(/(:?:before)|(:?:after)/g,""))}catch(z){}if(v){t=n=!1;u.selectorText.match(/:?:before/)&&(n=!0);u.selectorText.match(/:?:after/)&&(t=!0);for(q in k)n&&ea[q.toLowerCase()]&&
(c[q]=k[q].value),t&&ea[q.toLowerCase()]&&(g[q]=k[q].value);u=da(u);for(q in u)n&&(c[q]=u[q]),t&&(g[q]=u[q])}}n=[c,g];for(t=0;t<n.length;t++){u=n[t];var r=s="",y=0;if(u["counter-reset"])for(f=u["counter-reset"].split(/\s+/),h=0;h<f.length;)/^\d+$/.test(f[h+1])?(w[f[h]]=parseInt(f[h+1]),h+=2):w[f[h++]]=0;if(u["counter-increment"])for(f=u["counter-increment"].split(/\s+/),h=0;h<f.length;)w[f[h]]||(w[f[h]]=0),/^\d+$/.test(f[h+1])?(w[f[h]]+=parseInt(f[h+1]),h+=2):w[f[h++]]++;for(m in u)"content"==m?(r=
u[m],r=r.trim(),r=r.replace(/\s+!important$/,""),"none"==r&&(r='""'),r.match(/^'/)?r=r.replace(/^'(.*?)'.*/,"$1"):r.match(/^"/)&&(r=r.replace(/^"(.*?)".*/,"$1")),r.match(/^url\((.*)\)/)?r="<img src='"+r.match(/^url\((.*)\)/)[1]+"'></img>":r.match(/^\s*counter\(.*?\)/)?(f=r.match(/^\s*counter\((.*?)\)/)[1].split(",")[0],"number"===typeof w[f]&&(r=w[f])):r.match(/^\s*attr\((.*?)\)/)?(f=r.match(/^\s*attr\((.*?)\)/)[1],r=a.getAttribute(f)?a.getAttribute(f):""):r.match(/^\s*-webkit-image-set\(.+\)/)&&
(s+="background:"+r+";",r="")):"counter-reset"!==m&&"counter-increment"!==m&&(s+=m+":"+u[m]+";"),y++;y&&(s='<span style="'+s+'">'+GlobalUtils.escapeXML(""+r)+"</span>",0==t?c=s:g=s)}"string"!=typeof c&&(c=null);"string"!=typeof g&&(g=null);a==E&&(b=fa);if(b)for(l=0;l<b.length;l++)k[b[l]]&&delete k[b[l]];ya(a,k);za(k);if(e)for(q in m=/url\(['"]?(.*?)['"]?\)/i,e)m.test(e[q])&&(n=m.exec(e[q])[1],t=p.document.location.href,A&&A.href&&(t=A.href),t=aa(t,v,n),e[q]=e[q].replace('url("'+n+'")',t).replace("url('"+
n+"')",t).replace("url("+n+")",t)),k[q]={value:e[q]};for(l in k)d+=l+":"+k[l].value+";";d=d?' style="'+M(d)+'"':"";!SAFARI&&A&&p.document.head.insertBefore(A,p.document.head.firstChild);A=null;return{style:d,before:c,after:g,map:k}}function ya(a,b){if(b.height&&b.height.value.match(/%$/)){var d=b.height.value;try{"fixed"!=p.getComputedStyle(a).position&&(p.getComputedStyle(a.parentNode).height||(d="auto"))}catch(c){}b.height.value=d}}function za(a){for(var b="-webkit-user-select -moz-user-select -ms-user-select user-select -webkit-user-modify -moz-user-modify -ms-user-modify user-modify".split(" "),
d=0;d<b;d++)a[b[d]]&&delete a[b[d]]}function ra(a,b){var d=null;"href"==b.name.toLowerCase()?((d=a.href)&&d.match(/^javascript/i)&&(d="#"),d=M(d)):"src"==b.name.toLowerCase()&&(d=a.src,""==b.value.trim()&&(d=""),d&&d.match(/^javascript/i)&&(d="#"),d=M(d));d||(d=M(b.value.replace(/\u000A/g,"")));return b.name+'="'+d+'"'}function B(a,b){W=!1;if(!b){var d="",c="";if(I){for(var c=d="",g=E.parentNode;g&&g.parentNode;){var m=V(g,fa).style,k=J(g);v(k)&&(d="<"+k+m+">"+d,c=c+"</"+k+">");g=g.parentNode}d='<div style="font-size: 16px">'+
d;c+="</div>"}a=d+a+c}for(c=0;c<N.length;c++)N[c].parentNode.removeChild(N[c]);N=[];for(c=0;c<Q.length;c++)try{Q[c](a,b)}catch(n){log.warn("Couldn't run 'serialize' callback: "+n.stack||n.trace)}Q=[]}function M(a){if(!a)return"";var b=document.createElement("div");b.textContent=a;a=b.innerHTML;return a.replace(/"/g,"'")}var K=[],w={},G=0,z=[],E,m,I,Q=[],N=[],ba=0,g=[],W=!1,O=[],P,p,A=null,S=100,F=[],ja="A ABBR ACRONYM ADDRESS AREA B BDO BIG BLOCKQUOTE BR CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIV DL DT EM FONT H1 H2 H3 H4 H5 H6 HIGHLIGHT HR I IMG INS KBD LI MAP OL P PRE Q S SAMP SMALL SPAN STRIKE STRONG SUB SUP TABLE TBODY TD TFOOT TH THEAD TR TT U UL VAR".split(" "),
ia="ARTICLE ASIDE DETAILS FOOTER FIGURE FIGCAPTION HEADER HGROUP NAV SECTION SUMMARY".split(" "),ha="APPLET BASE BASEFONT BGSOUND BLINK BODY BUTTON DIR EMBED FIELDSET FORM FRAME FRAMESET HEAD HTML IFRAME ILAYER INPUT ISINDEX LABEL LAYER LEGEND LINK MARQUEE MENU META NOEMBED NOFRAMES NOSCRIPT OBJECT OPTGROUP OPTION PARAM PLAINTEXT SCRIPT SELECT STYLE TEXTAREA TITLE XML".split(" "),ga="id class accesskey data dynsrc tabindex style".split(" "),R=["style","title"],Y=["lang","xml:lang","dir"],X=["accesskey",
"tabindex"],c=["style","title","lang","xml:lang","dir"],C=["align","char","charoff"],fa="border border-bottom border-bottom-color border-bottom-style border-bottom-width border-collapse border-color border-left border-left-color border-left-style border-left-width border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-style border-top-width border-width bottom clear display float height layout-flow layout-grid layout-grid-char layout-grid-char-spacing layout-grid-line layout-grid-mode layout-grid-type left margin margin-bottom margin-left margin-right margin-top max-height max-width min-height min-width padding padding-bottom padding-left padding-right padding-top position right size table-layout top visibility width z-index".split(" ");
Browser.addMessageHandlers({content_textResource:function(a,b,d){try{var c=K.indexOf(a.href);if(-1==c){if(K.length)return}else K.splice(c,1);for(b=0;b<z.length;b++){var g=z[b];if(g.href===a.href){var m=ka(a.responseText,g.href),k=p.document.createElement("style");k.type="text/css";k.textContent=m;k.dataset.evernoteOriginatingUrl=g.href;a=[];for(m=0;m<p.document.styleSheets.length;m++)a.push(p.document.styleSheets[m]);g.owner?g.owner.parentNode.insertBefore(k,g.owner):p.document.head.appendChild(k);
N.push(k);L.push([k,b]);la();break}}}catch(n){B(null,n)}}});var L=[],D=0,ea={"border-collapse":!0,"border-spacing":!0,"caption-side":!0,color:!0,cursor:!0,direction:!0,"empty-cells":!0,"font-family":!0,"font-size":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,font:!0,"letter-spacing":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,"list-style":!0,orphans:!0,quotes:!0,"text-align":!0,"text-indent":!0,"text-transform":!0,visibility:!0,"white-space":!0,
widows:!0,"word-spacing":!0};this.serialize=function(a,b,c,e,g,v){try{if((p=v)||(p=window),e&&Q.push(e),W)log.warn("Called serialize while blocked. Added callback but won't change base element.");else{W=!0;E=a;m=b;I=c;P=g;G=0;F=[];w={};for(a=0;a<p.document.styleSheets.length;a++)Z(p.document.styleSheets[a]);0==G&&T(E)}}catch(k){B(null,k)}};Object.preventExtensions(this)}Object.preventExtensions(HtmlSerializer);
