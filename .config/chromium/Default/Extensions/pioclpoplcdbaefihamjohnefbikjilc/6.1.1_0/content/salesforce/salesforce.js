window===window.parent&&/\.salesforce\.com$/.test(window.location.host)&&(Browser.addMessageHandlers({isEligibleForSalesforcePromo:msgHandlerIsEligibleForSalesforcePromo,receiveSecret:msgHandlerReceiveSecret}),window.addEventListener("DOMContentLoaded",function(){setTimeout(function(){Browser.sendToExtension({name:"determineSalesforcePromoEligibility"})},1E3)}));var salesforcePromo,salesforcePromoChannel;
function msgHandlerIsEligibleForSalesforcePromo(a,b,c){salesforcePromo=document.createElement("iframe");salesforcePromo.id="evernoteSalesforcePromo";salesforcePromo.src=Browser.extension.getURL("content/salesforce/promo.html#design="+a.design+"&userType="+a.userType);salesforcePromoChannel=new MessageChannel;salesforcePromoChannel.port1.addEventListener("message",function(a){"close"===a.data.name?(salesforcePromo.addEventListener("webkitAnimationEnd",function(){salesforcePromo.parentNode.removeChild(salesforcePromo);
salesforcePromo=null;salesforcePromoChannel.port1.close();salesforcePromoChannel=null}),salesforcePromo.classList.add("evernoteHide")):a.data.name===SALESFORCE_PROMO_NAME+"Ready"&&salesforcePromo.classList.add("evernoteShow")});salesforcePromoChannel.port1.start();document.body.appendChild(salesforcePromo)}
function msgHandlerReceiveSecret(a,b,c){a.for===SALESFORCE_PROMO_NAME&&salesforcePromo.contentWindow.postMessage({name:"receivePort",secret:a.secret},Browser.extension.getURL(""),[salesforcePromoChannel.port2])};
